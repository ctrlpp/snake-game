function a0_0x1e43(_0x28ce21,_0x1bc9fd){const _0xe09617=a0_0xe096();return a0_0x1e43=function(_0x1e43ba,_0x4448cb){_0x1e43ba=_0x1e43ba-0x177;let _0x2b7460=_0xe09617[_0x1e43ba];return _0x2b7460;},a0_0x1e43(_0x28ce21,_0x1bc9fd);}const a0_0x4865bd=a0_0x1e43;(function(_0x36a820,_0x4def8e){const _0x1055fd=a0_0x1e43,_0x4420fa=_0x36a820();while(!![]){try{const _0xcca87a=-parseInt(_0x1055fd(0x2a4))/0x1*(parseInt(_0x1055fd(0x282))/0x2)+-parseInt(_0x1055fd(0x2cb))/0x3*(parseInt(_0x1055fd(0x196))/0x4)+parseInt(_0x1055fd(0x2b7))/0x5*(parseInt(_0x1055fd(0x227))/0x6)+-parseInt(_0x1055fd(0x21a))/0x7+parseInt(_0x1055fd(0x18d))/0x8*(parseInt(_0x1055fd(0x1e9))/0x9)+-parseInt(_0x1055fd(0x23b))/0xa+parseInt(_0x1055fd(0x1ca))/0xb*(parseInt(_0x1055fd(0x2e7))/0xc);if(_0xcca87a===_0x4def8e)break;else _0x4420fa['push'](_0x4420fa['shift']());}catch(_0x5ec8a7){_0x4420fa['push'](_0x4420fa['shift']());}}}(a0_0xe096,0xbf10e));class SnakeGame{constructor(){const _0x1f6097=a0_0x1e43;this['canvas']=document[_0x1f6097(0x203)](_0x1f6097(0x1ba));if(!this[_0x1f6097(0x237)]){console[_0x1f6097(0x29e)](_0x1f6097(0x2d6));return;}this['ctx']=this[_0x1f6097(0x237)][_0x1f6097(0x274)]('2d');if(!this[_0x1f6097(0x2b1)]){console[_0x1f6097(0x29e)](_0x1f6097(0x2e6));return;}this[_0x1f6097(0x20b)]=document['getElementById']('scoreValue')||{'textContent':''},this[_0x1f6097(0x2b5)]=document[_0x1f6097(0x203)](_0x1f6097(0x286))||document[_0x1f6097(0x2e0)]('div'),this[_0x1f6097(0x1bd)]=document[_0x1f6097(0x203)](_0x1f6097(0x1b8))||document[_0x1f6097(0x2e0)](_0x1f6097(0x19b)),this['gridSize']=0x14,this['snake']=[],this['food']=null,this[_0x1f6097(0x2bb)]=_0x1f6097(0x27a),this[_0x1f6097(0x255)]=_0x1f6097(0x27a),this[_0x1f6097(0x2bd)]=0x0,this[_0x1f6097(0x2c6)]=null,this['isPaused']=![],this['particles']=[],this[_0x1f6097(0x2b6)]=![],this['lastAIMoveTime']=0x0,this['aiMoveInterval']=0x64,this['justAteFood']=![],this[_0x1f6097(0x1dd)]=null,this['activeEffects']={},this[_0x1f6097(0x220)]=0x1,this['experience']=0x0,this[_0x1f6097(0x1ef)]=0x64,this['skills']=[],this[_0x1f6097(0x1ad)]=[],this[_0x1f6097(0x1af)]=0x0,this['isLevelUpMenuOpen']=![],this[_0x1f6097(0x19c)]=[],this[_0x1f6097(0x2c3)]=0x2710,this[_0x1f6097(0x22d)]=0x0,this[_0x1f6097(0x194)]={'easy':{'speed':0xc8,'acceleration':0x0},'medium':{'speed':0x78,'acceleration':0.5},'hard':{'speed':0x46,'acceleration':0x1}},this['currentDifficulty']=_0x1f6097(0x209),this['setupCanvas'](),this[_0x1f6097(0x2b0)](),this['setupAI'](),this['init']();}[a0_0x4865bd(0x283)](_0x3dd595){const _0x451213=a0_0x4865bd;if(!this[_0x451213(0x178)])return;const _0xb577dc=_0x3dd595[_0x451213(0x236)]['toLowerCase']();switch(_0xb577dc){case'arrowup':this[_0x451213(0x185)]=(this[_0x451213(0x185)]-0x1+this[_0x451213(0x1ad)][_0x451213(0x21b)])%this[_0x451213(0x1ad)][_0x451213(0x21b)],this[_0x451213(0x2dd)](),this[_0x451213(0x2e1)]();break;case _0x451213(0x1e0):this['selectedSkillIndex']=(this['selectedSkillIndex']+0x1)%this['availableSkills'][_0x451213(0x21b)],this[_0x451213(0x2dd)](),this[_0x451213(0x2e1)]();break;case'\x20':this[_0x451213(0x21d)](this[_0x451213(0x1ad)][this['selectedSkillIndex']]['id']),this[_0x451213(0x2dd)]();break;}}[a0_0x4865bd(0x1cc)](){const _0x369756=a0_0x4865bd,_0x1dd1c9=this['canvas']['parentElement'],_0x46fca8=Math[_0x369756(0x290)](_0x1dd1c9[_0x369756(0x1b9)],_0x1dd1c9[_0x369756(0x2a8)]);this[_0x369756(0x237)][_0x369756(0x1f7)]=_0x46fca8,this['canvas'][_0x369756(0x1e5)]=_0x46fca8,this[_0x369756(0x1a6)]=Math['floor'](_0x46fca8/this['gridSize']);const _0xebc2c5=this[_0x369756(0x1a6)]*this['gridSize'];this[_0x369756(0x237)]['width']=_0xebc2c5,this['canvas']['height']=_0xebc2c5,this['canvas'][_0x369756(0x294)]['width']=_0x46fca8+'px',this[_0x369756(0x237)][_0x369756(0x294)][_0x369756(0x1e5)]=_0x46fca8+'px';}[a0_0x4865bd(0x2b0)](){const _0x5badbb=a0_0x4865bd;document[_0x5badbb(0x1f0)](_0x5badbb(0x1d0),this['handleKeyPress']['bind'](this)),document[_0x5badbb(0x1f0)](_0x5badbb(0x1d0),this['handleSkillSelectionKeys'][_0x5badbb(0x24c)](this)),document[_0x5badbb(0x203)](_0x5badbb(0x1cf))['addEventListener'](_0x5badbb(0x2a2),()=>this[_0x5badbb(0x2cd)](_0x5badbb(0x209))),document[_0x5badbb(0x203)](_0x5badbb(0x229))[_0x5badbb(0x1f0)]('click',()=>this['setDifficulty'](_0x5badbb(0x2c8))),document[_0x5badbb(0x203)]('hardBtn')['addEventListener'](_0x5badbb(0x2a2),()=>this[_0x5badbb(0x2cd)](_0x5badbb(0x17e)));let _0x24c267;window[_0x5badbb(0x1f0)](_0x5badbb(0x182),()=>{clearTimeout(_0x24c267),_0x24c267=setTimeout(()=>{const _0x556a42=a0_0x1e43;this[_0x556a42(0x1cc)](),this[_0x556a42(0x2dd)]();},0x64);});}[a0_0x4865bd(0x2e8)](){const _0x4da898=a0_0x4865bd;this[_0x4da898(0x1bd)]&&this[_0x4da898(0x1bd)][_0x4da898(0x1f0)](_0x4da898(0x2a2),()=>{const _0x4ff56a=_0x4da898;this[_0x4ff56a(0x25f)]();});}[a0_0x4865bd(0x254)](){const _0x4d8fef=a0_0x4865bd;this[_0x4d8fef(0x220)]=0x1,this['experience']=0x0,this['experienceToNextLevel']=0x1e,this[_0x4d8fef(0x25c)]=[],this['availableSkills']=[],this['skillPoints']=0x0,this[_0x4d8fef(0x178)]=![],this[_0x4d8fef(0x185)]=0x0,this[_0x4d8fef(0x2a6)]=![],this[_0x4d8fef(0x1e2)]=0x0,this['scoreMultiplier']=0x1,this[_0x4d8fef(0x210)]=0x1,this[_0x4d8fef(0x245)]=0x0,this[_0x4d8fef(0x257)]=0x0,this[_0x4d8fef(0x22b)]=0x1,this[_0x4d8fef(0x27e)]=[0x64,0x12c],this[_0x4d8fef(0x2ce)]=null,this[_0x4d8fef(0x191)]=0x0,this['dashCooldown']=0x0,this[_0x4d8fef(0x261)]=![],this[_0x4d8fef(0x221)]=0x0,this['hasDashSkill']=![],this[_0x4d8fef(0x17f)]=[{'x':0xa,'y':0xa},{'x':0x9,'y':0xa},{'x':0x8,'y':0xa}],this[_0x4d8fef(0x2bb)]=_0x4d8fef(0x27a),this[_0x4d8fef(0x255)]=_0x4d8fef(0x27a),this['score']=0x0,this['scoreElement']['textContent']=this[_0x4d8fef(0x2bd)],this[_0x4d8fef(0x253)](),this[_0x4d8fef(0x18a)](),this['gameOverElement'][_0x4d8fef(0x1f6)]['add']('hidden'),this[_0x4d8fef(0x1a3)](),document[_0x4d8fef(0x177)](_0x4d8fef(0x2cf))['forEach'](_0xc0040b=>_0xc0040b[_0x4d8fef(0x294)][_0x4d8fef(0x2b9)]=_0x4d8fef(0x212)),this[_0x4d8fef(0x19e)]();}[a0_0x4865bd(0x2cd)](_0x4d9a3e){const _0x585eed=a0_0x4865bd;this['currentDifficulty']=_0x4d9a3e,document[_0x585eed(0x177)](_0x585eed(0x25d))[_0x585eed(0x2d9)](_0x2e5c37=>{const _0x2fb188=_0x585eed;_0x2e5c37[_0x2fb188(0x1f6)][_0x2fb188(0x1c2)](_0x2fb188(0x231));}),document[_0x585eed(0x203)](_0x4d9a3e+_0x585eed(0x2ee))['classList']['add'](_0x585eed(0x231)),this[_0x585eed(0x2c6)]&&(clearInterval(this[_0x585eed(0x2c6)]),this[_0x585eed(0x19e)]());}[a0_0x4865bd(0x19e)](){const _0x5e079c=a0_0x4865bd;console[_0x5e079c(0x23e)](_0x5e079c(0x1a4),this[_0x5e079c(0x22b)]);let _0x95aa3e;switch(this[_0x5e079c(0x22b)]){case 0x1:_0x95aa3e=_0x5e079c(0x209);break;case 0x2:_0x95aa3e=_0x5e079c(0x2c8);break;case 0x3:_0x95aa3e=_0x5e079c(0x17e);break;default:_0x95aa3e=_0x5e079c(0x209);}let _0x2d23c0=this[_0x5e079c(0x194)][_0x95aa3e][_0x5e079c(0x281)];console[_0x5e079c(0x23e)]('Stage:',this['currentStage'],'Difficulty:',_0x95aa3e,_0x5e079c(0x192),_0x2d23c0);if(this[_0x5e079c(0x2ed)]['speedBoost'])_0x2d23c0/=this[_0x5e079c(0x2ed)][_0x5e079c(0x2ba)]['multiplier'];else this['activeEffects'][_0x5e079c(0x1f3)]&&(_0x2d23c0/=this[_0x5e079c(0x2ed)][_0x5e079c(0x1f3)][_0x5e079c(0x262)]);const _0x5efc36=Math['max'](0x32,_0x2d23c0);this[_0x5e079c(0x2c6)]=setInterval(()=>this['update'](),_0x5efc36);}[a0_0x4865bd(0x1da)](_0x1fb8fb){const _0x2f8eaf=a0_0x4865bd;if(this['hasDashSkill']&&!this[_0x2f8eaf(0x2dc)]&&!this[_0x2f8eaf(0x178)]){const _0x4fd706=Date['now'](),_0x2a173d=_0x1fb8fb[_0x2f8eaf(0x236)]['toLowerCase']();_0x2a173d===this[_0x2f8eaf(0x2ce)]&&_0x4fd706-this['lastKeyTime']<0x12c&&this[_0x2f8eaf(0x252)]<=0x0&&(this[_0x2f8eaf(0x261)]=!![],this[_0x2f8eaf(0x221)]=0x3,this['dashCooldown']=0x1388,this['showEffectMessage'](_0x2f8eaf(0x2d2),_0x2f8eaf(0x1c3))),this['lastKeyPress']=_0x2a173d,this[_0x2f8eaf(0x191)]=_0x4fd706;}const _0x363edb=_0x1fb8fb['key'][_0x2f8eaf(0x297)]();if(_0x363edb==='i'){this[_0x2f8eaf(0x25f)]();return;}if(_0x363edb==='\x20'){this[_0x2f8eaf(0x2dc)]=!this[_0x2f8eaf(0x2dc)];this[_0x2f8eaf(0x2b5)][_0x2f8eaf(0x1f6)][_0x2f8eaf(0x275)](_0x2f8eaf(0x26a))?console['log'](_0x2f8eaf(0x280)):this['init']();return;}if(!this[_0x2f8eaf(0x2b6)]){const _0x233d40={'arrowup':'up','arrowdown':_0x2f8eaf(0x2d0),'arrowleft':_0x2f8eaf(0x1a9),'arrowright':_0x2f8eaf(0x27a),'w':'up','s':_0x2f8eaf(0x2d0),'a':_0x2f8eaf(0x1a9),'d':_0x2f8eaf(0x27a)};if(_0x233d40[_0x363edb]){let _0x57eca5=_0x233d40[_0x363edb];if(this[_0x2f8eaf(0x2ed)][_0x2f8eaf(0x20e)]){const _0x4d561d={'up':'down','down':'up','left':_0x2f8eaf(0x27a),'right':_0x2f8eaf(0x1a9)};_0x57eca5=_0x4d561d[_0x57eca5];}const _0x5a47c2={'up':'down','down':'up','left':'right','right':_0x2f8eaf(0x1a9)};if(this['direction']!==_0x5a47c2[_0x57eca5]){this[_0x2f8eaf(0x255)]=_0x57eca5;const _0x21fbf2=document[_0x2f8eaf(0x203)](_0x2f8eaf(0x1ba));if(_0x21fbf2){const _0x5b5495=_0x21fbf2['style'][_0x2f8eaf(0x276)];let _0x487ba3=0x0;const _0x21ffce=setInterval(()=>{const _0x41f258=_0x2f8eaf,_0x161d0b=(Math[_0x41f258(0x1fe)]()-0.5)*0x4,_0x21ba6e=(Math['random']()-0.5)*0x4;_0x21fbf2[_0x41f258(0x294)][_0x41f258(0x276)]=_0x41f258(0x188)+_0x161d0b+_0x41f258(0x293)+_0x21ba6e+_0x41f258(0x22f),_0x487ba3++,_0x487ba3>=0x8&&(clearInterval(_0x21ffce),_0x21fbf2[_0x41f258(0x294)][_0x41f258(0x276)]=_0x5b5495);},0x14);}}}}}['toggleAIMode'](){const _0x48e5d1=a0_0x4865bd;this[_0x48e5d1(0x2b6)]=!this['isAIMode'],this[_0x48e5d1(0x1bd)][_0x48e5d1(0x2b2)]=_0x48e5d1(0x28c)+(this[_0x48e5d1(0x2b6)]?'ON':_0x48e5d1(0x1e3)),this[_0x48e5d1(0x1bd)][_0x48e5d1(0x1f6)]['toggle']('active'),this[_0x48e5d1(0x264)]=0x0;}['getAIMove'](){const _0x6a6688=a0_0x4865bd,_0x4d9281=this['snake'][0x0];if(!this[_0x6a6688(0x246)])return this[_0x6a6688(0x2bb)];if(_0x4d9281['x']<this[_0x6a6688(0x246)]['x'])return _0x6a6688(0x27a);else{if(_0x4d9281['x']>this['food']['x'])return _0x6a6688(0x1a9);else{if(_0x4d9281['y']<this['food']['y'])return'down';else{if(_0x4d9281['y']>this[_0x6a6688(0x246)]['y'])return'up';}}}return this[_0x6a6688(0x2bb)];}[a0_0x4865bd(0x1a3)](){const _0x34b31c=a0_0x4865bd,_0x4084e=[_0x34b31c(0x1f8),_0x34b31c(0x19a),'#2196F3',_0x34b31c(0x2c7),_0x34b31c(0x1d3),_0x34b31c(0x2d5)],_0x363748=Math[_0x34b31c(0x26e)](Math[_0x34b31c(0x1fe)]()*_0x4084e[_0x34b31c(0x21b)]);this[_0x34b31c(0x1dd)]=_0x4084e[_0x363748];while(!![]){this[_0x34b31c(0x246)]={'x':Math[_0x34b31c(0x26e)](Math[_0x34b31c(0x1fe)]()*this[_0x34b31c(0x260)]),'y':Math[_0x34b31c(0x26e)](Math['random']()*this['gridSize'])};let _0x4c782b=this[_0x34b31c(0x17f)]['some'](_0x50b5f3=>_0x50b5f3['x']===this[_0x34b31c(0x246)]['x']&&_0x50b5f3['y']===this['food']['y']);if(!_0x4c782b)for(const _0x52754f of this[_0x34b31c(0x19c)]){if(_0x52754f[_0x34b31c(0x1d2)]['some'](_0x53edaa=>_0x53edaa['x']===this[_0x34b31c(0x246)]['x']&&_0x53edaa['y']===this[_0x34b31c(0x246)]['y'])){_0x4c782b=!![];break;}}if(!_0x4c782b)break;}}[a0_0x4865bd(0x279)](){const _0x40b99b=a0_0x4865bd,_0x286e56=this[_0x40b99b(0x220)]>0x2&&Math[_0x40b99b(0x1fe)]()<0.3+this[_0x40b99b(0x220)]*0.05,_0x5e51fc=Math[_0x40b99b(0x290)](0x5,0x2+Math[_0x40b99b(0x26e)](this['level']/0x3)),_0x2e330f=0x1+this['level']*0.05;let _0x4bcbee,_0x3c398a,_0x274275=![];while(!_0x274275){_0x4bcbee=Math['floor'](Math[_0x40b99b(0x1fe)]()*this['gridSize']),_0x3c398a=Math[_0x40b99b(0x26e)](Math[_0x40b99b(0x1fe)]()*this[_0x40b99b(0x260)]),_0x274275=!![];if(this['snake'][_0x40b99b(0x28f)](_0x895b04=>_0x895b04['x']===_0x4bcbee&&_0x895b04['y']===_0x3c398a)){_0x274275=![];continue;}for(const _0x446d33 of this[_0x40b99b(0x19c)]){if(_0x446d33[_0x40b99b(0x1d2)][_0x40b99b(0x28f)](_0x523102=>_0x523102['x']===_0x4bcbee&&_0x523102['y']===_0x3c398a)){_0x274275=![];break;}}}const _0x28395d=[],_0x2d3b49=['up',_0x40b99b(0x2d0),'left',_0x40b99b(0x27a)][Math[_0x40b99b(0x26e)](Math[_0x40b99b(0x1fe)]()*0x4)];for(let _0x2a26ce=0x0;_0x2a26ce<_0x5e51fc;_0x2a26ce++){switch(_0x2d3b49){case'up':_0x28395d[_0x40b99b(0x1dc)]({'x':_0x4bcbee,'y':_0x3c398a+_0x2a26ce});break;case _0x40b99b(0x2d0):_0x28395d[_0x40b99b(0x1dc)]({'x':_0x4bcbee,'y':_0x3c398a-_0x2a26ce});break;case'left':_0x28395d[_0x40b99b(0x1dc)]({'x':_0x4bcbee+_0x2a26ce,'y':_0x3c398a});break;case'right':_0x28395d['push']({'x':_0x4bcbee-_0x2a26ce,'y':_0x3c398a});break;}}this['aiSnakes']['push']({'type':_0x286e56?_0x40b99b(0x29d):'peaceful','segments':_0x28395d,'direction':_0x2d3b49,'nextDirection':_0x2d3b49,'speedMultiplier':_0x2e330f,'lastMoveTime':0x0,'moveInterval':_0x286e56?0x96/_0x2e330f:0xc8/_0x2e330f});}[a0_0x4865bd(0x21f)](){const _0x581523=a0_0x4865bd,_0x22c8a5=Date['now']();for(let _0x1b0f44=this['aiSnakes'][_0x581523(0x21b)]-0x1;_0x1b0f44>=0x0;_0x1b0f44--){const _0x2b286d=this[_0x581523(0x19c)][_0x1b0f44];if(_0x22c8a5-_0x2b286d['lastMoveTime']<_0x2b286d[_0x581523(0x225)])continue;this[_0x581523(0x22a)](_0x2b286d),this[_0x581523(0x200)](_0x2b286d),_0x2b286d[_0x581523(0x273)]=_0x22c8a5;if(this[_0x581523(0x1fc)](_0x2b286d)){this[_0x581523(0x19c)][_0x581523(0x2ca)](_0x1b0f44,0x1);continue;}_0x2b286d[_0x581523(0x1a7)]===_0x581523(0x28a)&&this[_0x581523(0x1b5)](_0x2b286d)&&(_0x2b286d['segments'][_0x581523(0x1dc)]({..._0x2b286d[_0x581523(0x1d2)][_0x2b286d[_0x581523(0x1d2)][_0x581523(0x21b)]-0x1]}),this[_0x581523(0x1a3)](),this['showEffectMessage']((_0x2b286d['type']==='aggressive'?'攻击蛇':_0x581523(0x1f2))+_0x581523(0x232),_0x2b286d[_0x581523(0x1a7)]==='aggressive'?_0x581523(0x19d):'#4CAF50'));}}[a0_0x4865bd(0x22a)](_0x2c8c17){const _0x356837=a0_0x4865bd;_0x2c8c17['type']==='peaceful'?this['updatePeacefulAIDirection'](_0x2c8c17):this[_0x356837(0x29a)](_0x2c8c17);}['updatePeacefulAIDirection'](_0x5b5b5c){const _0x3285c8=a0_0x4865bd;if(!this['food'])return;const _0x5c9b66=_0x5b5b5c[_0x3285c8(0x1d2)][0x0],_0x1101b0=this[_0x3285c8(0x246)]['x']-_0x5c9b66['x'],_0x53036a=this[_0x3285c8(0x246)]['y']-_0x5c9b66['y'];Math[_0x3285c8(0x27b)](_0x1101b0)>Math['abs'](_0x53036a)?_0x5b5b5c[_0x3285c8(0x255)]=_0x1101b0>0x0?_0x3285c8(0x27a):_0x3285c8(0x1a9):_0x5b5b5c[_0x3285c8(0x255)]=_0x53036a>0x0?_0x3285c8(0x2d0):'up';const _0x5dd0ec={'up':_0x3285c8(0x2d0),'down':'up','left':_0x3285c8(0x27a),'right':_0x3285c8(0x1a9)};_0x5b5b5c['nextDirection']===_0x5dd0ec[_0x5b5b5c[_0x3285c8(0x2bb)]]&&(_0x5b5b5c[_0x3285c8(0x255)]=_0x5b5b5c['direction']);}[a0_0x4865bd(0x29a)](_0x47003e){const _0x34c3b7=a0_0x4865bd,_0x2c71c6=_0x47003e[_0x34c3b7(0x1d2)][0x0],_0x16dd0b=this[_0x34c3b7(0x17f)][0x0],_0x2ab35d=_0x16dd0b['x']-_0x2c71c6['x'],_0x55fc44=_0x16dd0b['y']-_0x2c71c6['y'];Math[_0x34c3b7(0x27b)](_0x2ab35d)>Math[_0x34c3b7(0x27b)](_0x55fc44)?_0x47003e[_0x34c3b7(0x255)]=_0x2ab35d>0x0?'right':_0x34c3b7(0x1a9):_0x47003e[_0x34c3b7(0x255)]=_0x55fc44>0x0?_0x34c3b7(0x2d0):'up';const _0x24c418={'up':_0x34c3b7(0x2d0),'down':'up','left':_0x34c3b7(0x27a),'right':_0x34c3b7(0x1a9)};_0x47003e[_0x34c3b7(0x255)]===_0x24c418[_0x47003e[_0x34c3b7(0x2bb)]]&&(_0x47003e[_0x34c3b7(0x255)]=_0x47003e[_0x34c3b7(0x2bb)]);}[a0_0x4865bd(0x200)](_0x1c773c){const _0x3eafc6=a0_0x4865bd;_0x1c773c['direction']=_0x1c773c['nextDirection'];const _0x3fa723={..._0x1c773c['segments'][0x0]};switch(_0x1c773c[_0x3eafc6(0x2bb)]){case'up':_0x3fa723['y']--;break;case'down':_0x3fa723['y']++;break;case _0x3eafc6(0x1a9):_0x3fa723['x']--;break;case _0x3eafc6(0x27a):_0x3fa723['x']++;break;}_0x1c773c['segments'][_0x3eafc6(0x179)](_0x3fa723),_0x1c773c[_0x3eafc6(0x1d2)]['pop']();}[a0_0x4865bd(0x1fc)](_0x13109a){const _0x2ff369=a0_0x4865bd,_0x3fb6c6=_0x13109a[_0x2ff369(0x1d2)][0x0];if(_0x3fb6c6['x']<0x0||_0x3fb6c6['x']>=this[_0x2ff369(0x260)]||_0x3fb6c6['y']<0x0||_0x3fb6c6['y']>=this['gridSize'])return!![];for(let _0x5a66a5=0x1;_0x5a66a5<_0x13109a[_0x2ff369(0x1d2)][_0x2ff369(0x21b)];_0x5a66a5++){if(_0x3fb6c6['x']===_0x13109a[_0x2ff369(0x1d2)][_0x5a66a5]['x']&&_0x3fb6c6['y']===_0x13109a[_0x2ff369(0x1d2)][_0x5a66a5]['y'])return!![];}for(const _0x25d11a of this[_0x2ff369(0x19c)]){if(_0x25d11a===_0x13109a)continue;for(const _0x28425b of _0x25d11a[_0x2ff369(0x1d2)]){if(_0x3fb6c6['x']===_0x28425b['x']&&_0x3fb6c6['y']===_0x28425b['y'])return!![];}}return![];}['checkAIFoodCollision'](_0x6e6d3b){const _0x1444b8=a0_0x4865bd,_0x1b9a0d=_0x6e6d3b['segments'][0x0];return this[_0x1444b8(0x246)]&&_0x1b9a0d['x']===this[_0x1444b8(0x246)]['x']&&_0x1b9a0d['y']===this[_0x1444b8(0x246)]['y'];}['update'](){const _0x520e57=a0_0x4865bd;if(this[_0x520e57(0x2dc)])return;this[_0x520e57(0x1b6)]();if(this[_0x520e57(0x2b6)])try{this[_0x520e57(0x255)]=this[_0x520e57(0x2d7)]();}catch(_0x56e883){console[_0x520e57(0x29e)]('AI\x20move\x20calculation\x20error:',_0x56e883),this[_0x520e57(0x2b6)]=![],this[_0x520e57(0x1bd)][_0x520e57(0x2b2)]=_0x520e57(0x26d),this['aiButton'][_0x520e57(0x1f6)][_0x520e57(0x1c2)](_0x520e57(0x231));}this[_0x520e57(0x2bb)]=this[_0x520e57(0x255)];let _0x1e8872;if(this[_0x520e57(0x261)]&&this[_0x520e57(0x221)]>0x0){_0x1e8872={...this[_0x520e57(0x17f)][0x0]};for(let _0x5023a4=0x0;_0x5023a4<0x1;_0x5023a4++){switch(this[_0x520e57(0x2bb)]){case'up':_0x1e8872['y']--;break;case _0x520e57(0x2d0):_0x1e8872['y']++;break;case'left':_0x1e8872['x']--;break;case'right':_0x1e8872['x']++;break;}this[_0x520e57(0x17f)][_0x520e57(0x179)]({..._0x1e8872}),this['dashDistance']--;if(_0x1e8872['x']<0x0||_0x1e8872['x']>=this[_0x520e57(0x260)]||_0x1e8872['y']<0x0||_0x1e8872['y']>=this[_0x520e57(0x260)]||this[_0x520e57(0x17f)]['some']((_0xc280d4,_0x1455e1)=>_0x1455e1>0x0&&_0xc280d4['x']===_0x1e8872['x']&&_0xc280d4['y']===_0x1e8872['y'])){if(this[_0x520e57(0x2ed)][_0x520e57(0x2db)]){delete this[_0x520e57(0x2ed)][_0x520e57(0x2db)],this[_0x520e57(0x1b3)](_0x520e57(0x18f),_0x520e57(0x213)),this[_0x520e57(0x17f)][_0x520e57(0x2df)](),this[_0x520e57(0x261)]=![],this[_0x520e57(0x221)]=0x0;return;}else{this[_0x520e57(0x286)]();return;}}}this[_0x520e57(0x221)]===0x0&&(this['isDashing']=![]);return;}_0x1e8872={...this['snake'][0x0]};switch(this[_0x520e57(0x2bb)]){case'up':_0x1e8872['y']--;break;case'down':_0x1e8872['y']++;break;case _0x520e57(0x1a9):_0x1e8872['x']--;break;case _0x520e57(0x27a):_0x1e8872['x']++;break;}if(_0x1e8872['x']<0x0||_0x1e8872['x']>=this[_0x520e57(0x260)]||_0x1e8872['y']<0x0||_0x1e8872['y']>=this[_0x520e57(0x260)]){if(this['activeEffects'][_0x520e57(0x2db)]){delete this['activeEffects']['shield'],this[_0x520e57(0x1b3)](_0x520e57(0x18f),_0x520e57(0x213)),this[_0x520e57(0x17f)][_0x520e57(0x2df)]();return;}this[_0x520e57(0x286)]();return;}if(this['snake'][_0x520e57(0x28f)](_0x73c1c=>_0x73c1c['x']===_0x1e8872['x']&&_0x73c1c['y']===_0x1e8872['y'])){if(this['activeEffects'][_0x520e57(0x2db)]){delete this[_0x520e57(0x2ed)][_0x520e57(0x2db)],this[_0x520e57(0x1b3)]('护盾已消耗',_0x520e57(0x213)),this[_0x520e57(0x17f)][_0x520e57(0x2df)]();return;}this[_0x520e57(0x286)]();return;}for(let _0xf2d236=this['aiSnakes'][_0x520e57(0x21b)]-0x1;_0xf2d236>=0x0;_0xf2d236--){const _0x585fca=this[_0x520e57(0x19c)][_0xf2d236];if(_0x585fca[_0x520e57(0x1d2)][_0x520e57(0x28f)](_0x2154ae=>_0x2154ae['x']===_0x1e8872['x']&&_0x2154ae['y']===_0x1e8872['y'])){const _0x2ebf4f=_0x585fca[_0x520e57(0x1a7)]===_0x520e57(0x29d)?0x32:0x1e;this[_0x520e57(0x2d3)](_0x2ebf4f),this[_0x520e57(0x1b3)]('击败'+(_0x585fca[_0x520e57(0x1a7)]===_0x520e57(0x29d)?_0x520e57(0x1a2):'和平蛇')+'\x20+'+_0x2ebf4f+_0x520e57(0x18e),_0x585fca[_0x520e57(0x1a7)]===_0x520e57(0x29d)?_0x520e57(0x19d):_0x520e57(0x19a)),this[_0x520e57(0x19c)][_0x520e57(0x2ca)](_0xf2d236,0x1),this['createParticles'](_0x1e8872['x']*this['cellSize']+this['cellSize']/0x2,_0x1e8872['y']*this[_0x520e57(0x1a6)]+this[_0x520e57(0x1a6)]/0x2);this[_0x520e57(0x178)]&&this[_0x520e57(0x2e1)]();return;}}this['snake']['unshift'](_0x1e8872);if(_0x1e8872['x']===this[_0x520e57(0x246)]['x']&&_0x1e8872['y']===this[_0x520e57(0x246)]['y']){const _0xaf3dcd=this[_0x520e57(0x2ed)]['doubleScore']?this[_0x520e57(0x2ed)][_0x520e57(0x2d1)][_0x520e57(0x262)]:0x1,_0x3547c0=0xa*_0xaf3dcd;this['score']+=_0x3547c0,this['scoreElement']['textContent']=this[_0x520e57(0x2bd)],this['addExperience'](_0x3547c0),this[_0x520e57(0x253)]();_0xaf3dcd>0x1&&this['showEffectMessage']('+'+_0x3547c0+_0x520e57(0x1c8)+_0xaf3dcd+')','blue');this[_0x520e57(0x1a3)](),this[_0x520e57(0x2ae)]=!![],this['applyFoodEffect'](this['foodColor']);this[_0x520e57(0x245)]>0x0&&Math[_0x520e57(0x1fe)]()<this['shieldChance']&&(this[_0x520e57(0x2ed)][_0x520e57(0x2db)]={'type':_0x520e57(0x2db),'active':!![],'duration':0x2710*(this[_0x520e57(0x210)]||0x1),'maxDuration':0x2710*(this[_0x520e57(0x210)]||0x1),'startTime':Date['now']()},this['showEffectMessage'](_0x520e57(0x267),_0x520e57(0x213),this[_0x520e57(0x2ed)][_0x520e57(0x2db)][_0x520e57(0x233)]));const _0x2f12da=this['canvas']['parentElement'];let _0x403971=_0x520e57(0x244);const _0x1f9e71={'neon-pulse-red':0x190,'neon-pulse-green':0x320,'neon-pulse-blue':0x258,'neon-pulse-effect':0x258};switch(this[_0x520e57(0x1dd)]){case _0x520e57(0x1f8):_0x403971='neon-pulse-red';break;case'#4CAF50':_0x403971=_0x520e57(0x1f9);break;case _0x520e57(0x215):_0x403971=_0x520e57(0x29f);break;default:_0x403971=_0x520e57(0x244);}_0x2f12da[_0x520e57(0x1f6)][_0x520e57(0x223)](_0x403971),setTimeout(()=>{const _0x4f059d=_0x520e57;_0x2f12da[_0x4f059d(0x1f6)][_0x4f059d(0x1c2)](_0x403971);},_0x1f9e71[_0x403971]);if(this[_0x520e57(0x22b)]<0x3&&this[_0x520e57(0x194)][this[_0x520e57(0x287)]][_0x520e57(0x2ad)]>0x0){clearInterval(this[_0x520e57(0x2c6)]);const _0xa039e2=Math[_0x520e57(0x1c9)](0x32,this[_0x520e57(0x194)][this['currentDifficulty']][_0x520e57(0x281)]-this[_0x520e57(0x2bd)]*this[_0x520e57(0x194)][this[_0x520e57(0x287)]][_0x520e57(0x2ad)]);this[_0x520e57(0x2c6)]=setInterval(()=>this[_0x520e57(0x269)](),_0xa039e2);}}else this[_0x520e57(0x17f)][_0x520e57(0x2df)](),this[_0x520e57(0x2ae)]=![];if(this[_0x520e57(0x25c)][_0x520e57(0x28f)](_0x24d3c1=>_0x24d3c1['id']===_0x520e57(0x29b))&&this[_0x520e57(0x257)]>0x0){const _0x5e3b00=this[_0x520e57(0x17f)][0x0],_0x289e16=Math[_0x520e57(0x2bf)](this[_0x520e57(0x246)]['x']-_0x5e3b00['x'],this[_0x520e57(0x246)]['y']-_0x5e3b00['y']);if(_0x289e16<this[_0x520e57(0x257)]/this[_0x520e57(0x1a6)]/0x2){this['snake'][_0x520e57(0x179)](_0x5e3b00);const _0x2564ba=this[_0x520e57(0x2ed)][_0x520e57(0x2d1)]?this[_0x520e57(0x2ed)]['doubleScore'][_0x520e57(0x262)]:0x1,_0x4c73c3=0xa*_0x2564ba;this[_0x520e57(0x2bd)]+=_0x4c73c3,this[_0x520e57(0x20b)][_0x520e57(0x2b2)]=this[_0x520e57(0x2bd)],this[_0x520e57(0x2d3)](_0x4c73c3),this['updateExperienceBar']();_0x2564ba>0x1&&this[_0x520e57(0x1b3)]('+'+_0x4c73c3+_0x520e57(0x1c8)+_0x2564ba+')',_0x520e57(0x1c3));this[_0x520e57(0x1a3)](),this[_0x520e57(0x2ae)]=!![],this['applyFoodEffect'](this[_0x520e57(0x1dd)]);this['shieldChance']>0x0&&Math[_0x520e57(0x1fe)]()<this[_0x520e57(0x245)]&&(this[_0x520e57(0x2ed)][_0x520e57(0x2db)]={'type':_0x520e57(0x2db),'active':!![],'duration':0x2710*(this[_0x520e57(0x210)]||0x1),'startTime':Date['now']()},this[_0x520e57(0x1b3)]('护盾触发!','purple',this[_0x520e57(0x2ed)]['shield'][_0x520e57(0x233)]));const _0x2fb71=this[_0x520e57(0x237)]['parentElement'];let _0x2048f9=_0x520e57(0x244);const _0xa5db35={'neon-pulse-red':0x190,'neon-pulse-green':0x320,'neon-pulse-blue':0x258,'neon-pulse-effect':0x258};switch(this[_0x520e57(0x1dd)]){case _0x520e57(0x1f8):_0x2048f9=_0x520e57(0x2ab);break;case _0x520e57(0x19a):_0x2048f9='neon-pulse-green';break;case'#2196F3':_0x2048f9='neon-pulse-blue';break;default:_0x2048f9='neon-pulse-effect';}_0x2fb71['classList']['add'](_0x2048f9),setTimeout(()=>{const _0x3bb843=_0x520e57;_0x2fb71[_0x3bb843(0x1f6)]['remove'](_0x2048f9);},_0xa5db35[_0x2048f9]);if(this[_0x520e57(0x194)][this[_0x520e57(0x287)]][_0x520e57(0x2ad)]>0x0){clearInterval(this[_0x520e57(0x2c6)]);const _0x153583=Math[_0x520e57(0x1c9)](0x32,this[_0x520e57(0x194)][this[_0x520e57(0x287)]][_0x520e57(0x281)]-this[_0x520e57(0x2bd)]*this[_0x520e57(0x194)][this['currentDifficulty']][_0x520e57(0x2ad)]);this['gameLoop']=setInterval(()=>this[_0x520e57(0x269)](),_0x153583);}}}Date[_0x520e57(0x1a0)]()-this[_0x520e57(0x22d)]>this[_0x520e57(0x2c3)]&&(this[_0x520e57(0x279)](),this[_0x520e57(0x22d)]=Date['now']()),this[_0x520e57(0x21f)](),this['updateEffects'](),this[_0x520e57(0x18a)](),this[_0x520e57(0x2dd)](),this[_0x520e57(0x178)]&&this[_0x520e57(0x2e1)]();}['showStageTransition'](_0x3fd902){const _0x3781f0=a0_0x4865bd;this[_0x3781f0(0x2a6)]=!![],this[_0x3781f0(0x1e2)]=0x5,this['pauseGame']();const _0x809d9b=setInterval(()=>{const _0x1b74db=_0x3781f0;this[_0x1b74db(0x1e2)]--,this[_0x1b74db(0x1e2)]<=0x0?(clearInterval(_0x809d9b),this[_0x1b74db(0x2a6)]=![],this['resumeGame']()):this[_0x1b74db(0x2dd)]();},0x3e8);}[a0_0x4865bd(0x2e1)](){const _0x1bd561=a0_0x4865bd,_0x50370c=this['canvas']['width']*0.7,_0x160bc1=this[_0x1bd561(0x237)][_0x1bd561(0x1e5)]*0.7,_0x160341=(this[_0x1bd561(0x237)][_0x1bd561(0x1f7)]-_0x50370c)/0x2,_0x3316b7=(this[_0x1bd561(0x237)][_0x1bd561(0x1e5)]-_0x160bc1)/0x2;this[_0x1bd561(0x2b1)][_0x1bd561(0x234)]=_0x1bd561(0x1a8),this['ctx'][_0x1bd561(0x2c4)](_0x160341,_0x3316b7,_0x50370c,_0x160bc1),this[_0x1bd561(0x2b1)]['strokeStyle']=_0x1bd561(0x1e8),this[_0x1bd561(0x2b1)][_0x1bd561(0x20f)]=0x3,this[_0x1bd561(0x2b1)][_0x1bd561(0x25b)](_0x160341,_0x3316b7,_0x50370c,_0x160bc1),this[_0x1bd561(0x2b1)][_0x1bd561(0x234)]=_0x1bd561(0x20a),this[_0x1bd561(0x2b1)][_0x1bd561(0x1f5)]=_0x1bd561(0x24e),this[_0x1bd561(0x2b1)]['textAlign']=_0x1bd561(0x197),this[_0x1bd561(0x2b1)]['fillText']('升级!\x20选择一个技能\x20(Lv'+this['level']+')',this['canvas'][_0x1bd561(0x1f7)]/0x2,_0x3316b7+0x28);const _0x43d3c7=(_0x160bc1-0x64)/0x3;this[_0x1bd561(0x1ad)][_0x1bd561(0x2d9)]((_0x2308ae,_0x49d461)=>{const _0x5a3056=_0x1bd561,_0x119a72=_0x3316b7+0x50+_0x49d461*_0x43d3c7,_0x253015=_0x49d461===this[_0x5a3056(0x185)];this[_0x5a3056(0x2b1)][_0x5a3056(0x234)]=_0x253015?_0x5a3056(0x190):'rgba(255,\x20255,\x20255,\x200.1)',this[_0x5a3056(0x2b1)][_0x5a3056(0x2c4)](_0x160341+0x14,_0x119a72,_0x50370c-0x28,_0x43d3c7-0x14),this[_0x5a3056(0x2b1)][_0x5a3056(0x234)]=_0x5a3056(0x20a),this[_0x5a3056(0x2b1)][_0x5a3056(0x1f5)]='12px\x20Arial',this['ctx'][_0x5a3056(0x2a1)]=_0x5a3056(0x1a9),this[_0x5a3056(0x2b1)][_0x5a3056(0x1d1)](_0x2308ae[_0x5a3056(0x189)]+'\x20'+_0x2308ae[_0x5a3056(0x265)],_0x160341+0x28,_0x119a72+0xf),this['ctx']['font']=_0x5a3056(0x24e),this[_0x5a3056(0x2b1)]['fillText'](_0x2308ae[_0x5a3056(0x1eb)],_0x160341+0x28,_0x119a72+0x1e);}),this[_0x1bd561(0x2b1)][_0x1bd561(0x1f5)]='10px\x20Arial',this[_0x1bd561(0x2b1)]['textAlign']=_0x1bd561(0x197),this['ctx'][_0x1bd561(0x1d1)](_0x1bd561(0x243),this['canvas'][_0x1bd561(0x1f7)]/0x2,_0x3316b7+_0x160bc1-0x14);}[a0_0x4865bd(0x217)](_0x35dca9){const _0x36bc72=a0_0x4865bd,_0x1c0e86=document[_0x36bc72(0x177)]('.touch-button');if(_0x1c0e86[_0x36bc72(0x21b)]>0x0){let _0xe41d27;switch(_0x35dca9){case _0x36bc72(0x1f8):_0xe41d27=_0x36bc72(0x1f8);break;case _0x36bc72(0x19a):_0xe41d27=_0x36bc72(0x19a);break;case _0x36bc72(0x215):_0xe41d27=_0x36bc72(0x215);break;case _0x36bc72(0x2c7):_0xe41d27='#FFC107';break;case'#9C27B0':_0xe41d27=_0x36bc72(0x1d3);break;default:_0xe41d27=_0x36bc72(0x193);}_0x1c0e86[_0x36bc72(0x2d9)](_0x891dd7=>{const _0x430a3c=_0x36bc72;_0x891dd7[_0x430a3c(0x294)][_0x430a3c(0x2c0)](_0x430a3c(0x1e4),_0xe41d27);});}const _0x4389ed={'speed':[],'control':[],'score':[],'shield':[]};Object[_0x36bc72(0x2d4)](this[_0x36bc72(0x2ed)])['forEach'](_0x56c6e7=>{const _0x1cdd95=_0x36bc72,_0x18d5c6=this[_0x1cdd95(0x2ed)][_0x56c6e7];if(_0x4389ed[_0x18d5c6[_0x1cdd95(0x1a7)]])_0x4389ed[_0x18d5c6[_0x1cdd95(0x1a7)]]['push'](_0x56c6e7);}),Object['values'](_0x4389ed)[_0x36bc72(0x206)]()['forEach'](_0x3592a7=>delete this[_0x36bc72(0x2ed)][_0x3592a7]);switch(_0x35dca9){case _0x36bc72(0x1f8):this[_0x36bc72(0x2ed)][_0x36bc72(0x20e)]={'maxDuration':0x1f40,'type':_0x36bc72(0x266),'active':!![],'duration':0x1388*(this['effectDurationMultiplier']||0x1),'startTime':Date[_0x36bc72(0x1a0)]()},this['showEffectMessage'](_0x36bc72(0x22e),_0x36bc72(0x285),this[_0x36bc72(0x2ed)][_0x36bc72(0x20e)][_0x36bc72(0x233)]);break;case _0x36bc72(0x19a):this[_0x36bc72(0x2ed)][_0x36bc72(0x2ba)]={'maxDuration':0x1b58,'type':_0x36bc72(0x281),'active':!![],'duration':0xbb8*(this[_0x36bc72(0x210)]||0x1),'startTime':Date['now'](),'multiplier':1.5},this[_0x36bc72(0x1b3)](_0x36bc72(0x1bb),_0x36bc72(0x1fa),this[_0x36bc72(0x2ed)][_0x36bc72(0x2ba)][_0x36bc72(0x233)]);break;case _0x36bc72(0x215):this[_0x36bc72(0x2ed)][_0x36bc72(0x2d1)]={'maxDuration':0x3a98,'type':_0x36bc72(0x2bd),'active':!![],'duration':0x1f40*(this['effectDurationMultiplier']||0x1),'startTime':Date[_0x36bc72(0x1a0)](),'multiplier':0x2},this['showEffectMessage'](_0x36bc72(0x256),_0x36bc72(0x1c3),this['activeEffects'][_0x36bc72(0x2d1)][_0x36bc72(0x233)]);break;case _0x36bc72(0x2c7):this['activeEffects'][_0x36bc72(0x1f3)]={'maxDuration':0x2710,'type':_0x36bc72(0x281),'active':!![],'duration':0xfa0*(this[_0x36bc72(0x210)]||0x1),'startTime':Date[_0x36bc72(0x1a0)](),'multiplier':0.7},this[_0x36bc72(0x1b3)](_0x36bc72(0x24b),_0x36bc72(0x2ec),this['activeEffects'][_0x36bc72(0x1f3)][_0x36bc72(0x233)]);break;case _0x36bc72(0x1d3):this[_0x36bc72(0x2ed)][_0x36bc72(0x2db)]={'type':'shield','active':!![],'duration':0x2710*(this[_0x36bc72(0x210)]||0x1),'startTime':Date['now']()},this['showEffectMessage'](_0x36bc72(0x1b0),'purple',this[_0x36bc72(0x2ed)]['shield']['duration']);break;}}['updateEffects'](){const _0x95a501=a0_0x4865bd,_0x3ccbb6=Date[_0x95a501(0x1a0)]();Object[_0x95a501(0x2d4)](this[_0x95a501(0x2ed)])[_0x95a501(0x2d9)](_0x572a16=>{const _0x27d46f=_0x95a501,_0x293306=this[_0x27d46f(0x2ed)][_0x572a16];_0x3ccbb6-_0x293306[_0x27d46f(0x1df)]>_0x293306['duration']&&(delete this[_0x27d46f(0x2ed)][_0x572a16],this['showEffectMessage'](_0x27d46f(0x1ea),'gray'));});}[a0_0x4865bd(0x1b3)](_0x48c718,_0x4f14f0,_0x407b07=0x0){const _0x72f1ed=a0_0x4865bd,_0x26942f=document[_0x72f1ed(0x2e0)](_0x72f1ed(0x2c9));_0x26942f[_0x72f1ed(0x294)][_0x72f1ed(0x26b)]='absolute',_0x26942f[_0x72f1ed(0x294)]['top']=_0x72f1ed(0x2a5),_0x26942f[_0x72f1ed(0x294)][_0x72f1ed(0x1a9)]=_0x72f1ed(0x1ec),_0x26942f['style']['transform']=_0x72f1ed(0x183),_0x26942f[_0x72f1ed(0x294)][_0x72f1ed(0x2d8)]=_0x4f14f0,_0x26942f[_0x72f1ed(0x294)][_0x72f1ed(0x1d7)]=_0x72f1ed(0x201),_0x26942f[_0x72f1ed(0x294)][_0x72f1ed(0x259)]=_0x72f1ed(0x219),_0x26942f[_0x72f1ed(0x294)][_0x72f1ed(0x202)]=_0x72f1ed(0x187),_0x26942f[_0x72f1ed(0x294)][_0x72f1ed(0x2ea)]=_0x72f1ed(0x1ff)+_0x4f14f0,_0x26942f[_0x72f1ed(0x294)][_0x72f1ed(0x1c1)]=_0x72f1ed(0x1f1),_0x26942f['style'][_0x72f1ed(0x23f)]='rgba(0,\x200,\x200,\x200.7)',_0x26942f[_0x72f1ed(0x294)][_0x72f1ed(0x239)]=_0x72f1ed(0x1b1)+_0x4f14f0+',\x200\x200\x2020px\x20'+_0x4f14f0+'40',_0x26942f[_0x72f1ed(0x294)][_0x72f1ed(0x24a)]='0',_0x26942f[_0x72f1ed(0x294)][_0x72f1ed(0x1d8)]=_0x72f1ed(0x25a),_0x26942f['id']='effect-message',_0x26942f[_0x72f1ed(0x294)][_0x72f1ed(0x199)]='100';if(_0x407b07>0x0){const _0x2f489c=document[_0x72f1ed(0x2e0)](_0x72f1ed(0x26f));_0x2f489c[_0x72f1ed(0x294)]['marginLeft']=_0x72f1ed(0x258),_0x2f489c[_0x72f1ed(0x294)][_0x72f1ed(0x259)]=_0x72f1ed(0x263),_0x2f489c['style'][_0x72f1ed(0x24a)]=_0x72f1ed(0x1fd),_0x2f489c[_0x72f1ed(0x2b2)]='('+Math[_0x72f1ed(0x27d)](_0x407b07/0x3e8)+'s)',_0x26942f[_0x72f1ed(0x1ae)](document[_0x72f1ed(0x195)](_0x48c718)),_0x26942f[_0x72f1ed(0x1ae)](_0x2f489c);}else _0x26942f[_0x72f1ed(0x2b2)]=_0x48c718;const _0x3ce16c=document['getElementById'](_0x72f1ed(0x1c6));if(_0x3ce16c)_0x3ce16c['remove']();const _0x11fda0=this[_0x72f1ed(0x237)]['parentElement']||document[_0x72f1ed(0x216)];_0x11fda0[_0x72f1ed(0x1ae)](_0x26942f),setTimeout(()=>{const _0x18368b=_0x72f1ed;_0x26942f['style'][_0x18368b(0x24a)]='1',_0x26942f[_0x18368b(0x294)][_0x18368b(0x276)]=_0x18368b(0x271);},0xa),window[_0x72f1ed(0x1f0)](_0x72f1ed(0x1bc),()=>{new SnakeGame();});const _0x4e01c0=_0x407b07>0x0?Math['min'](_0x407b07,0x1388):0x7d0;setTimeout(()=>{const _0x34657a=_0x72f1ed;_0x26942f[_0x34657a(0x294)][_0x34657a(0x24a)]='0',_0x26942f[_0x34657a(0x294)][_0x34657a(0x276)]='translateX(-50%)\x20translateY(-20px)',setTimeout(()=>_0x26942f['remove'](),0x12c);},_0x4e01c0);}[a0_0x4865bd(0x1ac)](_0xad0e95,_0x554620){}['updateParticles'](){}['updateExperienceBar'](){const _0x561c97=a0_0x4865bd,_0x167e75=document['getElementById'](_0x561c97(0x250));if(!_0x167e75)return;_0x167e75['innerHTML']='';const _0x5b838e=document[_0x561c97(0x203)](_0x561c97(0x248));_0x5b838e&&(_0x5b838e[_0x561c97(0x2b2)]=this[_0x561c97(0x220)]);const _0x413bbf=0xa,_0x5f2c1c=Math[_0x561c97(0x290)](Math[_0x561c97(0x26e)](this[_0x561c97(0x1d9)]/this[_0x561c97(0x1ef)]*_0x413bbf),_0x413bbf);for(let _0x535d83=0x0;_0x535d83<_0x413bbf;_0x535d83++){const _0x4a1fa7=document['createElement']('div');_0x4a1fa7[_0x561c97(0x1b4)]=_0x561c97(0x1db)+(_0x535d83<_0x5f2c1c?_0x561c97(0x1c5):''),_0x167e75[_0x561c97(0x1ae)](_0x4a1fa7);}}[a0_0x4865bd(0x1b6)](){const _0x3a109b=a0_0x4865bd;console[_0x3a109b(0x23e)]('Checking\x20stage\x20upgrade\x20-\x20Current\x20stage:',this['currentStage'],'Score:',this[_0x3a109b(0x2bd)],'Threshold:',this['stageThresholds'][this['currentStage']-0x1]);if(this[_0x3a109b(0x22b)]<0x3){const _0xc4d627=this[_0x3a109b(0x22b)]+0x1,_0x253cec=this['stageThresholds'][this[_0x3a109b(0x22b)]-0x1];this[_0x3a109b(0x2bd)]>=_0x253cec&&(this[_0x3a109b(0x22b)]=_0xc4d627,console[_0x3a109b(0x23e)](_0x3a109b(0x1d4),_0xc4d627),this['showStageTransition'](_0xc4d627));}}[a0_0x4865bd(0x18a)](){const _0x573671=a0_0x4865bd,_0xedcea2=document[_0x573671(0x203)](_0x573671(0x1ce));if(!_0xedcea2)return;_0xedcea2[_0x573671(0x1aa)]='',_0xedcea2['style'][_0x573671(0x2b9)]=_0x573671(0x2bc),_0xedcea2[_0x573671(0x294)][_0x573671(0x28d)]=_0x573671(0x2cc),_0xedcea2['style'][_0x573671(0x218)]=_0x573671(0x180),_0xedcea2[_0x573671(0x294)]['alignItems']=_0x573671(0x180),_0xedcea2[_0x573671(0x294)][_0x573671(0x1c7)]=_0x573671(0x258),_0xedcea2[_0x573671(0x294)][_0x573671(0x202)]=_0x573671(0x258),_0xedcea2[_0x573671(0x294)]['bottom']='0',_0xedcea2['style'][_0x573671(0x27a)]='0',_0xedcea2[_0x573671(0x294)][_0x573671(0x26b)]=_0x573671(0x268),this[_0x573671(0x25c)][_0x573671(0x2d9)](_0xb4458=>{const _0x2e8341=_0x573671,_0x4122ff=document[_0x2e8341(0x2e0)](_0x2e8341(0x2c9));_0x4122ff['className']=_0x2e8341(0x28e),_0x4122ff[_0x2e8341(0x1aa)]=_0x2e8341(0x2e9)+_0xb4458['icon']+_0x2e8341(0x1f4),_0x4122ff[_0x2e8341(0x294)][_0x2e8341(0x1e7)]=_0x2e8341(0x2ac),_0xedcea2[_0x2e8341(0x1ae)](_0x4122ff);}),Object[_0x573671(0x2d4)](this[_0x573671(0x2ed)])[_0x573671(0x2d9)](_0x445e7f=>{const _0x313072=_0x573671,_0x5d5357=this['activeEffects'][_0x445e7f];if(!_0x5d5357['duration']||!_0x5d5357[_0x313072(0x28b)])return;const _0x25509f=document[_0x313072(0x2e0)](_0x313072(0x2c9));_0x25509f[_0x313072(0x1b4)]='effect-duration-item';const _0x5874f1=document[_0x313072(0x2e0)](_0x313072(0x2c9));_0x5874f1[_0x313072(0x1b4)]='effect-name',_0x5874f1[_0x313072(0x2b2)]=this[_0x313072(0x249)](_0x445e7f);const _0x1c162b=document[_0x313072(0x2e0)]('div');_0x1c162b[_0x313072(0x1b4)]='effect-bar-container';const _0x35c8f0=document['createElement'](_0x313072(0x2c9));_0x35c8f0[_0x313072(0x1b4)]=_0x313072(0x247);const _0x156d58=_0x5d5357[_0x313072(0x233)]-(Date[_0x313072(0x1a0)]()-_0x5d5357[_0x313072(0x1df)]);_0x35c8f0[_0x313072(0x294)][_0x313072(0x1f7)]=_0x156d58/_0x5d5357['maxDuration']*0x64+'%';switch(_0x445e7f){case _0x313072(0x2ba):_0x35c8f0[_0x313072(0x294)][_0x313072(0x23f)]=_0x313072(0x22c),_0x35c8f0[_0x313072(0x294)][_0x313072(0x239)]=_0x313072(0x1c0);break;case _0x313072(0x1f3):_0x35c8f0[_0x313072(0x294)][_0x313072(0x23f)]=_0x313072(0x24f),_0x35c8f0[_0x313072(0x294)][_0x313072(0x239)]=_0x313072(0x222);break;case'shield':_0x35c8f0['style'][_0x313072(0x23f)]='#ffff00',_0x35c8f0['style'][_0x313072(0x239)]=_0x313072(0x298);break;case _0x313072(0x29b):_0x35c8f0['style'][_0x313072(0x23f)]='#ff9900',_0x35c8f0[_0x313072(0x294)][_0x313072(0x239)]=_0x313072(0x270);break;default:_0x35c8f0[_0x313072(0x294)][_0x313072(0x23f)]=_0x313072(0x1e8),_0x35c8f0[_0x313072(0x294)]['boxShadow']=_0x313072(0x296);}_0x1c162b[_0x313072(0x1ae)](_0x35c8f0),_0x25509f['appendChild'](_0x5874f1),_0x25509f[_0x313072(0x1ae)](_0x1c162b),_0xedcea2[_0x313072(0x1ae)](_0x25509f);});}[a0_0x4865bd(0x249)](_0x291ae1){const _0x5350b3=a0_0x4865bd,_0x42c702={'speedBoost':_0x5350b3(0x1b2),'slowDown':_0x5350b3(0x2a3),'shield':_0x5350b3(0x18b),'magnet':_0x5350b3(0x299)};return _0x42c702[_0x291ae1]||_0x291ae1;}[a0_0x4865bd(0x2dd)](){const _0x2d86ff=a0_0x4865bd;this[_0x2d86ff(0x2b1)]['clearRect'](0x0,0x0,this[_0x2d86ff(0x237)][_0x2d86ff(0x1f7)],this['canvas'][_0x2d86ff(0x1e5)]),this[_0x2d86ff(0x2b1)]['strokeStyle']='#333',this['ctx']['lineWidth']=0.5;for(let _0x35b157=0x0;_0x35b157<=this[_0x2d86ff(0x260)];_0x35b157++){this[_0x2d86ff(0x2b1)][_0x2d86ff(0x1c4)](),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x23d)](_0x35b157*this['cellSize'],0x0),this['ctx'][_0x2d86ff(0x19f)](_0x35b157*this[_0x2d86ff(0x1a6)],this['canvas'][_0x2d86ff(0x1e5)]),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x27f)](),this[_0x2d86ff(0x2b1)]['beginPath'](),this[_0x2d86ff(0x2b1)]['moveTo'](0x0,_0x35b157*this[_0x2d86ff(0x1a6)]),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x19f)](this[_0x2d86ff(0x237)][_0x2d86ff(0x1f7)],_0x35b157*this['cellSize']),this[_0x2d86ff(0x2b1)]['stroke']();}if(this[_0x2d86ff(0x2ed)][_0x2d86ff(0x2db)]){const _0x5682f6=this[_0x2d86ff(0x17f)][0x0];this[_0x2d86ff(0x2b1)]['beginPath'](),this['ctx'][_0x2d86ff(0x1cd)](_0x5682f6['x']*this['cellSize']+this['cellSize']/0x2,_0x5682f6['y']*this['cellSize']+this[_0x2d86ff(0x1a6)]/0x2,this['cellSize']*0.7,0x0,Math['PI']*0x2),this[_0x2d86ff(0x2b1)]['strokeStyle']=_0x2d86ff(0x1be),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x20f)]=0x3,this['ctx'][_0x2d86ff(0x2e2)]([0x5,0x3]),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x27f)](),this['ctx'][_0x2d86ff(0x2e2)]([]);}if(this[_0x2d86ff(0x2a6)]){this[_0x2d86ff(0x2b1)][_0x2d86ff(0x234)]=_0x2d86ff(0x228),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x2c4)](0x0,0x0,this[_0x2d86ff(0x237)][_0x2d86ff(0x1f7)],this[_0x2d86ff(0x237)]['height']),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x234)]=_0x2d86ff(0x1a5),this[_0x2d86ff(0x2b1)]['font']=_0x2d86ff(0x289),this['ctx'][_0x2d86ff(0x2a1)]=_0x2d86ff(0x197),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x1d1)](_0x2d86ff(0x1d6)+this[_0x2d86ff(0x22b)]+'!',this['canvas'][_0x2d86ff(0x1f7)]/0x2,this[_0x2d86ff(0x237)][_0x2d86ff(0x1e5)]/0x2-0x1e),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x234)]='white',this[_0x2d86ff(0x2b1)]['font']=_0x2d86ff(0x251),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x1d1)](this[_0x2d86ff(0x1e2)],this[_0x2d86ff(0x237)][_0x2d86ff(0x1f7)]/0x2,this['canvas']['height']/0x2+0x28),this[_0x2d86ff(0x2b1)]['font']=_0x2d86ff(0x2b3),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x1d1)]('游戏将在\x20'+this[_0x2d86ff(0x1e2)]+_0x2d86ff(0x205),this['canvas'][_0x2d86ff(0x1f7)]/0x2,this[_0x2d86ff(0x237)][_0x2d86ff(0x1e5)]/0x2+0x50);return;}console[_0x2d86ff(0x23e)](_0x2d86ff(0x1e6),this[_0x2d86ff(0x22b)]),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x234)]=_0x2d86ff(0x1e8),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x1f5)]='bold\x2016px\x20Impact',this[_0x2d86ff(0x2b1)][_0x2d86ff(0x2a1)]=_0x2d86ff(0x197),this['ctx']['fillText']('STATE\x20'+this[_0x2d86ff(0x22b)],this[_0x2d86ff(0x237)][_0x2d86ff(0x1f7)]/0x2,0x19);const _0x5c38a4=0x64,_0x49932b=0x8,_0x143e7a=this[_0x2d86ff(0x1d9)]/this[_0x2d86ff(0x1ef)];this[_0x2d86ff(0x2b1)][_0x2d86ff(0x234)]=_0x2d86ff(0x2a7),this[_0x2d86ff(0x2b1)]['fillRect'](0x5,this[_0x2d86ff(0x237)][_0x2d86ff(0x1e5)]-0xf,_0x5c38a4,_0x49932b),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x234)]=_0x2d86ff(0x1e8),this[_0x2d86ff(0x2b1)]['fillRect'](0x5,this[_0x2d86ff(0x237)]['height']-0xf,_0x5c38a4*_0x143e7a,_0x49932b),this[_0x2d86ff(0x19c)][_0x2d86ff(0x2d9)](_0x497833=>{const _0xdeac2d=_0x2d86ff,_0x134deb=_0x497833['type']===_0xdeac2d(0x29d)?_0xdeac2d(0x19d):'#4CAF50';_0x497833[_0xdeac2d(0x1d2)]['forEach']((_0x57eaf9,_0x1bb656)=>{const _0x27d73a=_0xdeac2d;this[_0x27d73a(0x2b1)][_0x27d73a(0x234)]=_0x1bb656===0x0?_0x134deb:this[_0x27d73a(0x29c)](_0x134deb,-0x1e),this['ctx']['shadowColor']=_0x134deb,this[_0x27d73a(0x2b1)][_0x27d73a(0x207)]=0xa,this['ctx'][_0x27d73a(0x2c4)](_0x57eaf9['x']*this['cellSize'],_0x57eaf9['y']*this['cellSize'],this[_0x27d73a(0x1a6)],this[_0x27d73a(0x1a6)]),this[_0x27d73a(0x2b1)][_0x27d73a(0x234)]=this['adjustColor'](_0x134deb,-0x32),this[_0x27d73a(0x2b1)][_0x27d73a(0x207)]=0x0,this[_0x27d73a(0x2b1)][_0x27d73a(0x2c4)](_0x57eaf9['x']*this['cellSize']+this['cellSize']*0.15,_0x57eaf9['y']*this[_0x27d73a(0x1a6)]+this[_0x27d73a(0x1a6)]*0.15,this[_0x27d73a(0x1a6)]*0.7,this[_0x27d73a(0x1a6)]*0.7);});}),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x207)]=0x0,this[_0x2d86ff(0x17f)][_0x2d86ff(0x2d9)]((_0x543aea,_0x5bf189)=>{const _0xd6a6c5=_0x2d86ff,_0x4d50bf=_0x5bf189===0x0?'#00ff9d':'#00cc7a';this[_0xd6a6c5(0x2b1)]['fillStyle']=_0x4d50bf,this[_0xd6a6c5(0x2b1)][_0xd6a6c5(0x25e)]=_0x4d50bf,this[_0xd6a6c5(0x2b1)][_0xd6a6c5(0x207)]=0xa,this[_0xd6a6c5(0x2b1)]['fillRect'](_0x543aea['x']*this[_0xd6a6c5(0x1a6)],_0x543aea['y']*this[_0xd6a6c5(0x1a6)],this[_0xd6a6c5(0x1a6)],this[_0xd6a6c5(0x1a6)]),this[_0xd6a6c5(0x2b1)][_0xd6a6c5(0x234)]=_0x5bf189===0x0?_0xd6a6c5(0x278):_0xd6a6c5(0x27c),this[_0xd6a6c5(0x2b1)]['shadowBlur']=0x0,this[_0xd6a6c5(0x2b1)][_0xd6a6c5(0x2c4)](_0x543aea['x']*this[_0xd6a6c5(0x1a6)]+this[_0xd6a6c5(0x1a6)]*0.15,_0x543aea['y']*this[_0xd6a6c5(0x1a6)]+this[_0xd6a6c5(0x1a6)]*0.15,this[_0xd6a6c5(0x1a6)]*0.7,this[_0xd6a6c5(0x1a6)]*0.7);}),this['updateEffectDurations']();if(this[_0x2d86ff(0x261)]){this[_0x2d86ff(0x2b1)][_0x2d86ff(0x2be)](),this[_0x2d86ff(0x2b1)]['globalAlpha']=0.6,this['ctx']['fillStyle']=_0x2d86ff(0x1fb),this['ctx'][_0x2d86ff(0x25e)]='#0099ff',this[_0x2d86ff(0x2b1)][_0x2d86ff(0x207)]=0x14;for(let _0x503bdf=0x0;_0x503bdf<Math['min'](0x3,this[_0x2d86ff(0x17f)]['length']-0x1);_0x503bdf++){const _0x477d2f=this[_0x2d86ff(0x17f)][_0x503bdf],_0x5a3cd0=this[_0x2d86ff(0x1a6)]*(0x1-_0x503bdf*0.2),_0x2d9bc5=(this[_0x2d86ff(0x1a6)]-_0x5a3cd0)/0x2;this[_0x2d86ff(0x2b1)][_0x2d86ff(0x1c4)](),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x1cd)](_0x477d2f['x']*this[_0x2d86ff(0x1a6)]+this[_0x2d86ff(0x1a6)]/0x2,_0x477d2f['y']*this['cellSize']+this[_0x2d86ff(0x1a6)]/0x2,_0x5a3cd0/0x2,0x0,Math['PI']*0x2),this['ctx'][_0x2d86ff(0x272)]();}this[_0x2d86ff(0x2b1)]['restore']();}this['ctx'][_0x2d86ff(0x207)]=0x0;if(this[_0x2d86ff(0x246)]){const _0x42964c=this[_0x2d86ff(0x1dd)]||_0x2d86ff(0x1f8);this[_0x2d86ff(0x2b1)][_0x2d86ff(0x234)]=_0x42964c,this[_0x2d86ff(0x2b1)][_0x2d86ff(0x25e)]=_0x42964c,this[_0x2d86ff(0x2b1)][_0x2d86ff(0x207)]=0xf,this[_0x2d86ff(0x2b1)][_0x2d86ff(0x2c4)](this[_0x2d86ff(0x246)]['x']*this[_0x2d86ff(0x1a6)],this[_0x2d86ff(0x246)]['y']*this['cellSize'],this['cellSize'],this[_0x2d86ff(0x1a6)]),this['ctx']['fillStyle']=this[_0x2d86ff(0x29c)](_0x42964c,0x32),this[_0x2d86ff(0x2b1)][_0x2d86ff(0x207)]=0x0,this[_0x2d86ff(0x2b1)]['fillRect'](this[_0x2d86ff(0x246)]['x']*this[_0x2d86ff(0x1a6)]+this[_0x2d86ff(0x1a6)]*0.25,this[_0x2d86ff(0x246)]['y']*this[_0x2d86ff(0x1a6)]+this[_0x2d86ff(0x1a6)]*0.25,this[_0x2d86ff(0x1a6)]*0.5,this['cellSize']*0.5);}this[_0x2d86ff(0x2b1)][_0x2d86ff(0x207)]=0x0;}[a0_0x4865bd(0x29c)](_0x3681a4,_0x8e2a0a){const _0x448169=a0_0x4865bd;let _0xa6bd29=parseInt(_0x3681a4[_0x448169(0x1cb)](0x1,0x3),0x10),_0x3c1a15=parseInt(_0x3681a4[_0x448169(0x1cb)](0x3,0x5),0x10),_0x150a00=parseInt(_0x3681a4['slice'](0x5,0x7),0x10);return _0xa6bd29=Math[_0x448169(0x290)](0xff,Math[_0x448169(0x1c9)](0x0,_0xa6bd29+_0x8e2a0a)),_0x3c1a15=Math['min'](0xff,Math['max'](0x0,_0x3c1a15+_0x8e2a0a)),_0x150a00=Math[_0x448169(0x290)](0xff,Math[_0x448169(0x1c9)](0x0,_0x150a00+_0x8e2a0a)),'#'+_0xa6bd29['toString'](0x10)[_0x448169(0x26c)](0x2,'0')+_0x3c1a15[_0x448169(0x1de)](0x10)[_0x448169(0x26c)](0x2,'0')+_0x150a00[_0x448169(0x1de)](0x10)['padStart'](0x2,'0');}[a0_0x4865bd(0x2d3)](_0x5dabd2){const _0x3d7dc3=a0_0x4865bd;this[_0x3d7dc3(0x1d9)]+=_0x5dabd2,this[_0x3d7dc3(0x1b3)]('+'+_0x5dabd2+_0x3d7dc3(0x18e),_0x3d7dc3(0x2ec)),this[_0x3d7dc3(0x253)]();while(this[_0x3d7dc3(0x1d9)]>=this['experienceToNextLevel']){this[_0x3d7dc3(0x21c)]();}}[a0_0x4865bd(0x21c)](){const _0xb5f236=a0_0x4865bd;this[_0xb5f236(0x220)]++,this[_0xb5f236(0x1d9)]-=this[_0xb5f236(0x1ef)],this[_0xb5f236(0x1ef)]=Math[_0xb5f236(0x26e)](this['experienceToNextLevel']*1.5),this[_0xb5f236(0x1b3)](_0xb5f236(0x1bf)+this[_0xb5f236(0x220)],'gold'),this[_0xb5f236(0x17d)](),this[_0xb5f236(0x1ad)][_0xb5f236(0x21b)]>0x0?(this[_0xb5f236(0x1af)]++,this[_0xb5f236(0x178)]=!![]):this[_0xb5f236(0x178)]=![],this['pauseGame']();}['generateSkillOptions'](){const _0x13bbf1=a0_0x4865bd,_0x3d0b5c=[{'id':_0x13bbf1(0x17c),'name':_0x13bbf1(0x235),'description':'移动速度永久增加10%','icon':'⚡'},{'id':_0x13bbf1(0x2c2),'name':'效果延长','description':_0x13bbf1(0x284),'icon':'⏱️'},{'id':'more_points','name':'得分加成','description':'食物得分增加20%','icon':'💰'},{'id':_0x13bbf1(0x2e5),'name':'护盾概率','description':_0x13bbf1(0x186),'icon':'🛡️'},{'id':_0x13bbf1(0x23c),'name':_0x13bbf1(0x20c),'description':_0x13bbf1(0x2c5),'icon':'🚪'},{'id':_0x13bbf1(0x29b),'name':_0x13bbf1(0x2a0),'description':_0x13bbf1(0x238),'icon':'🧲'},{'id':_0x13bbf1(0x2a9),'name':_0x13bbf1(0x204),'description':'连续两次点击同一方向键往前冲刺','icon':'💨'}],_0x18af0a=_0x3d0b5c[_0x13bbf1(0x1a1)](_0x2de446=>!this[_0x13bbf1(0x25c)]['some'](_0x509065=>_0x509065['id']===_0x2de446['id']));this[_0x13bbf1(0x1ad)]=[];while(this[_0x13bbf1(0x1ad)][_0x13bbf1(0x21b)]<0x3&&_0x18af0a['length']>0x0){const _0x41af8f=Math[_0x13bbf1(0x26e)](Math[_0x13bbf1(0x1fe)]()*_0x18af0a[_0x13bbf1(0x21b)]);this[_0x13bbf1(0x1ad)][_0x13bbf1(0x1dc)](_0x18af0a[_0x13bbf1(0x2ca)](_0x41af8f,0x1)[0x0]);}}[a0_0x4865bd(0x21d)](_0x550ab8){const _0x257b24=a0_0x4865bd,_0x19a475=this[_0x257b24(0x1ad)]['find'](_0x5ddb1a=>_0x5ddb1a['id']===_0x550ab8);_0x19a475&&(this[_0x257b24(0x25c)]['push'](_0x19a475),this[_0x257b24(0x1d5)](_0x19a475),this['skillPoints']--,this[_0x257b24(0x178)]=![],this[_0x257b24(0x208)]());}[a0_0x4865bd(0x1d5)](_0x2174ba){const _0x5a2b2e=a0_0x4865bd;if(_0x2174ba['id']===_0x5a2b2e(0x2a9)){this[_0x5a2b2e(0x1b7)]=!![];return;}switch(_0x2174ba['id']){case _0x5a2b2e(0x17c):this[_0x5a2b2e(0x194)][this[_0x5a2b2e(0x287)]][_0x5a2b2e(0x281)]*=0.9;break;case _0x5a2b2e(0x2c2):this[_0x5a2b2e(0x210)]=(this[_0x5a2b2e(0x210)]||0x1)*1.2;break;case'more_points':this[_0x5a2b2e(0x21e)]=(this[_0x5a2b2e(0x21e)]||0x1)*1.2;break;case'shield_chance':this[_0x5a2b2e(0x245)]=(this[_0x5a2b2e(0x245)]||0x0)+0.1;break;case _0x5a2b2e(0x29b):this['magnetRange']=0x64,this[_0x5a2b2e(0x2ed)][_0x5a2b2e(0x29b)]={'maxDuration':0x3a98,'type':'magnet','active':!![],'duration':0x2710*(this[_0x5a2b2e(0x210)]||0x1),'startTime':Date[_0x5a2b2e(0x1a0)]()},this[_0x5a2b2e(0x1b3)](_0x5a2b2e(0x20d),_0x5a2b2e(0x1ab),this['activeEffects'][_0x5a2b2e(0x29b)][_0x5a2b2e(0x233)]);break;}}[a0_0x4865bd(0x1ed)](){const _0x15ebc0=a0_0x4865bd;this['isPaused']=!![],clearInterval(this[_0x15ebc0(0x2c6)]);}[a0_0x4865bd(0x208)](){const _0x53bf63=a0_0x4865bd;this[_0x53bf63(0x2dc)]=![],this[_0x53bf63(0x19e)]();}[a0_0x4865bd(0x286)](){const _0x28f7f5=a0_0x4865bd;this[_0x28f7f5(0x1ed)](),this[_0x28f7f5(0x2ed)]={},this[_0x28f7f5(0x18a)](),this[_0x28f7f5(0x178)]=![],this[_0x28f7f5(0x2b5)][_0x28f7f5(0x1f6)]['remove'](_0x28f7f5(0x26a));const _0x4b01b0=document[_0x28f7f5(0x2e0)](_0x28f7f5(0x2c9));_0x4b01b0[_0x28f7f5(0x1aa)]=_0x28f7f5(0x1e1);const _0x1c1370=_0x4b01b0;let _0x115d31=0x0;const _0x23432a=setInterval(()=>{const _0x26a056=_0x28f7f5,_0x30e461=(Math['random']()-0.5)*0x8,_0x30933d=(Math[_0x26a056(0x1fe)]()-0.5)*0x8;_0x1c1370['style'][_0x26a056(0x276)]=_0x26a056(0x188)+_0x30e461+_0x26a056(0x293)+_0x30933d+_0x26a056(0x22f),_0x115d31++,_0x115d31>=0xf&&(clearInterval(_0x23432a),_0x1c1370[_0x26a056(0x294)]['transform']=_0x26a056(0x241));},0x1e);this[_0x28f7f5(0x2b5)][_0x28f7f5(0x1ae)](_0x4b01b0);const _0x2694d2=document[_0x28f7f5(0x2e0)](_0x28f7f5(0x2c9));_0x2694d2[_0x28f7f5(0x1aa)]=_0x28f7f5(0x2c1)+this['currentStage']+'</p><p>最终得分:\x20'+this['score']+_0x28f7f5(0x2e3)+this[_0x28f7f5(0x220)]+_0x28f7f5(0x2da)+(this[_0x28f7f5(0x25c)]['map'](_0x244e98=>_0x244e98['name'])[_0x28f7f5(0x184)](',\x20')||'无')+'</p>',_0x2694d2['style']['color']=_0x28f7f5(0x20a),_0x2694d2[_0x28f7f5(0x294)][_0x28f7f5(0x2a1)]=_0x28f7f5(0x197),_0x2694d2[_0x28f7f5(0x294)]['marginTop']=_0x28f7f5(0x2a5),this[_0x28f7f5(0x2b5)]['appendChild'](_0x2694d2);}[a0_0x4865bd(0x2d7)](){const _0x511ac3=a0_0x4865bd,_0x15ae75=Date['now']();if(_0x15ae75-this[_0x511ac3(0x264)]<this[_0x511ac3(0x17b)])return this[_0x511ac3(0x2bb)];this[_0x511ac3(0x264)]=_0x15ae75;const _0x3ef8a9=this['snake'][0x0],_0x2581b2=this[_0x511ac3(0x17f)]['slice'](0x1);if(this[_0x511ac3(0x2ae)]){const _0x3b226c=this[_0x511ac3(0x224)](_0x3ef8a9,_0x2581b2)[_0x511ac3(0x17a)](_0x134e49=>({'point':_0x134e49,'score':this[_0x511ac3(0x2eb)](_0x134e49,_0x2581b2)}))[_0x511ac3(0x181)]((_0x4be58d,_0x3c0396)=>_0x3c0396[_0x511ac3(0x2bd)]-_0x4be58d[_0x511ac3(0x2bd)]);if(_0x3b226c[_0x511ac3(0x21b)]>0x0)return this['getDirectionFromPoints'](_0x3ef8a9,_0x3b226c[0x0]['point']);}const _0x5f12e9=this[_0x511ac3(0x2de)](_0x3ef8a9,_0x2581b2);if(_0x5f12e9<0xa)return this[_0x511ac3(0x198)](_0x3ef8a9,_0x2581b2);const _0x3e8d98=this[_0x511ac3(0x291)](_0x3ef8a9,this[_0x511ac3(0x246)],_0x2581b2);if(_0x3e8d98&&_0x3e8d98[_0x511ac3(0x21b)]>0x0){const _0x37bc21=_0x3e8d98[0x0];if(this[_0x511ac3(0x277)](_0x37bc21,_0x2581b2)&&!this[_0x511ac3(0x2aa)](_0x37bc21))return this[_0x511ac3(0x226)](_0x3ef8a9,_0x37bc21);}return this[_0x511ac3(0x198)](_0x3ef8a9,_0x2581b2);}['findPathToFood'](_0x1e3083,_0x10ae20,_0x6306ee){const _0x42ddc6=a0_0x4865bd,_0x4a5a48=new Set(),_0x22eb5f=[[_0x1e3083]];_0x4a5a48[_0x42ddc6(0x223)](this[_0x42ddc6(0x211)](_0x1e3083));const _0x516c0d=Math[_0x42ddc6(0x290)](0x1e,this[_0x42ddc6(0x260)]*this[_0x42ddc6(0x260)]),_0xc911fe=this['getRecentMoves'](0x3),_0x31fd22=new Set(),_0x5d33a0=Math[_0x42ddc6(0x27b)](_0x1e3083['x']-_0x10ae20['x'])+Math[_0x42ddc6(0x27b)](_0x1e3083['y']-_0x10ae20['y']);if(_0x5d33a0<=0x3){const _0x33e269=this[_0x42ddc6(0x288)](_0x1e3083,_0x10ae20,_0x6306ee);if(_0x33e269)return _0x33e269;}const _0x5712d1=Math[_0x42ddc6(0x290)](_0x10ae20['x'],_0x10ae20['y'],this[_0x42ddc6(0x260)]-0x1-_0x10ae20['x'],this[_0x42ddc6(0x260)]-0x1-_0x10ae20['y']),_0x20b0b1=_0x5712d1<0x3?_0x516c0d*1.5:_0x516c0d;while(_0x22eb5f[_0x42ddc6(0x21b)]>0x0&&_0x22eb5f['length']<_0x20b0b1){const _0x5a69fd=_0x22eb5f[_0x42ddc6(0x24d)](),_0x84a21a=_0x5a69fd[_0x5a69fd[_0x42ddc6(0x21b)]-0x1];if(this[_0x42ddc6(0x18c)](_0x84a21a,_0x10ae20)){if(this[_0x42ddc6(0x242)](_0x5a69fd,_0x6306ee))return _0x5a69fd[_0x42ddc6(0x1cb)](0x1);continue;}const _0x1e3568=this[_0x42ddc6(0x224)](_0x84a21a,_0x6306ee)[_0x42ddc6(0x17a)](_0x341691=>({'point':_0x341691,'score':this['evaluateMoveSafety'](_0x341691,_0x10ae20,_0x6306ee,_0xc911fe,_0x31fd22)}))[_0x42ddc6(0x181)]((_0x4e70a4,_0x33366e)=>_0x33366e[_0x42ddc6(0x2bd)]-_0x4e70a4[_0x42ddc6(0x2bd)])['map'](_0x2fe2e4=>_0x2fe2e4[_0x42ddc6(0x2e4)]);for(const _0x23507b of _0x1e3568){const _0x4fef67=this['pointToKey'](_0x23507b);!_0x4a5a48[_0x42ddc6(0x23a)](_0x4fef67)&&(_0x4a5a48[_0x42ddc6(0x223)](_0x4fef67),_0x31fd22['add'](_0x4fef67),_0x22eb5f[_0x42ddc6(0x1dc)]([..._0x5a69fd,_0x23507b]));}}return this[_0x42ddc6(0x295)](_0x1e3083,_0x6306ee,_0x31fd22);}['checkDirectPath'](_0x334154,_0x57f84f,_0x419bf1){const _0x58b6ba=a0_0x4865bd;if(_0x334154['x']===_0x57f84f['x']||_0x334154['y']===_0x57f84f['y']){const _0x47ee62=this[_0x58b6ba(0x226)](_0x334154,_0x57f84f),_0x55950b=this['getNextPoint'](_0x334154,_0x47ee62);if(this['isValidMove'](_0x55950b,_0x419bf1)&&!this[_0x58b6ba(0x2aa)](_0x55950b))return[_0x55950b];}return null;}[a0_0x4865bd(0x295)](_0x42c54b,_0x11639f,_0x3f9dc4){const _0x21c913=a0_0x4865bd,_0x4c93b4=new Set(),_0x768339=[[_0x42c54b]];_0x4c93b4[_0x21c913(0x223)](this[_0x21c913(0x211)](_0x42c54b));let _0xadaa19=null,_0x334a6b=0x0;const _0x21746a=0xf;while(_0x768339[_0x21c913(0x21b)]>0x0&&_0x768339[_0x21c913(0x21b)]<_0x21746a){const _0x3cf551=_0x768339[_0x21c913(0x24d)](),_0x51a0ae=_0x3cf551[_0x3cf551[_0x21c913(0x21b)]-0x1],_0x262460=this[_0x21c913(0x2de)](_0x51a0ae,_0x11639f);_0x262460>_0x334a6b&&(_0x334a6b=_0x262460,_0xadaa19=_0x3cf551);if(_0x262460>0x14)return _0x3cf551[_0x21c913(0x1cb)](0x1);const _0x1e52dc=this[_0x21c913(0x224)](_0x51a0ae,_0x11639f)[_0x21c913(0x1a1)](_0x3090d5=>!_0x3f9dc4[_0x21c913(0x23a)](this['pointToKey'](_0x3090d5)))[_0x21c913(0x17a)](_0x5826a4=>({'point':_0x5826a4,'score':this['evaluateOpenSpaceMove'](_0x5826a4,_0x11639f)}))[_0x21c913(0x181)]((_0x489593,_0x106ab5)=>_0x106ab5[_0x21c913(0x2bd)]-_0x489593['score'])[_0x21c913(0x17a)](_0x290c28=>_0x290c28[_0x21c913(0x2e4)]);for(const _0xd1e047 of _0x1e52dc){const _0x5078a7=this[_0x21c913(0x211)](_0xd1e047);!_0x4c93b4[_0x21c913(0x23a)](_0x5078a7)&&(_0x4c93b4[_0x21c913(0x223)](_0x5078a7),_0x768339['push']([..._0x3cf551,_0xd1e047]));}}return _0xadaa19?_0xadaa19[_0x21c913(0x1cb)](0x1):null;}[a0_0x4865bd(0x2af)](_0x3fefc8,_0x10d400,_0x56f9de,_0x2ab599=[],_0x112e28=new Set()){const _0x8c9b69=a0_0x4865bd;let _0x85a5c1=0x0;if(_0x3fefc8['x']<0x0||_0x3fefc8['x']>=this[_0x8c9b69(0x260)]||_0x3fefc8['y']<0x0||_0x3fefc8['y']>=this[_0x8c9b69(0x260)])return-Infinity;if(this[_0x8c9b69(0x2aa)](_0x3fefc8))return-Infinity;const _0x4850fe=Math[_0x8c9b69(0x290)](_0x3fefc8['x'],_0x3fefc8['y'],this[_0x8c9b69(0x260)]-0x1-_0x3fefc8['x'],this[_0x8c9b69(0x260)]-0x1-_0x3fefc8['y']);_0x4850fe<0x2?_0x85a5c1-=(0x2-_0x4850fe)*0x1e:_0x85a5c1+=_0x4850fe*0x3;const _0x15e73a=this['countAccessibleSpace'](_0x3fefc8,_0x56f9de);_0x85a5c1+=_0x15e73a*0xa;const _0x295601=Math[_0x8c9b69(0x27b)](_0x3fefc8['x']-_0x10d400['x'])+Math['abs'](_0x3fefc8['y']-_0x10d400['y']);_0x85a5c1-=_0x295601*0x3;const _0x9da8eb=this[_0x8c9b69(0x260)]/0x2,_0x2efa6d=this['gridSize']/0x2,_0x54b5e7=Math['abs'](_0x3fefc8['x']-_0x9da8eb)+Math['abs'](_0x3fefc8['y']-_0x2efa6d);_0x85a5c1-=_0x54b5e7;const _0x9ddfbf=this['getNeighbors'](_0x3fefc8,_0x56f9de);_0x85a5c1+=_0x9ddfbf['length']*0xa;this[_0x8c9b69(0x214)](_0x3fefc8,_0x2ab599)&&(_0x85a5c1-=0x1f4);_0x15e73a<0xf&&_0x295601>0x2&&(_0x85a5c1-=0x12c);_0x112e28[_0x8c9b69(0x23a)](this['pointToKey'](_0x3fefc8))&&(_0x85a5c1-=0xc8);!_0x112e28[_0x8c9b69(0x23a)](this['pointToKey'](_0x3fefc8))&&(_0x85a5c1+=0x64);const _0xa4ff8c=Math[_0x8c9b69(0x27b)](this[_0x8c9b69(0x17f)][0x0]['x']-_0x10d400['x'])+Math[_0x8c9b69(0x27b)](this['snake'][0x0]['y']-_0x10d400['y']);_0x295601<_0xa4ff8c&&(_0x85a5c1+=0xc8);const _0x5d81e5=Math[_0x8c9b69(0x290)](_0x10d400['x'],_0x10d400['y'],this[_0x8c9b69(0x260)]-0x1-_0x10d400['x'],this[_0x8c9b69(0x260)]-0x1-_0x10d400['y']);return _0x5d81e5<0x3&&(_0x85a5c1+=(0x3-_0x5d81e5)*0x32),_0x85a5c1;}[a0_0x4865bd(0x230)](_0x5011ea,_0x3cd601){const _0xc66a45=a0_0x4865bd;let _0x394c09=0x0;if(_0x5011ea['x']<0x0||_0x5011ea['x']>=this[_0xc66a45(0x260)]||_0x5011ea['y']<0x0||_0x5011ea['y']>=this['gridSize'])return-Infinity;const _0x4a8fbf=this[_0xc66a45(0x2de)](_0x5011ea,_0x3cd601);_0x394c09+=_0x4a8fbf*0xa;const _0x506856=this[_0xc66a45(0x260)]/0x2,_0x2d5fe8=this[_0xc66a45(0x260)]/0x2,_0x49648e=Math['abs'](_0x5011ea['x']-_0x506856)+Math['abs'](_0x5011ea['y']-_0x2d5fe8);_0x394c09-=_0x49648e*0x2;const _0x2d953a=this[_0xc66a45(0x224)](_0x5011ea,_0x3cd601);_0x394c09+=_0x2d953a[_0xc66a45(0x21b)]*0x8;const _0x224b64=Math[_0xc66a45(0x290)](_0x5011ea['x'],_0x5011ea['y'],this[_0xc66a45(0x260)]-0x1-_0x5011ea['x'],this['gridSize']-0x1-_0x5011ea['y']);return _0x224b64<0x2&&(_0x394c09-=(0x2-_0x224b64)*0x14),_0x394c09;}[a0_0x4865bd(0x2aa)](_0x5e8dbd){const _0xce4621=a0_0x4865bd;if(this['snake']['slice'](0x1)[_0xce4621(0x28f)](_0x266a9d=>this[_0xce4621(0x18c)](_0x266a9d,_0x5e8dbd)))return!![];const _0x3614c0=[...this['snake']];_0x3614c0['unshift'](_0x5e8dbd),_0x3614c0[_0xce4621(0x2df)]();const _0x567298=_0x3614c0[0x0],_0x2fb070=_0x3614c0['slice'](0x1),_0x576c94=this[_0xce4621(0x224)](_0x567298,_0x2fb070);if(_0x576c94['length']===0x0)return!![];const _0x3acac2=this[_0xce4621(0x2de)](_0x567298,_0x2fb070);if(_0x3acac2<0x5)return!![];return![];}[a0_0x4865bd(0x2b8)](_0x4ddf38){const _0x25e77f=a0_0x4865bd,_0xb370bb=[];for(let _0x2bd4b8=0x1;_0x2bd4b8<=Math[_0x25e77f(0x290)](_0x4ddf38,this[_0x25e77f(0x17f)][_0x25e77f(0x21b)]-0x1);_0x2bd4b8++){_0x2bd4b8<this[_0x25e77f(0x17f)][_0x25e77f(0x21b)]&&_0xb370bb[_0x25e77f(0x1dc)]({'from':this['snake'][_0x2bd4b8],'to':this[_0x25e77f(0x17f)][_0x2bd4b8-0x1]});}return _0xb370bb;}[a0_0x4865bd(0x214)](_0x44032c,_0x5285e4){const _0x2eadc7=a0_0x4865bd;if(_0x5285e4['length']<0x2)return![];const _0x545106=_0x5285e4[0x0],_0x274f01=_0x5285e4[0x1];if(this[_0x2eadc7(0x18c)](_0x44032c,_0x274f01[_0x2eadc7(0x240)])&&this[_0x2eadc7(0x18c)](_0x545106[_0x2eadc7(0x240)],this[_0x2eadc7(0x17f)][0x0]))return!![];if(_0x5285e4[_0x2eadc7(0x21b)]>=0x3){const _0x1ac656=_0x5285e4[0x2];if(this['pointsEqual'](_0x44032c,_0x1ac656[_0x2eadc7(0x240)])&&this[_0x2eadc7(0x18c)](_0x545106['from'],this[_0x2eadc7(0x17f)][0x0]))return!![];}return![];}[a0_0x4865bd(0x198)](_0x37ddb7,_0x524f1f){const _0x29083c=a0_0x4865bd,_0x5ef57f=this[_0x29083c(0x224)](_0x37ddb7,_0x524f1f);if(_0x5ef57f['length']===0x0)return this['direction'];const _0x5a17a8=this[_0x29083c(0x2b8)](0x5),_0x31fb4b=_0x5ef57f[_0x29083c(0x1a1)](_0x21b518=>!this['willHitTail'](_0x21b518))[_0x29083c(0x17a)](_0x47b030=>({'move':_0x47b030,'score':this[_0x29083c(0x2af)](_0x47b030,this[_0x29083c(0x246)],_0x524f1f,_0x5a17a8)}));if(_0x31fb4b[_0x29083c(0x21b)]===0x0){const _0x50898a=_0x5ef57f[_0x29083c(0x1a1)](_0x4c877e=>this['isValidMove'](_0x4c877e,_0x524f1f))[_0x29083c(0x17a)](_0x39017a=>({'move':_0x39017a,'score':this[_0x29083c(0x292)](_0x39017a,_0x524f1f,_0x5a17a8)}))[_0x29083c(0x181)]((_0x58998c,_0x3f5982)=>_0x3f5982[_0x29083c(0x2bd)]-_0x58998c['score']);if(_0x50898a['length']>0x0)return this['getDirectionFromPoints'](_0x37ddb7,_0x50898a[0x0][_0x29083c(0x1ee)]);return this[_0x29083c(0x2bb)];}_0x31fb4b[_0x29083c(0x181)]((_0x3b3e32,_0x1eee40)=>_0x1eee40[_0x29083c(0x2bd)]-_0x3b3e32[_0x29083c(0x2bd)]);const _0x2d12a0=_0x31fb4b[0x0][_0x29083c(0x1ee)];return this[_0x29083c(0x226)](_0x37ddb7,_0x2d12a0);}[a0_0x4865bd(0x292)](_0x67ae5f,_0x1ce8ed,_0x5f43ef=[]){const _0x4ebbb0=a0_0x4865bd;let _0x20ca32=0x0;const _0x2f37cb=Math[_0x4ebbb0(0x290)](_0x67ae5f['x'],_0x67ae5f['y'],this[_0x4ebbb0(0x260)]-0x1-_0x67ae5f['x'],this[_0x4ebbb0(0x260)]-0x1-_0x67ae5f['y']);_0x20ca32+=_0x2f37cb*0xa;const _0x3e4cf7=this[_0x4ebbb0(0x2de)](_0x67ae5f,_0x1ce8ed);_0x20ca32+=_0x3e4cf7*0x5;const _0x42d0c5=this[_0x4ebbb0(0x224)](_0x67ae5f,_0x1ce8ed);return _0x20ca32+=_0x42d0c5['length']*0x8,this['wouldCreateLoop'](_0x67ae5f,_0x5f43ef)&&(_0x20ca32-=0x12c),_0x20ca32;}['isValidMove'](_0x223b40,_0x3353fb){const _0x24d3db=a0_0x4865bd;if(_0x223b40['x']<0x0||_0x223b40['x']>=this[_0x24d3db(0x260)]||_0x223b40['y']<0x0||_0x223b40['y']>=this[_0x24d3db(0x260)])return![];if(_0x3353fb[_0x24d3db(0x28f)](_0x2ed12d=>this[_0x24d3db(0x18c)](_0x2ed12d,_0x223b40)))return![];const _0x5ae56c=Math[_0x24d3db(0x290)](_0x223b40['x'],_0x223b40['y'],this['gridSize']-0x1-_0x223b40['x'],this[_0x24d3db(0x260)]-0x1-_0x223b40['y']);if(_0x5ae56c<0x2&&this[_0x24d3db(0x17f)]['length']>0x5)return![];return!![];}[a0_0x4865bd(0x2de)](_0x55dee4,_0x49f9a7){const _0x146e0d=a0_0x4865bd,_0x18d46a=new Set(),_0x1b3d6c=[_0x55dee4];_0x18d46a[_0x146e0d(0x223)](this[_0x146e0d(0x211)](_0x55dee4));let _0x2fe28e=0x0;while(_0x1b3d6c[_0x146e0d(0x21b)]>0x0){const _0x2bc2b7=_0x1b3d6c[_0x146e0d(0x24d)]();_0x2fe28e++;const _0x360357=this[_0x146e0d(0x224)](_0x2bc2b7,_0x49f9a7);for(const _0x5e1390 of _0x360357){const _0x2c7322=this[_0x146e0d(0x211)](_0x5e1390);!_0x18d46a['has'](_0x2c7322)&&(_0x18d46a[_0x146e0d(0x223)](_0x2c7322),_0x1b3d6c[_0x146e0d(0x1dc)](_0x5e1390));}}return _0x2fe28e;}[a0_0x4865bd(0x2b4)](_0x5b4beb,_0x4232c7){const _0x2fc7c9=a0_0x4865bd,_0x1834ca={..._0x5b4beb};switch(_0x4232c7){case'up':_0x1834ca['y']--;break;case _0x2fc7c9(0x2d0):_0x1834ca['y']++;break;case _0x2fc7c9(0x1a9):_0x1834ca['x']--;break;case'right':_0x1834ca['x']++;break;}return _0x1834ca;}[a0_0x4865bd(0x211)](_0x3f1609){return _0x3f1609['x']+','+_0x3f1609['y'];}[a0_0x4865bd(0x18c)](_0x3e778d,_0x1d346e){return _0x3e778d['x']===_0x1d346e['x']&&_0x3e778d['y']===_0x1d346e['y'];}['getNeighbors'](_0x1ae815,_0x2988bf){const _0x45aada=a0_0x4865bd,_0x27deec=[],_0x2a92f7=[{'x':0x0,'y':-0x1},{'x':0x1,'y':0x0},{'x':0x0,'y':0x1},{'x':-0x1,'y':0x0}];for(const _0x381de2 of _0x2a92f7){const _0x2e16fa={'x':_0x1ae815['x']+_0x381de2['x'],'y':_0x1ae815['y']+_0x381de2['y']};this[_0x45aada(0x277)](_0x2e16fa,_0x2988bf)&&_0x27deec[_0x45aada(0x1dc)](_0x2e16fa);}return _0x27deec;}[a0_0x4865bd(0x226)](_0x708e22,_0x555b62){const _0x214747=a0_0x4865bd,_0x1b5aa7=_0x555b62['x']-_0x708e22['x'],_0x351e02=_0x555b62['y']-_0x708e22['y'];if(_0x1b5aa7===0x1)return _0x214747(0x27a);if(_0x1b5aa7===-0x1)return _0x214747(0x1a9);if(_0x351e02===0x1)return'down';if(_0x351e02===-0x1)return'up';return this[_0x214747(0x2bb)];}[a0_0x4865bd(0x242)](_0xbecf0e,_0x322c21){const _0x4a0691=a0_0x4865bd,_0x21626d=[...this[_0x4a0691(0x17f)]];for(let _0x24e21f=0x1;_0x24e21f<_0xbecf0e['length'];_0x24e21f++){const _0x4bef26=_0xbecf0e[_0x24e21f];if(!this['isValidMove'](_0x4bef26,_0x21626d['slice'](0x1)))return![];_0x21626d[_0x4a0691(0x179)](_0x4bef26),_0x21626d[_0x4a0691(0x2df)]();const _0x544439=this[_0x4a0691(0x2de)](_0x4bef26,_0x21626d[_0x4a0691(0x1cb)](0x1));if(_0x544439<0x5)return![];}return!![];}['evaluatePostFoodSafety'](_0x559133,_0x5dca5b){const _0x360ad3=a0_0x4865bd,_0x9b8708=Math[_0x360ad3(0x290)](_0x559133['x'],_0x559133['y'],this[_0x360ad3(0x260)]-0x1-_0x559133['x'],this[_0x360ad3(0x260)]-0x1-_0x559133['y']);let _0x2f389e=_0x9b8708*0x14;const _0xf95ec8=this[_0x360ad3(0x2de)](_0x559133,_0x5dca5b);_0x2f389e+=_0xf95ec8*0xa;const _0x213573=this[_0x360ad3(0x224)](_0x559133,_0x5dca5b);return _0x2f389e+=_0x213573['length']*0xa,_0x5dca5b['some'](_0x2778d7=>this[_0x360ad3(0x18c)](_0x2778d7,_0x559133))&&(_0x2f389e=-Infinity),_0x2f389e;}}window[a0_0x4865bd(0x1f0)](a0_0x4865bd(0x1bc),()=>{new SnakeGame();});function a0_0xe096(){const _0x305e28=['stroke','GameOver','speed','3194lLqKGR','handleSkillSelectionKeys','所有效果持续时间增加20%','red','gameOver','currentDifficulty','checkDirectPath','bold\x2040px\x20Arial','peaceful','maxDuration','AI\x20Mode:\x20','flexWrap','skill-tag','some','min','findPathToFood','evaluateEmergencyMove','px,\x20','style','findPathToOpenSpace','0\x200\x205px\x20#00ff9d,\x200\x200\x2010px\x20#00ff9d','toLowerCase','0\x200\x205px\x20#ffff00,\x200\x200\x2010px\x20#ffff00','Magnet','updateAggressiveAIDirection','magnet','adjustColor','aggressive','error','neon-pulse-blue','磁力吸引','textAlign','click','Slow\x20Down','638uFsFvI','20px','isStageTransition','rgba(255,\x20255,\x20255,\x200.3)','clientHeight','dash','willHitTail','neon-pulse-red','background:\x20rgba(0,0,0,0.7);\x20color:\x20white;\x20padding:\x203px\x208px;\x20border-radius:\x2012px;\x20font-size:\x2012px;\x20display:\x20flex;\x20align-items:\x20center;\x20box-shadow:\x200\x200\x205px\x20rgba(0,255,157,0.5);','acceleration','justAteFood','evaluateMoveSafety','setupEventListeners','ctx','textContent','16px\x20Arial','getNextPoint','gameOverElement','isAIMode','1540680OHIvsw','getRecentMoves','display','speedBoost','direction','flex','score','save','hypot','setProperty','<p>当前阶段:\x20','longer_effects','aiSpawnInterval','fillRect','可以穿越一次墙壁','gameLoop','#FFC107','medium','div','splice','18741kPzdJp','wrap','setDifficulty','lastKeyPress','.difficulty','down','doubleScore','冲刺!','addExperience','keys','#00BCD4','游戏画布元素未找到!','getAIMove','color','forEach','</p><p>获得技能:\x20','shield','isPaused','draw','countAccessibleSpace','pop','createElement','drawLevelUpMenu','setLineDash','</p><p>最终等级:\x20','point','shield_chance','无法获取画布上下文!','13386084vnuvVf','setupAI','<span\x20style=\x27margin-right:\x204px\x27>','border','evaluatePostFoodSafety','yellow','activeEffects','Btn','querySelectorAll','isLevelUpMenuOpen','unshift','map','aiMoveInterval','speed_boost','generateSkillOptions','hard','snake','flex-end','sort','resize','translateX(-50%)','join','selectedSkillIndex','吃到食物时有10%概率获得护盾','8px\x2016px','translate(','icon','updateEffectDurations','Shield','pointsEqual','6427928rroNlp','\x20XP','护盾已消耗','rgba(0,\x20255,\x20157,\x200.3)','lastKeyTime','Base\x20speed:','#0073e6','difficulties','createTextNode','188adsCgV','center','findSafeMove','zIndex','#4CAF50','button','aiSnakes','#F44336','startGame','lineTo','now','filter','攻击蛇','generateFood','Starting\x20game\x20with\x20stage:','#FFD700','cellSize','type','rgba(0,\x200,\x200,\x200.9)','left','innerHTML','orange','createParticles','availableSkills','appendChild','skillPoints','获得护盾!','0\x200\x2010px\x20','Speed\x20Boost','showEffectMessage','className','checkAIFoodCollision','checkStageUpgrade','hasDashSkill','aiModeBtn','clientWidth','gameCanvas','速度提升!','load','aiButton','rgba(156,\x2039,\x20176,\x200.6)','Level\x20Up!\x20Lv','0\x200\x205px\x20#ff00ff,\x200\x200\x2010px\x20#ff00ff','borderRadius','remove','blue','beginPath','filled','effect-message','gap','\x20(x','max','22koPKHq','slice','setupCanvas','arc','effectDurations','easyBtn','keydown','fillText','segments','#9C27B0','Stage\x20upgraded\x20to:','applySkillEffect','恭喜进入阶段\x20','fontWeight','transition','experience','handleKeyPress','exp-segment\x20','push','foodColor','toString','startTime','arrowdown','<h2>GAMEOVER</h2><p>Press\x20SPACE\x20to\x20restart</p>','stageTransitionCountdown','OFF','--neon-color','height','Drawing\x20stage\x20indicator:','cssText','#00ff9d','9HUgoSe','效果结束','description','50%','pauseGame','move','experienceToNextLevel','addEventListener','4px','和平蛇','slowDown','</span>','font','classList','width','#FF5252','neon-pulse-green','green','#0099ff','checkAICollisions','0.8','random','2px\x20solid\x20','moveAISnake','bold','padding','getElementById','向前冲刺','\x20秒后继续','flat','shadowBlur','resumeGame','easy','white','scoreElement','二段跳','磁力吸引!','reverseControls','lineWidth','effectDurationMultiplier','pointToKey','none','purple','wouldCreateLoop','#2196F3','body','applyFoodEffect','justifyContent','12px','6585544OCYgiQ','length','levelUp','selectSkill','scoreMultiplier','updateAISnakes','level','dashDistance','0\x200\x205px\x20#00ffff,\x200\x200\x2010px\x20#00ffff','add','getNeighbors','moveInterval','getDirectionFromPoints','24ekozkw','rgba(0,\x200,\x200,\x200.1\x20)','mediumBtn','updateAIDirection','currentStage','#ff00ff','lastAISpawnTime','方向反转!','px)','evaluateOpenSpaceMove','active','吃了食物!','duration','fillStyle','速度提升','key','canvas','自动吸引附近食物','boxShadow','has','12311560qCcSRd','double_jump','moveTo','log','backgroundColor','from','translate(0,\x200)','isPathSafe','使用方向键选择，按空格键确认','neon-pulse-effect','shieldChance','food','effect-bar','levelValue','getEffectDisplayName','opacity','速度降低!','bind','shift','12px\x20Arial','#00ffff','expSegments','bold\x2060px\x20Arial','dashCooldown','updateExperienceBar','init','nextDirection','双倍得分!','magnetRange','8px','fontSize','opacity\x200.3s,\x20transform\x200.5s','strokeRect','skills','.difficulty\x20button','shadowColor','toggleAIMode','gridSize','isDashing','multiplier','14px','lastAIMoveTime','name','control','护盾触发!','absolute','update','hidden','position','padStart','AI\x20Mode:\x20OFF','floor','span','0\x200\x205px\x20#ff9900,\x200\x200\x2010px\x20#ff9900','translateX(-50%)\x20translateY(-10px)','fill','lastMoveTime','getContext','contains','transform','isValidMove','#00cc7a','generateAISnake','right','abs','#00995c','ceil','stageThresholds'];a0_0xe096=function(){return _0x305e28;};return a0_0xe096();}
