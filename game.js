function a0_0x21cf(_0xd7cf07,_0x59c503){const _0x2c6580=a0_0x2c65();return a0_0x21cf=function(_0x21cf22,_0x538dcf){_0x21cf22=_0x21cf22-0x118;let _0x4a0d09=_0x2c6580[_0x21cf22];return _0x4a0d09;},a0_0x21cf(_0xd7cf07,_0x59c503);}const a0_0x3f90f1=a0_0x21cf;(function(_0x4883a6,_0x37a48b){const _0x69ca8a=a0_0x21cf,_0x1ef62e=_0x4883a6();while(!![]){try{const _0x8e1286=-parseInt(_0x69ca8a(0x1f9))/0x1+parseInt(_0x69ca8a(0x1ed))/0x2+-parseInt(_0x69ca8a(0x210))/0x3+-parseInt(_0x69ca8a(0x204))/0x4*(parseInt(_0x69ca8a(0x136))/0x5)+parseInt(_0x69ca8a(0x282))/0x6*(-parseInt(_0x69ca8a(0x22f))/0x7)+-parseInt(_0x69ca8a(0x284))/0x8*(-parseInt(_0x69ca8a(0x13c))/0x9)+-parseInt(_0x69ca8a(0x28c))/0xa*(-parseInt(_0x69ca8a(0x147))/0xb);if(_0x8e1286===_0x37a48b)break;else _0x1ef62e['push'](_0x1ef62e['shift']());}catch(_0x3e3abb){_0x1ef62e['push'](_0x1ef62e['shift']());}}}(a0_0x2c65,0x67cf1));class SnakeGame{constructor(){const _0x3f5bac=a0_0x21cf;this[_0x3f5bac(0x132)]=document['getElementById'](_0x3f5bac(0x201));if(!this[_0x3f5bac(0x132)]){console[_0x3f5bac(0x145)](_0x3f5bac(0x143));return;}this['ctx']=this[_0x3f5bac(0x132)][_0x3f5bac(0x19c)]('2d');if(!this[_0x3f5bac(0x232)]){console[_0x3f5bac(0x145)](_0x3f5bac(0x235));return;}this[_0x3f5bac(0x1f0)]=document['getElementById'](_0x3f5bac(0x214))||{'textContent':''},this[_0x3f5bac(0x287)]=document[_0x3f5bac(0x255)](_0x3f5bac(0x25c))||document[_0x3f5bac(0x162)](_0x3f5bac(0x1c6)),this['aiButton']=document[_0x3f5bac(0x255)](_0x3f5bac(0x21c))||document[_0x3f5bac(0x162)](_0x3f5bac(0x1e6)),this['gridSize']=0x14,this[_0x3f5bac(0x173)]=[],this['food']=null,this[_0x3f5bac(0x224)]=_0x3f5bac(0x1b6),this[_0x3f5bac(0x22b)]=_0x3f5bac(0x1b6),this[_0x3f5bac(0x130)]=0x0,this['gameLoop']=null,this[_0x3f5bac(0x135)]=![],this[_0x3f5bac(0x261)]=[],this[_0x3f5bac(0x1db)]=![],this[_0x3f5bac(0x144)]=0x0,this[_0x3f5bac(0x13e)]=0x64,this[_0x3f5bac(0x172)]=![],this[_0x3f5bac(0x243)]=null,this[_0x3f5bac(0x121)]={},this[_0x3f5bac(0x13f)]=0x1,this[_0x3f5bac(0x164)]=0x0,this['experienceToNextLevel']=0x64,this['skills']=[],this[_0x3f5bac(0x236)]=[],this[_0x3f5bac(0x1ea)]=0x0,this['isLevelUpMenuOpen']=![],this[_0x3f5bac(0x25d)]=[],this[_0x3f5bac(0x1b2)]=0x2710,this['lastAISpawnTime']=0x0,this[_0x3f5bac(0x192)]={'easy':{'speed':0xc8,'acceleration':0x0},'medium':{'speed':0x78,'acceleration':0.5},'hard':{'speed':0x46,'acceleration':0x1}},this[_0x3f5bac(0x1ab)]=_0x3f5bac(0x12b),this['setupCanvas'](),this['setupEventListeners'](),this[_0x3f5bac(0x291)](),this[_0x3f5bac(0x251)]();}['handleSkillSelectionKeys'](_0x1256f9){const _0x42e308=a0_0x21cf;if(!this[_0x42e308(0x257)])return;const _0x3a43b0=_0x1256f9['key'][_0x42e308(0x18f)]();switch(_0x3a43b0){case _0x42e308(0x133):this[_0x42e308(0x222)]=(this[_0x42e308(0x222)]-0x1+this[_0x42e308(0x236)][_0x42e308(0x190)])%this[_0x42e308(0x236)][_0x42e308(0x190)],this[_0x42e308(0x179)](),this['drawLevelUpMenu']();break;case'arrowdown':this[_0x42e308(0x222)]=(this[_0x42e308(0x222)]+0x1)%this['availableSkills'][_0x42e308(0x190)],this[_0x42e308(0x179)](),this[_0x42e308(0x1b5)]();break;case'\x20':this[_0x42e308(0x1cc)](this[_0x42e308(0x236)][this[_0x42e308(0x222)]]['id']),this[_0x42e308(0x179)]();break;}}[a0_0x3f90f1(0x264)](){const _0x496f2=a0_0x3f90f1,_0x9ed4c6=this['canvas'][_0x496f2(0x11d)],_0x45f502=Math[_0x496f2(0x228)](_0x9ed4c6[_0x496f2(0x234)],_0x9ed4c6[_0x496f2(0x176)]);this[_0x496f2(0x132)][_0x496f2(0x182)]=_0x45f502,this[_0x496f2(0x132)][_0x496f2(0x260)]=_0x45f502,this[_0x496f2(0x227)]=Math[_0x496f2(0x262)](_0x45f502/this[_0x496f2(0x297)]);const _0x52f5c2=this[_0x496f2(0x227)]*this[_0x496f2(0x297)];this[_0x496f2(0x132)][_0x496f2(0x182)]=_0x52f5c2,this[_0x496f2(0x132)]['height']=_0x52f5c2,this[_0x496f2(0x132)][_0x496f2(0x206)][_0x496f2(0x182)]=_0x45f502+'px',this[_0x496f2(0x132)][_0x496f2(0x206)]['height']=_0x45f502+'px';}[a0_0x3f90f1(0x27f)](){const _0x45af1f=a0_0x3f90f1;document[_0x45af1f(0x20c)](_0x45af1f(0x187),this['handleKeyPress'][_0x45af1f(0x20f)](this)),document['addEventListener']('keydown',this[_0x45af1f(0x148)][_0x45af1f(0x20f)](this)),document[_0x45af1f(0x255)](_0x45af1f(0x226))['addEventListener'](_0x45af1f(0x1d0),()=>this['setDifficulty'](_0x45af1f(0x12b))),document[_0x45af1f(0x255)]('mediumBtn')[_0x45af1f(0x20c)](_0x45af1f(0x1d0),()=>this['setDifficulty'](_0x45af1f(0x22a))),document['getElementById']('hardBtn')[_0x45af1f(0x20c)](_0x45af1f(0x1d0),()=>this['setDifficulty'](_0x45af1f(0x1c4)));let _0x1f11b0;window[_0x45af1f(0x20c)]('resize',()=>{clearTimeout(_0x1f11b0),_0x1f11b0=setTimeout(()=>{const _0x39b9dd=a0_0x21cf;this[_0x39b9dd(0x264)](),this['draw']();},0x64);});}[a0_0x3f90f1(0x291)](){const _0x362a3c=a0_0x3f90f1;this[_0x362a3c(0x199)]&&this[_0x362a3c(0x199)][_0x362a3c(0x20c)](_0x362a3c(0x1d0),()=>{this['toggleAIMode']();});}[a0_0x3f90f1(0x251)](){const _0x38c015=a0_0x3f90f1;this[_0x38c015(0x13f)]=0x1,this['experience']=0x0,this['experienceToNextLevel']=0x1e,this['skills']=[],this[_0x38c015(0x236)]=[],this[_0x38c015(0x1ea)]=0x0,this[_0x38c015(0x257)]=![],this[_0x38c015(0x222)]=0x0,this[_0x38c015(0x141)]=![],this[_0x38c015(0x19e)]=0x0,this[_0x38c015(0x230)]=0x1,this['effectDurationMultiplier']=0x1,this['shieldChance']=0x0,this[_0x38c015(0x1fc)]=0x0,this[_0x38c015(0x175)]=0x1,this[_0x38c015(0x252)]=[0x64,0x12c],this[_0x38c015(0x1cd)]=null,this[_0x38c015(0x1fa)]=0x0,this[_0x38c015(0x1d8)]=0x0,this[_0x38c015(0x24d)]=![],this[_0x38c015(0x28b)]=0x0,this[_0x38c015(0x1a9)]=![],this[_0x38c015(0x173)]=[{'x':0xa,'y':0xa},{'x':0x9,'y':0xa},{'x':0x8,'y':0xa}],this[_0x38c015(0x224)]=_0x38c015(0x1b6),this[_0x38c015(0x22b)]=_0x38c015(0x1b6),this['score']=0x0,this[_0x38c015(0x1f0)][_0x38c015(0x24c)]=this[_0x38c015(0x130)],this[_0x38c015(0x281)](),this[_0x38c015(0x184)](),this['gameOverElement'][_0x38c015(0x126)]='',this[_0x38c015(0x287)][_0x38c015(0x138)][_0x38c015(0x1be)](_0x38c015(0x18d)),this[_0x38c015(0x254)](),document['querySelectorAll']('.difficulty')['forEach'](_0x1b7085=>_0x1b7085[_0x38c015(0x206)][_0x38c015(0x14d)]='none'),this[_0x38c015(0x1b9)]();}[a0_0x3f90f1(0x1f3)](_0x5c039c){const _0x4b510c=a0_0x3f90f1;this['currentDifficulty']=_0x5c039c,document['querySelectorAll']('.difficulty\x20button')['forEach'](_0x151de3=>{const _0x109863=a0_0x21cf;_0x151de3['classList'][_0x109863(0x11f)]('active');}),document['getElementById'](_0x5c039c+_0x4b510c(0x1b0))['classList'][_0x4b510c(0x1be)](_0x4b510c(0x1f5)),this['gameLoop']&&(clearInterval(this[_0x4b510c(0x188)]),this['startGame']());}[a0_0x3f90f1(0x1b9)](){const _0x5bb4af=a0_0x3f90f1;console['log'](_0x5bb4af(0x16e),this[_0x5bb4af(0x175)]);let _0x2272f9;switch(this[_0x5bb4af(0x175)]){case 0x1:_0x2272f9='easy';break;case 0x2:_0x2272f9=_0x5bb4af(0x22a);break;case 0x3:_0x2272f9=_0x5bb4af(0x1c4);break;default:_0x2272f9=_0x5bb4af(0x12b);}let _0x16cb39=this[_0x5bb4af(0x192)][_0x2272f9][_0x5bb4af(0x23f)];console[_0x5bb4af(0x149)](_0x5bb4af(0x212),this[_0x5bb4af(0x175)],_0x5bb4af(0x1d2),_0x2272f9,'Base\x20speed:',_0x16cb39);if(this[_0x5bb4af(0x121)][_0x5bb4af(0x14c)])_0x16cb39/=this[_0x5bb4af(0x121)]['speedBoost'][_0x5bb4af(0x120)];else this[_0x5bb4af(0x121)]['slowDown']&&(_0x16cb39/=this[_0x5bb4af(0x121)][_0x5bb4af(0x25a)]['multiplier']);const _0x5f22da=Math[_0x5bb4af(0x1a6)](0x32,_0x16cb39);this['gameLoop']=setInterval(()=>this['update'](),_0x5f22da);}[a0_0x3f90f1(0x23c)](_0x335f82){const _0x2b6e74=a0_0x3f90f1;if(this[_0x2b6e74(0x1a9)]&&!this[_0x2b6e74(0x135)]&&!this[_0x2b6e74(0x257)]){const _0x5d1840=Date[_0x2b6e74(0x229)](),_0x2f6476=_0x335f82[_0x2b6e74(0x185)][_0x2b6e74(0x18f)]();_0x2f6476===this['lastKeyPress']&&_0x5d1840-this[_0x2b6e74(0x1fa)]<0x12c&&this[_0x2b6e74(0x1d8)]<=0x0&&(this[_0x2b6e74(0x24d)]=!![],this[_0x2b6e74(0x28b)]=0x3,this[_0x2b6e74(0x1d8)]=0x1388,this[_0x2b6e74(0x11a)](_0x2b6e74(0x1c8),_0x2b6e74(0x1dc))),this[_0x2b6e74(0x1cd)]=_0x2f6476,this[_0x2b6e74(0x1fa)]=_0x5d1840;}const _0x321814=_0x335f82[_0x2b6e74(0x185)][_0x2b6e74(0x18f)]();if(_0x321814==='i'){this['toggleAIMode']();return;}if(_0x321814==='\x20'){this[_0x2b6e74(0x135)]=!this['isPaused'];this[_0x2b6e74(0x287)]['classList']['contains']('hidden')?console[_0x2b6e74(0x149)]('GameOver'):this[_0x2b6e74(0x251)]();return;}if(!this[_0x2b6e74(0x1db)]){const _0x1dcdf2={'arrowup':'up','arrowdown':'down','arrowleft':_0x2b6e74(0x1fd),'arrowright':'right','w':'up','s':_0x2b6e74(0x1d3),'a':'left','d':_0x2b6e74(0x1b6)};if(_0x1dcdf2[_0x321814]){let _0x5bcb61=_0x1dcdf2[_0x321814];if(this['activeEffects'][_0x2b6e74(0x137)]){const _0xe4f7fc={'up':'down','down':'up','left':_0x2b6e74(0x1b6),'right':'left'};_0x5bcb61=_0xe4f7fc[_0x5bcb61];}const _0x1a4a7b={'up':_0x2b6e74(0x1d3),'down':'up','left':_0x2b6e74(0x1b6),'right':_0x2b6e74(0x1fd)};if(this['direction']!==_0x1a4a7b[_0x5bcb61]){this[_0x2b6e74(0x22b)]=_0x5bcb61;const _0x14b492=document['getElementById'](_0x2b6e74(0x201));if(_0x14b492){const _0x2a4c13=_0x14b492['style'][_0x2b6e74(0x246)];let _0x1efc2=0x0;const _0x1d209b=setInterval(()=>{const _0x2868fc=_0x2b6e74,_0xa9319=(Math['random']()-0.5)*0x4,_0x26a60b=(Math[_0x2868fc(0x1cf)]()-0.5)*0x4;_0x14b492[_0x2868fc(0x206)]['transform']=_0x2868fc(0x208)+_0xa9319+_0x2868fc(0x271)+_0x26a60b+_0x2868fc(0x1f8),_0x1efc2++,_0x1efc2>=0x8&&(clearInterval(_0x1d209b),_0x14b492['style'][_0x2868fc(0x246)]=_0x2a4c13);},0x14);}}}}}[a0_0x3f90f1(0x272)](){const _0x1d20cb=a0_0x3f90f1;this['isAIMode']=!this[_0x1d20cb(0x1db)],this[_0x1d20cb(0x199)]['textContent']=_0x1d20cb(0x15b)+(this['isAIMode']?'ON':'OFF'),this[_0x1d20cb(0x199)][_0x1d20cb(0x138)][_0x1d20cb(0x12d)](_0x1d20cb(0x1f5)),this[_0x1d20cb(0x144)]=0x0;}['getAIMove'](){const _0x273aee=a0_0x3f90f1,_0x994be9=this[_0x273aee(0x173)][0x0];if(!this[_0x273aee(0x1c7)])return this[_0x273aee(0x224)];if(_0x994be9['x']<this[_0x273aee(0x1c7)]['x'])return _0x273aee(0x1b6);else{if(_0x994be9['x']>this['food']['x'])return _0x273aee(0x1fd);else{if(_0x994be9['y']<this[_0x273aee(0x1c7)]['y'])return'down';else{if(_0x994be9['y']>this[_0x273aee(0x1c7)]['y'])return'up';}}}return this['direction'];}[a0_0x3f90f1(0x254)](){const _0x53b2a5=a0_0x3f90f1,_0x5d340e=[_0x53b2a5(0x180),_0x53b2a5(0x245),_0x53b2a5(0x1aa),_0x53b2a5(0x216),_0x53b2a5(0x1e7),'#00BCD4'],_0x579bb7=Math[_0x53b2a5(0x262)](Math['random']()*_0x5d340e[_0x53b2a5(0x190)]);this['foodColor']=_0x5d340e[_0x579bb7];while(!![]){this['food']={'x':Math[_0x53b2a5(0x262)](Math['random']()*this['gridSize']),'y':Math['floor'](Math[_0x53b2a5(0x1cf)]()*this[_0x53b2a5(0x297)])};let _0x11fe46=this[_0x53b2a5(0x173)][_0x53b2a5(0x122)](_0x57177a=>_0x57177a['x']===this[_0x53b2a5(0x1c7)]['x']&&_0x57177a['y']===this['food']['y']);if(!_0x11fe46)for(const _0x19fd6d of this[_0x53b2a5(0x25d)]){if(_0x19fd6d['segments'][_0x53b2a5(0x122)](_0x4f70f4=>_0x4f70f4['x']===this[_0x53b2a5(0x1c7)]['x']&&_0x4f70f4['y']===this[_0x53b2a5(0x1c7)]['y'])){_0x11fe46=!![];break;}}if(!_0x11fe46)break;}}[a0_0x3f90f1(0x299)](){const _0x2e0b67=a0_0x3f90f1,_0xae47b6=this[_0x2e0b67(0x13f)]>0x2&&Math[_0x2e0b67(0x1cf)]()<0.3+this[_0x2e0b67(0x13f)]*0.05,_0x5a169c=Math[_0x2e0b67(0x228)](0x5,0x2+Math[_0x2e0b67(0x262)](this[_0x2e0b67(0x13f)]/0x3)),_0x26fd63=0x1+this[_0x2e0b67(0x13f)]*0.05;let _0x253fb8,_0xb865ba,_0x2ecc10=![];while(!_0x2ecc10){_0x253fb8=Math[_0x2e0b67(0x262)](Math[_0x2e0b67(0x1cf)]()*this['gridSize']),_0xb865ba=Math[_0x2e0b67(0x262)](Math[_0x2e0b67(0x1cf)]()*this['gridSize']),_0x2ecc10=!![];if(this['snake'][_0x2e0b67(0x122)](_0x16fc4c=>_0x16fc4c['x']===_0x253fb8&&_0x16fc4c['y']===_0xb865ba)){_0x2ecc10=![];continue;}for(const _0x36352e of this[_0x2e0b67(0x25d)]){if(_0x36352e[_0x2e0b67(0x155)][_0x2e0b67(0x122)](_0x466f7c=>_0x466f7c['x']===_0x253fb8&&_0x466f7c['y']===_0xb865ba)){_0x2ecc10=![];break;}}}const _0x20cef1=[],_0x1bd1e0=['up',_0x2e0b67(0x1d3),'left',_0x2e0b67(0x1b6)][Math[_0x2e0b67(0x262)](Math[_0x2e0b67(0x1cf)]()*0x4)];for(let _0x531640=0x0;_0x531640<_0x5a169c;_0x531640++){switch(_0x1bd1e0){case'up':_0x20cef1['push']({'x':_0x253fb8,'y':_0xb865ba+_0x531640});break;case _0x2e0b67(0x1d3):_0x20cef1['push']({'x':_0x253fb8,'y':_0xb865ba-_0x531640});break;case'left':_0x20cef1[_0x2e0b67(0x270)]({'x':_0x253fb8+_0x531640,'y':_0xb865ba});break;case _0x2e0b67(0x1b6):_0x20cef1[_0x2e0b67(0x270)]({'x':_0x253fb8-_0x531640,'y':_0xb865ba});break;}}this[_0x2e0b67(0x25d)][_0x2e0b67(0x270)]({'type':_0xae47b6?'aggressive':'peaceful','segments':_0x20cef1,'direction':_0x1bd1e0,'nextDirection':_0x1bd1e0,'speedMultiplier':_0x26fd63,'lastMoveTime':0x0,'moveInterval':_0xae47b6?0x96/_0x26fd63:0xc8/_0x26fd63});}[a0_0x3f90f1(0x238)](){const _0x4def93=a0_0x3f90f1,_0x559ee3=Date['now']();for(let _0xb5aabd=this[_0x4def93(0x25d)][_0x4def93(0x190)]-0x1;_0xb5aabd>=0x0;_0xb5aabd--){const _0x37bc7b=this['aiSnakes'][_0xb5aabd];if(_0x559ee3-_0x37bc7b[_0x4def93(0x11e)]<_0x37bc7b[_0x4def93(0x289)])continue;this[_0x4def93(0x28f)](_0x37bc7b),this[_0x4def93(0x1d5)](_0x37bc7b),_0x37bc7b['lastMoveTime']=_0x559ee3;if(this['checkAICollisions'](_0x37bc7b)){this['aiSnakes'][_0x4def93(0x218)](_0xb5aabd,0x1);continue;}_0x37bc7b['type']===_0x4def93(0x244)&&this[_0x4def93(0x152)](_0x37bc7b)&&(_0x37bc7b['segments'][_0x4def93(0x270)]({..._0x37bc7b[_0x4def93(0x155)][_0x37bc7b[_0x4def93(0x155)][_0x4def93(0x190)]-0x1]}),this['generateFood'](),this[_0x4def93(0x11a)]((_0x37bc7b['type']===_0x4def93(0x27b)?_0x4def93(0x1c0):_0x4def93(0x286))+_0x4def93(0x269),_0x37bc7b[_0x4def93(0x259)]===_0x4def93(0x27b)?'#F44336':_0x4def93(0x245)));}}[a0_0x3f90f1(0x28f)](_0x175c61){_0x175c61['type']==='peaceful'?this['updatePeacefulAIDirection'](_0x175c61):this['updateAggressiveAIDirection'](_0x175c61);}[a0_0x3f90f1(0x295)](_0x16d0d1){const _0x5b127f=a0_0x3f90f1;if(!this[_0x5b127f(0x1c7)])return;const _0x532339=_0x16d0d1[_0x5b127f(0x155)][0x0],_0x548e14=this[_0x5b127f(0x1c7)]['x']-_0x532339['x'],_0x38761a=this[_0x5b127f(0x1c7)]['y']-_0x532339['y'];Math[_0x5b127f(0x163)](_0x548e14)>Math['abs'](_0x38761a)?_0x16d0d1[_0x5b127f(0x22b)]=_0x548e14>0x0?_0x5b127f(0x1b6):_0x5b127f(0x1fd):_0x16d0d1[_0x5b127f(0x22b)]=_0x38761a>0x0?'down':'up';const _0x2068f8={'up':_0x5b127f(0x1d3),'down':'up','left':_0x5b127f(0x1b6),'right':_0x5b127f(0x1fd)};_0x16d0d1[_0x5b127f(0x22b)]===_0x2068f8[_0x16d0d1['direction']]&&(_0x16d0d1['nextDirection']=_0x16d0d1['direction']);}[a0_0x3f90f1(0x24a)](_0x18be14){const _0x3bddd7=a0_0x3f90f1,_0x45fc77=_0x18be14[_0x3bddd7(0x155)][0x0],_0x1cad5e=this[_0x3bddd7(0x173)][0x0],_0x386c8e=_0x1cad5e['x']-_0x45fc77['x'],_0x2dd999=_0x1cad5e['y']-_0x45fc77['y'];Math['abs'](_0x386c8e)>Math['abs'](_0x2dd999)?_0x18be14['nextDirection']=_0x386c8e>0x0?_0x3bddd7(0x1b6):_0x3bddd7(0x1fd):_0x18be14[_0x3bddd7(0x22b)]=_0x2dd999>0x0?_0x3bddd7(0x1d3):'up';const _0xeb5f0a={'up':_0x3bddd7(0x1d3),'down':'up','left':'right','right':_0x3bddd7(0x1fd)};_0x18be14['nextDirection']===_0xeb5f0a[_0x18be14[_0x3bddd7(0x224)]]&&(_0x18be14[_0x3bddd7(0x22b)]=_0x18be14[_0x3bddd7(0x224)]);}[a0_0x3f90f1(0x1d5)](_0x5cc6d0){const _0x313b67=a0_0x3f90f1;_0x5cc6d0['direction']=_0x5cc6d0['nextDirection'];const _0x4d88e2={..._0x5cc6d0[_0x313b67(0x155)][0x0]};switch(_0x5cc6d0['direction']){case'up':_0x4d88e2['y']--;break;case _0x313b67(0x1d3):_0x4d88e2['y']++;break;case _0x313b67(0x1fd):_0x4d88e2['x']--;break;case _0x313b67(0x1b6):_0x4d88e2['x']++;break;}_0x5cc6d0[_0x313b67(0x155)][_0x313b67(0x215)](_0x4d88e2),_0x5cc6d0[_0x313b67(0x155)]['pop']();}[a0_0x3f90f1(0x165)](_0x59dd2){const _0x16313e=a0_0x3f90f1,_0x240f38=_0x59dd2[_0x16313e(0x155)][0x0];if(_0x240f38['x']<0x0||_0x240f38['x']>=this['gridSize']||_0x240f38['y']<0x0||_0x240f38['y']>=this[_0x16313e(0x297)])return!![];for(let _0x16e16f=0x1;_0x16e16f<_0x59dd2[_0x16313e(0x155)][_0x16313e(0x190)];_0x16e16f++){if(_0x240f38['x']===_0x59dd2[_0x16313e(0x155)][_0x16e16f]['x']&&_0x240f38['y']===_0x59dd2['segments'][_0x16e16f]['y'])return!![];}for(const _0xe2bbf6 of this[_0x16313e(0x25d)]){if(_0xe2bbf6===_0x59dd2)continue;for(const _0x3f9bc8 of _0xe2bbf6[_0x16313e(0x155)]){if(_0x240f38['x']===_0x3f9bc8['x']&&_0x240f38['y']===_0x3f9bc8['y'])return!![];}}return![];}[a0_0x3f90f1(0x152)](_0x28b82e){const _0x4751c0=a0_0x3f90f1,_0x47814f=_0x28b82e['segments'][0x0];return this[_0x4751c0(0x1c7)]&&_0x47814f['x']===this[_0x4751c0(0x1c7)]['x']&&_0x47814f['y']===this[_0x4751c0(0x1c7)]['y'];}[a0_0x3f90f1(0x171)](){const _0x3468eb=a0_0x3f90f1;if(this[_0x3468eb(0x135)])return;this['checkStageUpgrade']();if(this[_0x3468eb(0x1db)])try{this[_0x3468eb(0x22b)]=this[_0x3468eb(0x1e2)]();}catch(_0x2d6b06){console[_0x3468eb(0x145)](_0x3468eb(0x183),_0x2d6b06),this['isAIMode']=![],this['aiButton'][_0x3468eb(0x24c)]=_0x3468eb(0x1d7),this['aiButton']['classList'][_0x3468eb(0x11f)](_0x3468eb(0x1f5));}this['direction']=this[_0x3468eb(0x22b)];let _0x166c51;if(this[_0x3468eb(0x24d)]&&this['dashDistance']>0x0){_0x166c51={...this[_0x3468eb(0x173)][0x0]};for(let _0x712135=0x0;_0x712135<0x1;_0x712135++){switch(this[_0x3468eb(0x224)]){case'up':_0x166c51['y']--;break;case'down':_0x166c51['y']++;break;case'left':_0x166c51['x']--;break;case'right':_0x166c51['x']++;break;}this['snake'][_0x3468eb(0x215)]({..._0x166c51}),this[_0x3468eb(0x28b)]--;if(_0x166c51['x']<0x0||_0x166c51['x']>=this[_0x3468eb(0x297)]||_0x166c51['y']<0x0||_0x166c51['y']>=this[_0x3468eb(0x297)]||this[_0x3468eb(0x173)]['some']((_0x4fa619,_0x205924)=>_0x205924>0x0&&_0x4fa619['x']===_0x166c51['x']&&_0x4fa619['y']===_0x166c51['y'])){if(this[_0x3468eb(0x121)][_0x3468eb(0x194)]){delete this[_0x3468eb(0x121)][_0x3468eb(0x194)],this[_0x3468eb(0x11a)](_0x3468eb(0x23e),_0x3468eb(0x26b)),this[_0x3468eb(0x173)][_0x3468eb(0x1d4)](),this['isDashing']=![],this['dashDistance']=0x0;return;}else{this[_0x3468eb(0x25c)]();return;}}}this[_0x3468eb(0x28b)]===0x0&&(this['isDashing']=![]);return;}_0x166c51={...this[_0x3468eb(0x173)][0x0]};switch(this[_0x3468eb(0x224)]){case'up':_0x166c51['y']--;break;case _0x3468eb(0x1d3):_0x166c51['y']++;break;case _0x3468eb(0x1fd):_0x166c51['x']--;break;case'right':_0x166c51['x']++;break;}if(_0x166c51['x']<0x0||_0x166c51['x']>=this['gridSize']||_0x166c51['y']<0x0||_0x166c51['y']>=this[_0x3468eb(0x297)]){if(this['activeEffects'][_0x3468eb(0x194)]){delete this[_0x3468eb(0x121)][_0x3468eb(0x194)],this['showEffectMessage'](_0x3468eb(0x23e),'purple'),this['snake'][_0x3468eb(0x1d4)]();return;}this['gameOver']();return;}if(this[_0x3468eb(0x173)][_0x3468eb(0x122)](_0x3f8ed0=>_0x3f8ed0['x']===_0x166c51['x']&&_0x3f8ed0['y']===_0x166c51['y'])){if(this[_0x3468eb(0x121)][_0x3468eb(0x194)]){delete this[_0x3468eb(0x121)][_0x3468eb(0x194)],this[_0x3468eb(0x11a)]('护盾已消耗',_0x3468eb(0x26b)),this[_0x3468eb(0x173)][_0x3468eb(0x1d4)]();return;}this[_0x3468eb(0x25c)]();return;}for(let _0x5be58c=this['aiSnakes'][_0x3468eb(0x190)]-0x1;_0x5be58c>=0x0;_0x5be58c--){const _0x158d97=this[_0x3468eb(0x25d)][_0x5be58c];if(_0x158d97[_0x3468eb(0x155)][_0x3468eb(0x122)](_0x18ffd5=>_0x18ffd5['x']===_0x166c51['x']&&_0x18ffd5['y']===_0x166c51['y'])){const _0x431dac=_0x158d97[_0x3468eb(0x259)]==='aggressive'?0x32:0x1e;this[_0x3468eb(0x20e)](_0x431dac),this['showEffectMessage']('击败'+(_0x158d97['type']==='aggressive'?_0x3468eb(0x1c0):'和平蛇')+'\x20+'+_0x431dac+_0x3468eb(0x1b3),_0x158d97[_0x3468eb(0x259)]===_0x3468eb(0x27b)?_0x3468eb(0x13b):'#4CAF50'),this[_0x3468eb(0x25d)][_0x3468eb(0x218)](_0x5be58c,0x1),this[_0x3468eb(0x17d)](_0x166c51['x']*this['cellSize']+this[_0x3468eb(0x227)]/0x2,_0x166c51['y']*this[_0x3468eb(0x227)]+this['cellSize']/0x2);this[_0x3468eb(0x257)]&&this[_0x3468eb(0x1b5)]();return;}}this['snake'][_0x3468eb(0x215)](_0x166c51);if(_0x166c51['x']===this[_0x3468eb(0x1c7)]['x']&&_0x166c51['y']===this[_0x3468eb(0x1c7)]['y']){const _0x30953c=this[_0x3468eb(0x121)][_0x3468eb(0x153)]?this[_0x3468eb(0x121)][_0x3468eb(0x153)][_0x3468eb(0x120)]:0x1,_0x1acfba=0xa*_0x30953c;this['score']+=_0x1acfba,this['scoreElement'][_0x3468eb(0x24c)]=this[_0x3468eb(0x130)],this[_0x3468eb(0x20e)](_0x1acfba),this[_0x3468eb(0x281)]();_0x30953c>0x1&&this[_0x3468eb(0x11a)]('+'+_0x1acfba+_0x3468eb(0x280)+_0x30953c+')',_0x3468eb(0x1dc));this['generateFood'](),this[_0x3468eb(0x172)]=!![],this[_0x3468eb(0x12e)](this[_0x3468eb(0x243)]);this[_0x3468eb(0x253)]>0x0&&Math[_0x3468eb(0x1cf)]()<this[_0x3468eb(0x253)]&&(this[_0x3468eb(0x121)]['shield']={'type':'shield','active':!![],'duration':0x2710*(this[_0x3468eb(0x202)]||0x1),'maxDuration':0x2710*(this[_0x3468eb(0x202)]||0x1),'startTime':Date[_0x3468eb(0x229)]()},this[_0x3468eb(0x11a)](_0x3468eb(0x1a1),_0x3468eb(0x26b),this['activeEffects']['shield'][_0x3468eb(0x275)]));const _0x1492a9=this[_0x3468eb(0x132)][_0x3468eb(0x11d)];let _0xf052a3=_0x3468eb(0x166);const _0x3222f0={'neon-pulse-red':0x190,'neon-pulse-green':0x320,'neon-pulse-blue':0x258,'neon-pulse-effect':0x258};switch(this[_0x3468eb(0x243)]){case _0x3468eb(0x180):_0xf052a3=_0x3468eb(0x209);break;case'#4CAF50':_0xf052a3=_0x3468eb(0x1cb);break;case'#2196F3':_0xf052a3=_0x3468eb(0x1a3);break;default:_0xf052a3=_0x3468eb(0x166);}_0x1492a9['classList'][_0x3468eb(0x1be)](_0xf052a3),setTimeout(()=>{const _0xab804b=_0x3468eb;_0x1492a9[_0xab804b(0x138)]['remove'](_0xf052a3);},_0x3222f0[_0xf052a3]);if(this[_0x3468eb(0x175)]<0x3&&this[_0x3468eb(0x192)][this[_0x3468eb(0x1ab)]]['acceleration']>0x0){clearInterval(this[_0x3468eb(0x188)]);const _0x2912a8=Math['max'](0x32,this['difficulties'][this[_0x3468eb(0x1ab)]][_0x3468eb(0x23f)]-this[_0x3468eb(0x130)]*this['difficulties'][this[_0x3468eb(0x1ab)]][_0x3468eb(0x18b)]);this[_0x3468eb(0x188)]=setInterval(()=>this['update'](),_0x2912a8);}}else this['snake'][_0x3468eb(0x1d4)](),this['justAteFood']=![];if(this['skills'][_0x3468eb(0x122)](_0x398e37=>_0x398e37['id']===_0x3468eb(0x1de))&&this[_0x3468eb(0x1fc)]>0x0){const _0x528c48=this[_0x3468eb(0x173)][0x0],_0x3fe452=Math[_0x3468eb(0x1ff)](this['food']['x']-_0x528c48['x'],this[_0x3468eb(0x1c7)]['y']-_0x528c48['y']);if(_0x3fe452<this['magnetRange']/this['cellSize']/0x2){this[_0x3468eb(0x173)][_0x3468eb(0x215)](_0x528c48);const _0x4f9824=this[_0x3468eb(0x121)][_0x3468eb(0x153)]?this[_0x3468eb(0x121)][_0x3468eb(0x153)]['multiplier']:0x1,_0x578aad=0xa*_0x4f9824;this[_0x3468eb(0x130)]+=_0x578aad,this[_0x3468eb(0x1f0)][_0x3468eb(0x24c)]=this[_0x3468eb(0x130)],this[_0x3468eb(0x20e)](_0x578aad),this['updateExperienceBar']();_0x4f9824>0x1&&this[_0x3468eb(0x11a)]('+'+_0x578aad+'\x20(x'+_0x4f9824+')',_0x3468eb(0x1dc));this['generateFood'](),this['justAteFood']=!![],this[_0x3468eb(0x12e)](this['foodColor']);this[_0x3468eb(0x253)]>0x0&&Math[_0x3468eb(0x1cf)]()<this[_0x3468eb(0x253)]&&(this[_0x3468eb(0x121)][_0x3468eb(0x194)]={'type':_0x3468eb(0x194),'active':!![],'duration':0x2710*(this[_0x3468eb(0x202)]||0x1),'startTime':Date[_0x3468eb(0x229)]()},this[_0x3468eb(0x11a)](_0x3468eb(0x1a1),_0x3468eb(0x26b),this[_0x3468eb(0x121)][_0x3468eb(0x194)][_0x3468eb(0x275)]));const _0x44aae9=this['canvas'][_0x3468eb(0x11d)];let _0x2de969=_0x3468eb(0x166);const _0x3efc6b={'neon-pulse-red':0x190,'neon-pulse-green':0x320,'neon-pulse-blue':0x258,'neon-pulse-effect':0x258};switch(this['foodColor']){case'#FF5252':_0x2de969='neon-pulse-red';break;case _0x3468eb(0x245):_0x2de969=_0x3468eb(0x1cb);break;case'#2196F3':_0x2de969=_0x3468eb(0x1a3);break;default:_0x2de969=_0x3468eb(0x166);}_0x44aae9[_0x3468eb(0x138)]['add'](_0x2de969),setTimeout(()=>{const _0x3a91cc=_0x3468eb;_0x44aae9[_0x3a91cc(0x138)][_0x3a91cc(0x11f)](_0x2de969);},_0x3efc6b[_0x2de969]);if(this[_0x3468eb(0x192)][this['currentDifficulty']][_0x3468eb(0x18b)]>0x0){clearInterval(this['gameLoop']);const _0x171882=Math['max'](0x32,this[_0x3468eb(0x192)][this[_0x3468eb(0x1ab)]][_0x3468eb(0x23f)]-this[_0x3468eb(0x130)]*this[_0x3468eb(0x192)][this[_0x3468eb(0x1ab)]][_0x3468eb(0x18b)]);this[_0x3468eb(0x188)]=setInterval(()=>this['update'](),_0x171882);}}}Date[_0x3468eb(0x229)]()-this[_0x3468eb(0x19d)]>this['aiSpawnInterval']&&(this[_0x3468eb(0x299)](),this['lastAISpawnTime']=Date['now']()),this[_0x3468eb(0x238)](),this[_0x3468eb(0x237)](),this['updateEffectDurations'](),this[_0x3468eb(0x179)](),this['isLevelUpMenuOpen']&&this['drawLevelUpMenu']();}['showStageTransition'](_0x4563d7){const _0x2223b7=a0_0x3f90f1;this['isStageTransition']=!![],this[_0x2223b7(0x19e)]=0x5,this['pauseGame']();const _0x110997=setInterval(()=>{const _0x4d19dc=_0x2223b7;this['stageTransitionCountdown']--,this[_0x4d19dc(0x19e)]<=0x0?(clearInterval(_0x110997),this[_0x4d19dc(0x141)]=![],this['resumeGame']()):this['draw']();},0x3e8);}[a0_0x3f90f1(0x1b5)](){const _0x4a456f=a0_0x3f90f1,_0xa4b485=this['canvas'][_0x4a456f(0x182)]*0.7,_0x5d43a7=this[_0x4a456f(0x132)][_0x4a456f(0x260)]*0.7,_0x57361a=(this[_0x4a456f(0x132)][_0x4a456f(0x182)]-_0xa4b485)/0x2,_0x3b1f50=(this[_0x4a456f(0x132)][_0x4a456f(0x260)]-_0x5d43a7)/0x2;this[_0x4a456f(0x232)][_0x4a456f(0x14b)]=_0x4a456f(0x278),this[_0x4a456f(0x232)]['fillRect'](_0x57361a,_0x3b1f50,_0xa4b485,_0x5d43a7),this[_0x4a456f(0x232)][_0x4a456f(0x157)]=_0x4a456f(0x258),this[_0x4a456f(0x232)][_0x4a456f(0x12c)]=0x3,this[_0x4a456f(0x232)][_0x4a456f(0x18c)](_0x57361a,_0x3b1f50,_0xa4b485,_0x5d43a7),this[_0x4a456f(0x232)][_0x4a456f(0x14b)]=_0x4a456f(0x1fe),this[_0x4a456f(0x232)]['font']=_0x4a456f(0x134),this['ctx'][_0x4a456f(0x27e)]=_0x4a456f(0x156),this[_0x4a456f(0x232)][_0x4a456f(0x1d1)](_0x4a456f(0x14f)+this[_0x4a456f(0x13f)]+')',this['canvas'][_0x4a456f(0x182)]/0x2,_0x3b1f50+0x28);const _0x26ef28=(_0x5d43a7-0x64)/0x3;this[_0x4a456f(0x236)][_0x4a456f(0x292)]((_0x974282,_0x2378d4)=>{const _0x3a165f=_0x4a456f,_0x4142ce=_0x3b1f50+0x50+_0x2378d4*_0x26ef28,_0x14e0ff=_0x2378d4===this[_0x3a165f(0x222)];this[_0x3a165f(0x232)][_0x3a165f(0x14b)]=_0x14e0ff?'rgba(0,\x20255,\x20157,\x200.3)':_0x3a165f(0x19a),this[_0x3a165f(0x232)]['fillRect'](_0x57361a+0x14,_0x4142ce,_0xa4b485-0x28,_0x26ef28-0x14),this[_0x3a165f(0x232)][_0x3a165f(0x14b)]=_0x3a165f(0x1fe),this[_0x3a165f(0x232)][_0x3a165f(0x247)]=_0x3a165f(0x134),this[_0x3a165f(0x232)][_0x3a165f(0x27e)]=_0x3a165f(0x1fd),this[_0x3a165f(0x232)]['fillText'](_0x974282[_0x3a165f(0x25b)]+'\x20'+_0x974282['name'],_0x57361a+0x28,_0x4142ce+0xf),this[_0x3a165f(0x232)][_0x3a165f(0x247)]=_0x3a165f(0x134),this[_0x3a165f(0x232)]['fillText'](_0x974282[_0x3a165f(0x283)],_0x57361a+0x28,_0x4142ce+0x1e);}),this[_0x4a456f(0x232)]['font']=_0x4a456f(0x24e),this['ctx'][_0x4a456f(0x27e)]='center',this[_0x4a456f(0x232)][_0x4a456f(0x1d1)](_0x4a456f(0x1c9),this[_0x4a456f(0x132)]['width']/0x2,_0x3b1f50+_0x5d43a7-0x14);}[a0_0x3f90f1(0x12e)](_0x42bcd3){const _0x39e5f4=a0_0x3f90f1,_0x55fad5=document[_0x39e5f4(0x1ee)](_0x39e5f4(0x19f));if(_0x55fad5['length']>0x0){let _0x416b65;switch(_0x42bcd3){case'#FF5252':_0x416b65=_0x39e5f4(0x180);break;case _0x39e5f4(0x245):_0x416b65='#4CAF50';break;case _0x39e5f4(0x1aa):_0x416b65=_0x39e5f4(0x1aa);break;case'#FFC107':_0x416b65='#FFC107';break;case _0x39e5f4(0x1e7):_0x416b65='#9C27B0';break;default:_0x416b65='#0073e6';}_0x55fad5[_0x39e5f4(0x292)](_0x5e5ea3=>{const _0x5066db=_0x39e5f4;_0x5e5ea3[_0x5066db(0x206)][_0x5066db(0x197)](_0x5066db(0x20d),_0x416b65);});}const _0x40e398={'speed':[],'control':[],'score':[],'shield':[]};Object[_0x39e5f4(0x1a7)](this[_0x39e5f4(0x121)])[_0x39e5f4(0x292)](_0x243fd9=>{const _0x41f54e=_0x39e5f4,_0x466bbb=this['activeEffects'][_0x243fd9];if(_0x40e398[_0x466bbb[_0x41f54e(0x259)]])_0x40e398[_0x466bbb[_0x41f54e(0x259)]][_0x41f54e(0x270)](_0x243fd9);}),Object['values'](_0x40e398)[_0x39e5f4(0x1a0)]()[_0x39e5f4(0x292)](_0x158685=>delete this[_0x39e5f4(0x121)][_0x158685]);switch(_0x42bcd3){case _0x39e5f4(0x180):this[_0x39e5f4(0x121)][_0x39e5f4(0x137)]={'maxDuration':0x1f40,'type':_0x39e5f4(0x1c1),'active':!![],'duration':0x1388*(this[_0x39e5f4(0x202)]||0x1),'startTime':Date[_0x39e5f4(0x229)]()},this[_0x39e5f4(0x11a)](_0x39e5f4(0x177),_0x39e5f4(0x27a),this['activeEffects'][_0x39e5f4(0x137)][_0x39e5f4(0x275)]);break;case'#4CAF50':this[_0x39e5f4(0x121)][_0x39e5f4(0x14c)]={'maxDuration':0x1b58,'type':_0x39e5f4(0x23f),'active':!![],'duration':0xbb8*(this[_0x39e5f4(0x202)]||0x1),'startTime':Date[_0x39e5f4(0x229)](),'multiplier':1.5},this[_0x39e5f4(0x11a)]('速度提升!',_0x39e5f4(0x127),this[_0x39e5f4(0x121)]['speedBoost'][_0x39e5f4(0x275)]);break;case'#2196F3':this[_0x39e5f4(0x121)][_0x39e5f4(0x153)]={'maxDuration':0x3a98,'type':_0x39e5f4(0x130),'active':!![],'duration':0x1f40*(this['effectDurationMultiplier']||0x1),'startTime':Date[_0x39e5f4(0x229)](),'multiplier':0x2},this[_0x39e5f4(0x11a)](_0x39e5f4(0x196),_0x39e5f4(0x1dc),this[_0x39e5f4(0x121)][_0x39e5f4(0x153)][_0x39e5f4(0x275)]);break;case _0x39e5f4(0x216):this[_0x39e5f4(0x121)][_0x39e5f4(0x25a)]={'maxDuration':0x2710,'type':_0x39e5f4(0x23f),'active':!![],'duration':0xfa0*(this['effectDurationMultiplier']||0x1),'startTime':Date[_0x39e5f4(0x229)](),'multiplier':0.7},this[_0x39e5f4(0x11a)](_0x39e5f4(0x20b),_0x39e5f4(0x11c),this['activeEffects'][_0x39e5f4(0x25a)][_0x39e5f4(0x275)]);break;case'#9C27B0':this['activeEffects'][_0x39e5f4(0x194)]={'type':_0x39e5f4(0x194),'active':!![],'duration':0x2710*(this[_0x39e5f4(0x202)]||0x1),'startTime':Date['now']()},this['showEffectMessage'](_0x39e5f4(0x1c2),_0x39e5f4(0x26b),this[_0x39e5f4(0x121)]['shield'][_0x39e5f4(0x275)]);break;}}[a0_0x3f90f1(0x237)](){const _0x3ecee4=a0_0x3f90f1,_0x47fd03=Date[_0x3ecee4(0x229)]();Object['keys'](this[_0x3ecee4(0x121)])[_0x3ecee4(0x292)](_0x5695ab=>{const _0x102b13=_0x3ecee4,_0x48378c=this[_0x102b13(0x121)][_0x5695ab];_0x47fd03-_0x48378c[_0x102b13(0x203)]>_0x48378c['duration']&&(delete this[_0x102b13(0x121)][_0x5695ab],this['showEffectMessage'](_0x102b13(0x276),'gray'));});}[a0_0x3f90f1(0x11a)](_0x4fbd6d,_0x1bb410,_0xdbedee=0x0){const _0x677119=a0_0x3f90f1,_0x252db7=document[_0x677119(0x162)](_0x677119(0x1c6));_0x252db7[_0x677119(0x206)]['position']=_0x677119(0x160),_0x252db7['style']['top']=_0x677119(0x296),_0x252db7[_0x677119(0x206)]['left']='50%',_0x252db7[_0x677119(0x206)][_0x677119(0x246)]=_0x677119(0x191),_0x252db7[_0x677119(0x206)][_0x677119(0x240)]=_0x1bb410,_0x252db7[_0x677119(0x206)][_0x677119(0x294)]=_0x677119(0x211),_0x252db7[_0x677119(0x206)]['fontSize']=_0x677119(0x1ef),_0x252db7[_0x677119(0x206)][_0x677119(0x225)]=_0x677119(0x28d),_0x252db7[_0x677119(0x206)][_0x677119(0x25e)]=_0x677119(0x239)+_0x1bb410,_0x252db7[_0x677119(0x206)]['borderRadius']=_0x677119(0x265),_0x252db7['style']['backgroundColor']=_0x677119(0x26d),_0x252db7[_0x677119(0x206)][_0x677119(0x1e1)]='0\x200\x2010px\x20'+_0x1bb410+_0x677119(0x1b1)+_0x1bb410+'40',_0x252db7[_0x677119(0x206)][_0x677119(0x1e8)]='0',_0x252db7[_0x677119(0x206)][_0x677119(0x200)]=_0x677119(0x1af),_0x252db7['id']='effect-message',_0x252db7['style'][_0x677119(0x1bd)]=_0x677119(0x1eb);if(_0xdbedee>0x0){const _0x56789a=document['createElement'](_0x677119(0x15c));_0x56789a[_0x677119(0x206)][_0x677119(0x11b)]=_0x677119(0x21d),_0x56789a['style'][_0x677119(0x128)]='14px',_0x56789a[_0x677119(0x206)][_0x677119(0x1e8)]='0.8',_0x56789a[_0x677119(0x24c)]='('+Math[_0x677119(0x1fb)](_0xdbedee/0x3e8)+'s)',_0x252db7[_0x677119(0x17b)](document[_0x677119(0x1a2)](_0x4fbd6d)),_0x252db7['appendChild'](_0x56789a);}else _0x252db7[_0x677119(0x24c)]=_0x4fbd6d;const _0x59bd25=document[_0x677119(0x255)]('effect-message');if(_0x59bd25)_0x59bd25[_0x677119(0x11f)]();const _0x12530e=this[_0x677119(0x132)][_0x677119(0x11d)]||document[_0x677119(0x131)];_0x12530e[_0x677119(0x17b)](_0x252db7),setTimeout(()=>{const _0x3d68fc=_0x677119;_0x252db7[_0x3d68fc(0x206)][_0x3d68fc(0x1e8)]='1',_0x252db7[_0x3d68fc(0x206)][_0x3d68fc(0x246)]='translateX(-50%)\x20translateY(-10px)';},0xa),window[_0x677119(0x20c)](_0x677119(0x1f1),()=>{new SnakeGame();});const _0x431e7f=_0xdbedee>0x0?Math[_0x677119(0x228)](_0xdbedee,0x1388):0x7d0;setTimeout(()=>{const _0x914983=_0x677119;_0x252db7['style'][_0x914983(0x1e8)]='0',_0x252db7['style'][_0x914983(0x246)]=_0x914983(0x12a),setTimeout(()=>_0x252db7['remove'](),0x12c);},_0x431e7f);}['createParticles'](_0x21150b,_0x43fd51){}[a0_0x3f90f1(0x17a)](){}['updateExperienceBar'](){const _0x409b3f=a0_0x3f90f1,_0x35e01a=document['getElementById'](_0x409b3f(0x290));if(!_0x35e01a)return;_0x35e01a[_0x409b3f(0x126)]='';const _0x17defc=document['getElementById'](_0x409b3f(0x26e));_0x17defc&&(_0x17defc['textContent']=this[_0x409b3f(0x13f)]);const _0x51a1d8=0xa,_0x5179ae=Math[_0x409b3f(0x228)](Math[_0x409b3f(0x262)](this['experience']/this['experienceToNextLevel']*_0x51a1d8),_0x51a1d8);for(let _0x5992b4=0x0;_0x5992b4<_0x51a1d8;_0x5992b4++){const _0x4dc328=document[_0x409b3f(0x162)](_0x409b3f(0x1c6));_0x4dc328[_0x409b3f(0x1ec)]='exp-segment\x20'+(_0x5992b4<_0x5179ae?_0x409b3f(0x1df):''),_0x35e01a['appendChild'](_0x4dc328);}}['checkStageUpgrade'](){const _0x40c73e=a0_0x3f90f1;console[_0x40c73e(0x149)]('Checking\x20stage\x20upgrade\x20-\x20Current\x20stage:',this[_0x40c73e(0x175)],_0x40c73e(0x181),this['score'],_0x40c73e(0x1a4),this[_0x40c73e(0x252)][this[_0x40c73e(0x175)]-0x1]);if(this[_0x40c73e(0x175)]<0x3){const _0x472c6d=this[_0x40c73e(0x175)]+0x1,_0x3b0921=this[_0x40c73e(0x252)][this[_0x40c73e(0x175)]-0x1];this[_0x40c73e(0x130)]>=_0x3b0921&&(this[_0x40c73e(0x175)]=_0x472c6d,console[_0x40c73e(0x149)](_0x40c73e(0x285),_0x472c6d),this[_0x40c73e(0x277)](_0x472c6d));}}[a0_0x3f90f1(0x184)](){const _0xf7438a=a0_0x3f90f1,_0x2d124b=document['getElementById']('effectDurations');if(!_0x2d124b)return;_0x2d124b[_0xf7438a(0x126)]='',_0x2d124b[_0xf7438a(0x206)]['display']=_0xf7438a(0x250),_0x2d124b['style'][_0xf7438a(0x15f)]=_0xf7438a(0x18a),_0x2d124b[_0xf7438a(0x206)][_0xf7438a(0x1dd)]=_0xf7438a(0x1da),_0x2d124b[_0xf7438a(0x206)][_0xf7438a(0x142)]=_0xf7438a(0x1da),_0x2d124b[_0xf7438a(0x206)][_0xf7438a(0x233)]='8px',_0x2d124b[_0xf7438a(0x206)][_0xf7438a(0x225)]='8px',_0x2d124b[_0xf7438a(0x206)]['bottom']='0',_0x2d124b['style'][_0xf7438a(0x1b6)]='0',_0x2d124b[_0xf7438a(0x206)]['position']=_0xf7438a(0x160),this[_0xf7438a(0x22c)]['forEach'](_0x2948d0=>{const _0x1e73c5=_0xf7438a,_0x2e6c92=document[_0x1e73c5(0x162)]('div');_0x2e6c92[_0x1e73c5(0x1ec)]='skill-tag',_0x2e6c92['innerHTML']=_0x1e73c5(0x1ad)+_0x2948d0[_0x1e73c5(0x25b)]+_0x1e73c5(0x1e4),_0x2e6c92[_0x1e73c5(0x206)][_0x1e73c5(0x16a)]='background:\x20rgba(0,0,0,0.7);\x20color:\x20white;\x20padding:\x203px\x208px;\x20border-radius:\x2012px;\x20font-size:\x2012px;\x20display:\x20flex;\x20align-items:\x20center;\x20box-shadow:\x200\x200\x205px\x20rgba(0,255,157,0.5);',_0x2d124b[_0x1e73c5(0x17b)](_0x2e6c92);}),Object['keys'](this[_0xf7438a(0x121)])[_0xf7438a(0x292)](_0x3e10e2=>{const _0x22c3c4=_0xf7438a,_0x41df14=this[_0x22c3c4(0x121)][_0x3e10e2];if(!_0x41df14[_0x22c3c4(0x275)]||!_0x41df14[_0x22c3c4(0x25f)])return;const _0x283429=document['createElement'](_0x22c3c4(0x1c6));_0x283429['className']=_0x22c3c4(0x23b);const _0x391453=document['createElement'](_0x22c3c4(0x1c6));_0x391453['className']='effect-name',_0x391453[_0x22c3c4(0x24c)]=this['getEffectDisplayName'](_0x3e10e2);const _0x2bea87=document['createElement']('div');_0x2bea87[_0x22c3c4(0x1ec)]='effect-bar-container';const _0x20a667=document[_0x22c3c4(0x162)](_0x22c3c4(0x1c6));_0x20a667[_0x22c3c4(0x1ec)]=_0x22c3c4(0x16d);const _0xda29ab=_0x41df14[_0x22c3c4(0x275)]-(Date[_0x22c3c4(0x229)]()-_0x41df14[_0x22c3c4(0x203)]);_0x20a667[_0x22c3c4(0x206)][_0x22c3c4(0x182)]=_0xda29ab/_0x41df14[_0x22c3c4(0x25f)]*0x64+'%';switch(_0x3e10e2){case _0x22c3c4(0x14c):_0x20a667[_0x22c3c4(0x206)][_0x22c3c4(0x1e0)]=_0x22c3c4(0x279),_0x20a667[_0x22c3c4(0x206)][_0x22c3c4(0x1e1)]='0\x200\x205px\x20#ff00ff,\x200\x200\x2010px\x20#ff00ff';break;case'slowDown':_0x20a667[_0x22c3c4(0x206)][_0x22c3c4(0x1e0)]='#00ffff',_0x20a667[_0x22c3c4(0x206)][_0x22c3c4(0x1e1)]=_0x22c3c4(0x273);break;case _0x22c3c4(0x194):_0x20a667[_0x22c3c4(0x206)][_0x22c3c4(0x1e0)]=_0x22c3c4(0x21f),_0x20a667[_0x22c3c4(0x206)][_0x22c3c4(0x1e1)]=_0x22c3c4(0x119);break;case _0x22c3c4(0x1de):_0x20a667[_0x22c3c4(0x206)][_0x22c3c4(0x1e0)]=_0x22c3c4(0x26c),_0x20a667[_0x22c3c4(0x206)][_0x22c3c4(0x1e1)]=_0x22c3c4(0x1f2);break;default:_0x20a667[_0x22c3c4(0x206)][_0x22c3c4(0x1e0)]=_0x22c3c4(0x258),_0x20a667[_0x22c3c4(0x206)]['boxShadow']=_0x22c3c4(0x125);}_0x2bea87[_0x22c3c4(0x17b)](_0x20a667),_0x283429[_0x22c3c4(0x17b)](_0x391453),_0x283429[_0x22c3c4(0x17b)](_0x2bea87),_0x2d124b[_0x22c3c4(0x17b)](_0x283429);});}[a0_0x3f90f1(0x288)](_0x3c15b0){const _0x26ba8d=a0_0x3f90f1,_0x16afbc={'speedBoost':_0x26ba8d(0x256),'slowDown':_0x26ba8d(0x17f),'shield':_0x26ba8d(0x16b),'magnet':_0x26ba8d(0x146)};return _0x16afbc[_0x3c15b0]||_0x3c15b0;}[a0_0x3f90f1(0x179)](){const _0x43bb03=a0_0x3f90f1;this[_0x43bb03(0x232)][_0x43bb03(0x1b7)](0x0,0x0,this[_0x43bb03(0x132)][_0x43bb03(0x182)],this['canvas']['height']),this[_0x43bb03(0x232)]['strokeStyle']='#333',this[_0x43bb03(0x232)]['lineWidth']=0.5;for(let _0x4a8d14=0x0;_0x4a8d14<=this[_0x43bb03(0x297)];_0x4a8d14++){this[_0x43bb03(0x232)][_0x43bb03(0x15d)](),this[_0x43bb03(0x232)][_0x43bb03(0x220)](_0x4a8d14*this['cellSize'],0x0),this['ctx'][_0x43bb03(0x28a)](_0x4a8d14*this[_0x43bb03(0x227)],this[_0x43bb03(0x132)][_0x43bb03(0x260)]),this[_0x43bb03(0x232)]['stroke'](),this[_0x43bb03(0x232)][_0x43bb03(0x15d)](),this[_0x43bb03(0x232)][_0x43bb03(0x220)](0x0,_0x4a8d14*this[_0x43bb03(0x227)]),this[_0x43bb03(0x232)][_0x43bb03(0x28a)](this[_0x43bb03(0x132)]['width'],_0x4a8d14*this[_0x43bb03(0x227)]),this[_0x43bb03(0x232)][_0x43bb03(0x15e)]();}if(this[_0x43bb03(0x121)][_0x43bb03(0x194)]){const _0x120481=this[_0x43bb03(0x173)][0x0];this[_0x43bb03(0x232)][_0x43bb03(0x15d)](),this['ctx'][_0x43bb03(0x150)](_0x120481['x']*this['cellSize']+this[_0x43bb03(0x227)]/0x2,_0x120481['y']*this[_0x43bb03(0x227)]+this[_0x43bb03(0x227)]/0x2,this[_0x43bb03(0x227)]*0.7,0x0,Math['PI']*0x2),this['ctx'][_0x43bb03(0x157)]=_0x43bb03(0x23a),this[_0x43bb03(0x232)][_0x43bb03(0x12c)]=0x3,this[_0x43bb03(0x232)][_0x43bb03(0x168)]([0x5,0x3]),this[_0x43bb03(0x232)][_0x43bb03(0x15e)](),this[_0x43bb03(0x232)]['setLineDash']([]);}if(this[_0x43bb03(0x141)]){this[_0x43bb03(0x232)][_0x43bb03(0x14b)]=_0x43bb03(0x241),this[_0x43bb03(0x232)]['fillRect'](0x0,0x0,this[_0x43bb03(0x132)][_0x43bb03(0x182)],this[_0x43bb03(0x132)][_0x43bb03(0x260)]),this[_0x43bb03(0x232)][_0x43bb03(0x14b)]=_0x43bb03(0x195),this[_0x43bb03(0x232)][_0x43bb03(0x247)]=_0x43bb03(0x14a),this['ctx'][_0x43bb03(0x27e)]=_0x43bb03(0x156),this[_0x43bb03(0x232)][_0x43bb03(0x1d1)](_0x43bb03(0x139)+this[_0x43bb03(0x175)]+'!',this[_0x43bb03(0x132)][_0x43bb03(0x182)]/0x2,this[_0x43bb03(0x132)][_0x43bb03(0x260)]/0x2-0x1e),this[_0x43bb03(0x232)][_0x43bb03(0x14b)]=_0x43bb03(0x1fe),this[_0x43bb03(0x232)]['font']=_0x43bb03(0x19b),this['ctx']['fillText'](this[_0x43bb03(0x19e)],this['canvas'][_0x43bb03(0x182)]/0x2,this['canvas']['height']/0x2+0x28),this[_0x43bb03(0x232)][_0x43bb03(0x247)]=_0x43bb03(0x248),this[_0x43bb03(0x232)][_0x43bb03(0x1d1)]('游戏将在\x20'+this[_0x43bb03(0x19e)]+_0x43bb03(0x186),this['canvas']['width']/0x2,this[_0x43bb03(0x132)][_0x43bb03(0x260)]/0x2+0x50);return;}console[_0x43bb03(0x149)](_0x43bb03(0x193),this[_0x43bb03(0x175)]),this[_0x43bb03(0x232)][_0x43bb03(0x14b)]=_0x43bb03(0x258),this['ctx'][_0x43bb03(0x247)]=_0x43bb03(0x219),this[_0x43bb03(0x232)][_0x43bb03(0x27e)]='center',this['ctx'][_0x43bb03(0x1d1)](_0x43bb03(0x1ba)+this['currentStage'],this[_0x43bb03(0x132)]['width']/0x2,0x19);const _0x3503d4=0x64,_0x13c3aa=0x8,_0x5a8928=this[_0x43bb03(0x164)]/this[_0x43bb03(0x17e)];this[_0x43bb03(0x232)][_0x43bb03(0x14b)]=_0x43bb03(0x1b4),this[_0x43bb03(0x232)][_0x43bb03(0x27d)](0x5,this[_0x43bb03(0x132)][_0x43bb03(0x260)]-0xf,_0x3503d4,_0x13c3aa),this[_0x43bb03(0x232)][_0x43bb03(0x14b)]='#00ff9d',this[_0x43bb03(0x232)]['fillRect'](0x5,this[_0x43bb03(0x132)][_0x43bb03(0x260)]-0xf,_0x3503d4*_0x5a8928,_0x13c3aa),this[_0x43bb03(0x25d)]['forEach'](_0x52ac95=>{const _0x3edfd2=_0x43bb03,_0x4f7b97=_0x52ac95[_0x3edfd2(0x259)]===_0x3edfd2(0x27b)?'#F44336':_0x3edfd2(0x245);_0x52ac95['segments']['forEach']((_0xdfd983,_0x10374e)=>{const _0x153ea6=_0x3edfd2;this['ctx'][_0x153ea6(0x14b)]=_0x10374e===0x0?_0x4f7b97:this[_0x153ea6(0x129)](_0x4f7b97,-0x1e),this['ctx'][_0x153ea6(0x17c)]=_0x4f7b97,this[_0x153ea6(0x232)]['shadowBlur']=0xa,this[_0x153ea6(0x232)][_0x153ea6(0x27d)](_0xdfd983['x']*this[_0x153ea6(0x227)],_0xdfd983['y']*this[_0x153ea6(0x227)],this[_0x153ea6(0x227)],this[_0x153ea6(0x227)]),this[_0x153ea6(0x232)]['fillStyle']=this[_0x153ea6(0x129)](_0x4f7b97,-0x32),this[_0x153ea6(0x232)][_0x153ea6(0x205)]=0x0,this[_0x153ea6(0x232)]['fillRect'](_0xdfd983['x']*this['cellSize']+this['cellSize']*0.15,_0xdfd983['y']*this[_0x153ea6(0x227)]+this[_0x153ea6(0x227)]*0.15,this['cellSize']*0.7,this['cellSize']*0.7);});}),this[_0x43bb03(0x232)]['shadowBlur']=0x0,this[_0x43bb03(0x173)]['forEach']((_0x12e747,_0x895b3b)=>{const _0x48206d=_0x43bb03,_0x40bf80=_0x895b3b===0x0?_0x48206d(0x258):_0x48206d(0x1a8);this[_0x48206d(0x232)][_0x48206d(0x14b)]=_0x40bf80,this['ctx'][_0x48206d(0x17c)]=_0x40bf80,this['ctx'][_0x48206d(0x205)]=0xa,this[_0x48206d(0x232)][_0x48206d(0x27d)](_0x12e747['x']*this[_0x48206d(0x227)],_0x12e747['y']*this['cellSize'],this[_0x48206d(0x227)],this[_0x48206d(0x227)]),this[_0x48206d(0x232)][_0x48206d(0x14b)]=_0x895b3b===0x0?_0x48206d(0x1a8):_0x48206d(0x213),this[_0x48206d(0x232)][_0x48206d(0x205)]=0x0,this[_0x48206d(0x232)][_0x48206d(0x27d)](_0x12e747['x']*this[_0x48206d(0x227)]+this[_0x48206d(0x227)]*0.15,_0x12e747['y']*this[_0x48206d(0x227)]+this[_0x48206d(0x227)]*0.15,this[_0x48206d(0x227)]*0.7,this[_0x48206d(0x227)]*0.7);}),this[_0x43bb03(0x184)]();if(this[_0x43bb03(0x24d)]){this[_0x43bb03(0x232)]['save'](),this[_0x43bb03(0x232)][_0x43bb03(0x20a)]=0.6,this[_0x43bb03(0x232)][_0x43bb03(0x14b)]='#0099ff',this['ctx'][_0x43bb03(0x17c)]=_0x43bb03(0x118),this[_0x43bb03(0x232)][_0x43bb03(0x205)]=0x14;for(let _0x474d5e=0x0;_0x474d5e<Math[_0x43bb03(0x228)](0x3,this[_0x43bb03(0x173)][_0x43bb03(0x190)]-0x1);_0x474d5e++){const _0x241e21=this[_0x43bb03(0x173)][_0x474d5e],_0x4969d7=this[_0x43bb03(0x227)]*(0x1-_0x474d5e*0.2),_0x333772=(this['cellSize']-_0x4969d7)/0x2;this['ctx']['beginPath'](),this['ctx']['arc'](_0x241e21['x']*this[_0x43bb03(0x227)]+this[_0x43bb03(0x227)]/0x2,_0x241e21['y']*this[_0x43bb03(0x227)]+this['cellSize']/0x2,_0x4969d7/0x2,0x0,Math['PI']*0x2),this[_0x43bb03(0x232)][_0x43bb03(0x231)]();}this[_0x43bb03(0x232)][_0x43bb03(0x242)]();}this[_0x43bb03(0x232)][_0x43bb03(0x205)]=0x0;if(this['food']){const _0x268fd7=this[_0x43bb03(0x243)]||_0x43bb03(0x180);this['ctx']['fillStyle']=_0x268fd7,this['ctx']['shadowColor']=_0x268fd7,this[_0x43bb03(0x232)][_0x43bb03(0x205)]=0xf,this[_0x43bb03(0x232)][_0x43bb03(0x27d)](this['food']['x']*this['cellSize'],this[_0x43bb03(0x1c7)]['y']*this[_0x43bb03(0x227)],this['cellSize'],this[_0x43bb03(0x227)]),this[_0x43bb03(0x232)][_0x43bb03(0x14b)]=this[_0x43bb03(0x129)](_0x268fd7,0x32),this['ctx']['shadowBlur']=0x0,this[_0x43bb03(0x232)][_0x43bb03(0x27d)](this[_0x43bb03(0x1c7)]['x']*this[_0x43bb03(0x227)]+this[_0x43bb03(0x227)]*0.25,this['food']['y']*this[_0x43bb03(0x227)]+this[_0x43bb03(0x227)]*0.25,this[_0x43bb03(0x227)]*0.5,this[_0x43bb03(0x227)]*0.5);}this[_0x43bb03(0x232)]['shadowBlur']=0x0;}[a0_0x3f90f1(0x129)](_0x82dc19,_0x18ea02){const _0x36c35c=a0_0x3f90f1;let _0xc0099f=parseInt(_0x82dc19['slice'](0x1,0x3),0x10),_0x37939a=parseInt(_0x82dc19[_0x36c35c(0x27c)](0x3,0x5),0x10),_0x119277=parseInt(_0x82dc19['slice'](0x5,0x7),0x10);return _0xc0099f=Math[_0x36c35c(0x228)](0xff,Math[_0x36c35c(0x1a6)](0x0,_0xc0099f+_0x18ea02)),_0x37939a=Math['min'](0xff,Math[_0x36c35c(0x1a6)](0x0,_0x37939a+_0x18ea02)),_0x119277=Math['min'](0xff,Math[_0x36c35c(0x1a6)](0x0,_0x119277+_0x18ea02)),'#'+_0xc0099f[_0x36c35c(0x1e3)](0x10)['padStart'](0x2,'0')+_0x37939a[_0x36c35c(0x1e3)](0x10)[_0x36c35c(0x1ae)](0x2,'0')+_0x119277[_0x36c35c(0x1e3)](0x10)[_0x36c35c(0x1ae)](0x2,'0');}[a0_0x3f90f1(0x20e)](_0x4082d5){const _0x1ceb85=a0_0x3f90f1;this['experience']+=_0x4082d5,this[_0x1ceb85(0x11a)]('+'+_0x4082d5+_0x1ceb85(0x1b3),_0x1ceb85(0x11c)),this[_0x1ceb85(0x281)]();while(this['experience']>=this[_0x1ceb85(0x17e)]){this[_0x1ceb85(0x1e5)]();}}[a0_0x3f90f1(0x1e5)](){const _0x3d5e46=a0_0x3f90f1;this[_0x3d5e46(0x13f)]++,this[_0x3d5e46(0x164)]-=this[_0x3d5e46(0x17e)],this[_0x3d5e46(0x17e)]=Math[_0x3d5e46(0x262)](this[_0x3d5e46(0x17e)]*1.5),this[_0x3d5e46(0x11a)](_0x3d5e46(0x22e)+this[_0x3d5e46(0x13f)],'gold'),this['generateSkillOptions'](),this[_0x3d5e46(0x236)][_0x3d5e46(0x190)]>0x0?(this[_0x3d5e46(0x1ea)]++,this['isLevelUpMenuOpen']=!![]):this[_0x3d5e46(0x257)]=![],this[_0x3d5e46(0x12f)]();}[a0_0x3f90f1(0x1bf)](){const _0x3c4bb1=a0_0x3f90f1,_0x3ddb09=[{'id':_0x3c4bb1(0x223),'name':_0x3c4bb1(0x21b),'description':_0x3c4bb1(0x207),'icon':'⚡'},{'id':_0x3c4bb1(0x26a),'name':'效果延长','description':_0x3c4bb1(0x16c),'icon':'⏱️'},{'id':'more_points','name':_0x3c4bb1(0x13d),'description':_0x3c4bb1(0x167),'icon':'💰'},{'id':'shield_chance','name':_0x3c4bb1(0x293),'description':_0x3c4bb1(0x1bb),'icon':_0x3c4bb1(0x1e9)},{'id':_0x3c4bb1(0x24b),'name':_0x3c4bb1(0x274),'description':_0x3c4bb1(0x18e),'icon':'🚪'},{'id':'magnet','name':_0x3c4bb1(0x170),'description':'自动吸引附近食物','icon':'🧲'},{'id':_0x3c4bb1(0x221),'name':_0x3c4bb1(0x1d9),'description':_0x3c4bb1(0x24f),'icon':'💨'}],_0x58988b=_0x3ddb09['filter'](_0x545a85=>!this['skills'][_0x3c4bb1(0x122)](_0x4c46f9=>_0x4c46f9['id']===_0x545a85['id']));this[_0x3c4bb1(0x236)]=[];while(this[_0x3c4bb1(0x236)][_0x3c4bb1(0x190)]<0x3&&_0x58988b[_0x3c4bb1(0x190)]>0x0){const _0x5d35b8=Math[_0x3c4bb1(0x262)](Math[_0x3c4bb1(0x1cf)]()*_0x58988b[_0x3c4bb1(0x190)]);this[_0x3c4bb1(0x236)][_0x3c4bb1(0x270)](_0x58988b[_0x3c4bb1(0x218)](_0x5d35b8,0x1)[0x0]);}}[a0_0x3f90f1(0x1cc)](_0x191e30){const _0x5e1b1d=a0_0x3f90f1,_0x23b5d4=this['availableSkills'][_0x5e1b1d(0x178)](_0x2538e9=>_0x2538e9['id']===_0x191e30);_0x23b5d4&&(this['skills'][_0x5e1b1d(0x270)](_0x23b5d4),this[_0x5e1b1d(0x268)](_0x23b5d4),this['skillPoints']--,this[_0x5e1b1d(0x257)]=![],this[_0x5e1b1d(0x154)]());}[a0_0x3f90f1(0x268)](_0x2c0e4f){const _0x168911=a0_0x3f90f1;if(_0x2c0e4f['id']==='dash'){this['hasDashSkill']=!![];return;}switch(_0x2c0e4f['id']){case'speed_boost':this['difficulties'][this[_0x168911(0x1ab)]][_0x168911(0x23f)]*=0.9;break;case _0x168911(0x26a):this[_0x168911(0x202)]=(this['effectDurationMultiplier']||0x1)*1.2;break;case _0x168911(0x1ac):this[_0x168911(0x230)]=(this[_0x168911(0x230)]||0x1)*1.2;break;case _0x168911(0x1f4):this[_0x168911(0x253)]=(this['shieldChance']||0x0)+0.1;break;case _0x168911(0x1de):this[_0x168911(0x1fc)]=0x64,this[_0x168911(0x121)][_0x168911(0x1de)]={'maxDuration':0x3a98,'type':_0x168911(0x1de),'active':!![],'duration':0x2710*(this[_0x168911(0x202)]||0x1),'startTime':Date['now']()},this[_0x168911(0x11a)](_0x168911(0x267),_0x168911(0x1d6),this['activeEffects']['magnet'][_0x168911(0x275)]);break;}}[a0_0x3f90f1(0x12f)](){const _0x5cc111=a0_0x3f90f1;this[_0x5cc111(0x135)]=!![],clearInterval(this[_0x5cc111(0x188)]);}[a0_0x3f90f1(0x154)](){const _0xb7b545=a0_0x3f90f1;this['isPaused']=![],this[_0xb7b545(0x1b9)]();}['gameOver'](){const _0x445fcb=a0_0x3f90f1;this[_0x445fcb(0x12f)](),this[_0x445fcb(0x121)]={},this['updateEffectDurations'](),this[_0x445fcb(0x257)]=![],this['gameOverElement']['classList'][_0x445fcb(0x11f)](_0x445fcb(0x18d));const _0x2e6d5b=document[_0x445fcb(0x162)](_0x445fcb(0x1c6));_0x2e6d5b[_0x445fcb(0x126)]=_0x445fcb(0x1f6);const _0x5b225e=_0x2e6d5b;let _0x5df0c4=0x0;const _0x2de08c=setInterval(()=>{const _0x4a8e3d=_0x445fcb,_0xa63f6b=(Math[_0x4a8e3d(0x1cf)]()-0.5)*0x8,_0x124a51=(Math[_0x4a8e3d(0x1cf)]()-0.5)*0x8;_0x5b225e[_0x4a8e3d(0x206)][_0x4a8e3d(0x246)]='translate('+_0xa63f6b+_0x4a8e3d(0x271)+_0x124a51+'px)',_0x5df0c4++,_0x5df0c4>=0xf&&(clearInterval(_0x2de08c),_0x5b225e[_0x4a8e3d(0x206)]['transform']=_0x4a8e3d(0x198));},0x1e);this['gameOverElement'][_0x445fcb(0x17b)](_0x2e6d5b);const _0x26c661=document[_0x445fcb(0x162)](_0x445fcb(0x1c6));_0x26c661['innerHTML']='<p>当前阶段:\x20'+this[_0x445fcb(0x175)]+'</p><p>最终得分:\x20'+this[_0x445fcb(0x130)]+_0x445fcb(0x14e)+this['level']+_0x445fcb(0x1bc)+(this['skills'][_0x445fcb(0x174)](_0x105af1=>_0x105af1[_0x445fcb(0x124)])[_0x445fcb(0x249)](',\x20')||'无')+_0x445fcb(0x23d),_0x26c661[_0x445fcb(0x206)][_0x445fcb(0x240)]=_0x445fcb(0x1fe),_0x26c661[_0x445fcb(0x206)][_0x445fcb(0x27e)]=_0x445fcb(0x156),_0x26c661[_0x445fcb(0x206)][_0x445fcb(0x189)]='20px',this['gameOverElement']['appendChild'](_0x26c661);}['getAIMove'](){const _0x579ccf=a0_0x3f90f1,_0x510b4c=Date[_0x579ccf(0x229)]();if(_0x510b4c-this[_0x579ccf(0x144)]<this[_0x579ccf(0x13e)])return this[_0x579ccf(0x224)];this[_0x579ccf(0x144)]=_0x510b4c;const _0x381ae5=this['snake'][0x0],_0x5bb65f=this['snake'][_0x579ccf(0x27c)](0x1);if(this['justAteFood']){const _0x306940=this[_0x579ccf(0x217)](_0x381ae5,_0x5bb65f)[_0x579ccf(0x174)](_0x51cbce=>({'point':_0x51cbce,'score':this[_0x579ccf(0x1b8)](_0x51cbce,_0x5bb65f)}))[_0x579ccf(0x151)]((_0x1589cd,_0x27e64a)=>_0x27e64a[_0x579ccf(0x130)]-_0x1589cd[_0x579ccf(0x130)]);if(_0x306940[_0x579ccf(0x190)]>0x0)return this[_0x579ccf(0x1c5)](_0x381ae5,_0x306940[0x0][_0x579ccf(0x21a)]);}const _0x5b5327=this[_0x579ccf(0x1f7)](_0x381ae5,_0x5bb65f);if(_0x5b5327<0xa)return this['findSafeMove'](_0x381ae5,_0x5bb65f);const _0x1b9bb6=this[_0x579ccf(0x169)](_0x381ae5,this[_0x579ccf(0x1c7)],_0x5bb65f);if(_0x1b9bb6&&_0x1b9bb6[_0x579ccf(0x190)]>0x0){const _0xb1670f=_0x1b9bb6[0x0];if(this[_0x579ccf(0x21e)](_0xb1670f,_0x5bb65f)&&!this[_0x579ccf(0x1ce)](_0xb1670f))return this[_0x579ccf(0x1c5)](_0x381ae5,_0xb1670f);}return this[_0x579ccf(0x1ca)](_0x381ae5,_0x5bb65f);}[a0_0x3f90f1(0x169)](_0xd1d781,_0x73a7ce,_0x17b5b8){const _0x3e1cb7=a0_0x3f90f1,_0x1036ed=new Set(),_0xda75a4=[[_0xd1d781]];_0x1036ed[_0x3e1cb7(0x1be)](this['pointToKey'](_0xd1d781));const _0x2a27ac=Math[_0x3e1cb7(0x228)](0x1e,this[_0x3e1cb7(0x297)]*this[_0x3e1cb7(0x297)]),_0x36b9c0=this[_0x3e1cb7(0x1c3)](0x3),_0x3bb55a=new Set(),_0x2a1377=Math[_0x3e1cb7(0x163)](_0xd1d781['x']-_0x73a7ce['x'])+Math[_0x3e1cb7(0x163)](_0xd1d781['y']-_0x73a7ce['y']);if(_0x2a1377<=0x3){const _0x34bea8=this[_0x3e1cb7(0x298)](_0xd1d781,_0x73a7ce,_0x17b5b8);if(_0x34bea8)return _0x34bea8;}const _0x56f861=Math[_0x3e1cb7(0x228)](_0x73a7ce['x'],_0x73a7ce['y'],this[_0x3e1cb7(0x297)]-0x1-_0x73a7ce['x'],this['gridSize']-0x1-_0x73a7ce['y']),_0x5c4a60=_0x56f861<0x3?_0x2a27ac*1.5:_0x2a27ac;while(_0xda75a4['length']>0x0&&_0xda75a4[_0x3e1cb7(0x190)]<_0x5c4a60){const _0x5e9cee=_0xda75a4[_0x3e1cb7(0x140)](),_0x2e1e6c=_0x5e9cee[_0x5e9cee[_0x3e1cb7(0x190)]-0x1];if(this['pointsEqual'](_0x2e1e6c,_0x73a7ce)){if(this[_0x3e1cb7(0x28e)](_0x5e9cee,_0x17b5b8))return _0x5e9cee[_0x3e1cb7(0x27c)](0x1);continue;}const _0x21a97b=this[_0x3e1cb7(0x217)](_0x2e1e6c,_0x17b5b8)[_0x3e1cb7(0x174)](_0x43dbdb=>({'point':_0x43dbdb,'score':this[_0x3e1cb7(0x26f)](_0x43dbdb,_0x73a7ce,_0x17b5b8,_0x36b9c0,_0x3bb55a)}))[_0x3e1cb7(0x151)]((_0xf55070,_0x5228af)=>_0x5228af[_0x3e1cb7(0x130)]-_0xf55070[_0x3e1cb7(0x130)])['map'](_0x13c405=>_0x13c405[_0x3e1cb7(0x21a)]);for(const _0x1773db of _0x21a97b){const _0x577ef9=this[_0x3e1cb7(0x159)](_0x1773db);!_0x1036ed[_0x3e1cb7(0x16f)](_0x577ef9)&&(_0x1036ed['add'](_0x577ef9),_0x3bb55a[_0x3e1cb7(0x1be)](_0x577ef9),_0xda75a4[_0x3e1cb7(0x270)]([..._0x5e9cee,_0x1773db]));}}return this[_0x3e1cb7(0x158)](_0xd1d781,_0x17b5b8,_0x3bb55a);}[a0_0x3f90f1(0x298)](_0xa54c9d,_0x3f91de,_0x4d0ca4){const _0x40750a=a0_0x3f90f1;if(_0xa54c9d['x']===_0x3f91de['x']||_0xa54c9d['y']===_0x3f91de['y']){const _0x1afa0b=this[_0x40750a(0x1c5)](_0xa54c9d,_0x3f91de),_0x133f54=this[_0x40750a(0x123)](_0xa54c9d,_0x1afa0b);if(this[_0x40750a(0x21e)](_0x133f54,_0x4d0ca4)&&!this[_0x40750a(0x1ce)](_0x133f54))return[_0x133f54];}return null;}[a0_0x3f90f1(0x158)](_0xf2505c,_0x16477d,_0x327e90){const _0x54bcfd=a0_0x3f90f1,_0x7e6c52=new Set(),_0x4217dc=[[_0xf2505c]];_0x7e6c52['add'](this[_0x54bcfd(0x159)](_0xf2505c));let _0x5942ff=null,_0x380c26=0x0;const _0x502e70=0xf;while(_0x4217dc[_0x54bcfd(0x190)]>0x0&&_0x4217dc[_0x54bcfd(0x190)]<_0x502e70){const _0x137784=_0x4217dc[_0x54bcfd(0x140)](),_0x2dd1a8=_0x137784[_0x137784[_0x54bcfd(0x190)]-0x1],_0x47f0ef=this['countAccessibleSpace'](_0x2dd1a8,_0x16477d);_0x47f0ef>_0x380c26&&(_0x380c26=_0x47f0ef,_0x5942ff=_0x137784);if(_0x47f0ef>0x14)return _0x137784[_0x54bcfd(0x27c)](0x1);const _0x382cf9=this[_0x54bcfd(0x217)](_0x2dd1a8,_0x16477d)[_0x54bcfd(0x263)](_0x5302bb=>!_0x327e90[_0x54bcfd(0x16f)](this[_0x54bcfd(0x159)](_0x5302bb)))['map'](_0x485512=>({'point':_0x485512,'score':this[_0x54bcfd(0x22d)](_0x485512,_0x16477d)}))['sort']((_0x4cf550,_0x100099)=>_0x100099[_0x54bcfd(0x130)]-_0x4cf550[_0x54bcfd(0x130)])[_0x54bcfd(0x174)](_0x2f1117=>_0x2f1117[_0x54bcfd(0x21a)]);for(const _0xecc0d2 of _0x382cf9){const _0x2e3f66=this[_0x54bcfd(0x159)](_0xecc0d2);!_0x7e6c52[_0x54bcfd(0x16f)](_0x2e3f66)&&(_0x7e6c52[_0x54bcfd(0x1be)](_0x2e3f66),_0x4217dc[_0x54bcfd(0x270)]([..._0x137784,_0xecc0d2]));}}return _0x5942ff?_0x5942ff[_0x54bcfd(0x27c)](0x1):null;}['evaluateMoveSafety'](_0x255eb7,_0x406393,_0x4c1be4,_0x1d6643=[],_0x45bb8a=new Set()){const _0x214f74=a0_0x3f90f1;let _0x44f6bf=0x0;if(_0x255eb7['x']<0x0||_0x255eb7['x']>=this['gridSize']||_0x255eb7['y']<0x0||_0x255eb7['y']>=this[_0x214f74(0x297)])return-Infinity;if(this[_0x214f74(0x1ce)](_0x255eb7))return-Infinity;const _0x5b6452=Math[_0x214f74(0x228)](_0x255eb7['x'],_0x255eb7['y'],this[_0x214f74(0x297)]-0x1-_0x255eb7['x'],this[_0x214f74(0x297)]-0x1-_0x255eb7['y']);_0x5b6452<0x2?_0x44f6bf-=(0x2-_0x5b6452)*0x1e:_0x44f6bf+=_0x5b6452*0x3;const _0x5425d1=this[_0x214f74(0x1f7)](_0x255eb7,_0x4c1be4);_0x44f6bf+=_0x5425d1*0xa;const _0xabc6cb=Math['abs'](_0x255eb7['x']-_0x406393['x'])+Math['abs'](_0x255eb7['y']-_0x406393['y']);_0x44f6bf-=_0xabc6cb*0x3;const _0x53c239=this[_0x214f74(0x297)]/0x2,_0x289a09=this['gridSize']/0x2,_0xb51c88=Math[_0x214f74(0x163)](_0x255eb7['x']-_0x53c239)+Math[_0x214f74(0x163)](_0x255eb7['y']-_0x289a09);_0x44f6bf-=_0xb51c88;const _0x4015b8=this[_0x214f74(0x217)](_0x255eb7,_0x4c1be4);_0x44f6bf+=_0x4015b8[_0x214f74(0x190)]*0xa;this[_0x214f74(0x15a)](_0x255eb7,_0x1d6643)&&(_0x44f6bf-=0x1f4);_0x5425d1<0xf&&_0xabc6cb>0x2&&(_0x44f6bf-=0x12c);_0x45bb8a['has'](this[_0x214f74(0x159)](_0x255eb7))&&(_0x44f6bf-=0xc8);!_0x45bb8a[_0x214f74(0x16f)](this['pointToKey'](_0x255eb7))&&(_0x44f6bf+=0x64);const _0x599833=Math[_0x214f74(0x163)](this[_0x214f74(0x173)][0x0]['x']-_0x406393['x'])+Math['abs'](this[_0x214f74(0x173)][0x0]['y']-_0x406393['y']);_0xabc6cb<_0x599833&&(_0x44f6bf+=0xc8);const _0x245fbc=Math['min'](_0x406393['x'],_0x406393['y'],this[_0x214f74(0x297)]-0x1-_0x406393['x'],this['gridSize']-0x1-_0x406393['y']);return _0x245fbc<0x3&&(_0x44f6bf+=(0x3-_0x245fbc)*0x32),_0x44f6bf;}['evaluateOpenSpaceMove'](_0x21607c,_0x209c31){const _0x3b7b9d=a0_0x3f90f1;let _0x221d04=0x0;if(_0x21607c['x']<0x0||_0x21607c['x']>=this[_0x3b7b9d(0x297)]||_0x21607c['y']<0x0||_0x21607c['y']>=this[_0x3b7b9d(0x297)])return-Infinity;const _0x1ae594=this['countAccessibleSpace'](_0x21607c,_0x209c31);_0x221d04+=_0x1ae594*0xa;const _0x1a88f0=this[_0x3b7b9d(0x297)]/0x2,_0x309608=this[_0x3b7b9d(0x297)]/0x2,_0x8b2210=Math['abs'](_0x21607c['x']-_0x1a88f0)+Math[_0x3b7b9d(0x163)](_0x21607c['y']-_0x309608);_0x221d04-=_0x8b2210*0x2;const _0x40381d=this['getNeighbors'](_0x21607c,_0x209c31);_0x221d04+=_0x40381d[_0x3b7b9d(0x190)]*0x8;const _0x54c39c=Math[_0x3b7b9d(0x228)](_0x21607c['x'],_0x21607c['y'],this['gridSize']-0x1-_0x21607c['x'],this[_0x3b7b9d(0x297)]-0x1-_0x21607c['y']);return _0x54c39c<0x2&&(_0x221d04-=(0x2-_0x54c39c)*0x14),_0x221d04;}[a0_0x3f90f1(0x1ce)](_0x1ea0da){const _0x140eda=a0_0x3f90f1;if(this[_0x140eda(0x173)][_0x140eda(0x27c)](0x1)['some'](_0x151e5b=>this[_0x140eda(0x1a5)](_0x151e5b,_0x1ea0da)))return!![];const _0x148897=[...this[_0x140eda(0x173)]];_0x148897[_0x140eda(0x215)](_0x1ea0da),_0x148897['pop']();const _0x44cd22=_0x148897[0x0],_0x2e4323=_0x148897[_0x140eda(0x27c)](0x1),_0x64758d=this[_0x140eda(0x217)](_0x44cd22,_0x2e4323);if(_0x64758d[_0x140eda(0x190)]===0x0)return!![];const _0x2523de=this[_0x140eda(0x1f7)](_0x44cd22,_0x2e4323);if(_0x2523de<0x5)return!![];return![];}[a0_0x3f90f1(0x1c3)](_0x14f852){const _0x185037=a0_0x3f90f1,_0x25e22c=[];for(let _0x27b863=0x1;_0x27b863<=Math['min'](_0x14f852,this[_0x185037(0x173)][_0x185037(0x190)]-0x1);_0x27b863++){_0x27b863<this[_0x185037(0x173)][_0x185037(0x190)]&&_0x25e22c[_0x185037(0x270)]({'from':this[_0x185037(0x173)][_0x27b863],'to':this['snake'][_0x27b863-0x1]});}return _0x25e22c;}['wouldCreateLoop'](_0x16d97b,_0x524a57){const _0x5590c8=a0_0x3f90f1;if(_0x524a57[_0x5590c8(0x190)]<0x2)return![];const _0x3a0330=_0x524a57[0x0],_0xa00c84=_0x524a57[0x1];if(this[_0x5590c8(0x1a5)](_0x16d97b,_0xa00c84[_0x5590c8(0x266)])&&this[_0x5590c8(0x1a5)](_0x3a0330['from'],this[_0x5590c8(0x173)][0x0]))return!![];if(_0x524a57[_0x5590c8(0x190)]>=0x3){const _0x29fb73=_0x524a57[0x2];if(this[_0x5590c8(0x1a5)](_0x16d97b,_0x29fb73[_0x5590c8(0x266)])&&this[_0x5590c8(0x1a5)](_0x3a0330[_0x5590c8(0x266)],this['snake'][0x0]))return!![];}return![];}[a0_0x3f90f1(0x1ca)](_0x21ae3b,_0x1f6092){const _0x512824=a0_0x3f90f1,_0x1670a9=this['getNeighbors'](_0x21ae3b,_0x1f6092);if(_0x1670a9[_0x512824(0x190)]===0x0)return this['direction'];const _0x5b949b=this['getRecentMoves'](0x5),_0x1edab9=_0x1670a9[_0x512824(0x263)](_0x435b6c=>!this[_0x512824(0x1ce)](_0x435b6c))[_0x512824(0x174)](_0x3970c8=>({'move':_0x3970c8,'score':this[_0x512824(0x26f)](_0x3970c8,this[_0x512824(0x1c7)],_0x1f6092,_0x5b949b)}));if(_0x1edab9[_0x512824(0x190)]===0x0){const _0x547848=_0x1670a9[_0x512824(0x263)](_0x3f74c4=>this['isValidMove'](_0x3f74c4,_0x1f6092))[_0x512824(0x174)](_0x1e5956=>({'move':_0x1e5956,'score':this[_0x512824(0x13a)](_0x1e5956,_0x1f6092,_0x5b949b)}))[_0x512824(0x151)]((_0x32857f,_0x3826d6)=>_0x3826d6[_0x512824(0x130)]-_0x32857f['score']);if(_0x547848['length']>0x0)return this[_0x512824(0x1c5)](_0x21ae3b,_0x547848[0x0][_0x512824(0x161)]);return this[_0x512824(0x224)];}_0x1edab9[_0x512824(0x151)]((_0x1f4475,_0x1557b8)=>_0x1557b8['score']-_0x1f4475[_0x512824(0x130)]);const _0x4cb284=_0x1edab9[0x0][_0x512824(0x161)];return this['getDirectionFromPoints'](_0x21ae3b,_0x4cb284);}['evaluateEmergencyMove'](_0x1cebfa,_0x1af6d9,_0x212926=[]){const _0x557e42=a0_0x3f90f1;let _0x4129bd=0x0;const _0x32e817=Math['min'](_0x1cebfa['x'],_0x1cebfa['y'],this[_0x557e42(0x297)]-0x1-_0x1cebfa['x'],this[_0x557e42(0x297)]-0x1-_0x1cebfa['y']);_0x4129bd+=_0x32e817*0xa;const _0x3f511d=this[_0x557e42(0x1f7)](_0x1cebfa,_0x1af6d9);_0x4129bd+=_0x3f511d*0x5;const _0x46c195=this['getNeighbors'](_0x1cebfa,_0x1af6d9);return _0x4129bd+=_0x46c195['length']*0x8,this[_0x557e42(0x15a)](_0x1cebfa,_0x212926)&&(_0x4129bd-=0x12c),_0x4129bd;}[a0_0x3f90f1(0x21e)](_0x20c80e,_0x1f676a){const _0x5204d3=a0_0x3f90f1;if(_0x20c80e['x']<0x0||_0x20c80e['x']>=this[_0x5204d3(0x297)]||_0x20c80e['y']<0x0||_0x20c80e['y']>=this[_0x5204d3(0x297)])return![];if(_0x1f676a[_0x5204d3(0x122)](_0x49a6a2=>this[_0x5204d3(0x1a5)](_0x49a6a2,_0x20c80e)))return![];const _0x4956d0=Math[_0x5204d3(0x228)](_0x20c80e['x'],_0x20c80e['y'],this['gridSize']-0x1-_0x20c80e['x'],this[_0x5204d3(0x297)]-0x1-_0x20c80e['y']);if(_0x4956d0<0x2&&this[_0x5204d3(0x173)][_0x5204d3(0x190)]>0x5)return![];return!![];}[a0_0x3f90f1(0x1f7)](_0xb3ecdc,_0x32d9ac){const _0x5142c6=a0_0x3f90f1,_0x3c76b6=new Set(),_0x3c81f7=[_0xb3ecdc];_0x3c76b6['add'](this[_0x5142c6(0x159)](_0xb3ecdc));let _0x3924fe=0x0;while(_0x3c81f7[_0x5142c6(0x190)]>0x0){const _0x2b080d=_0x3c81f7[_0x5142c6(0x140)]();_0x3924fe++;const _0x53de5a=this[_0x5142c6(0x217)](_0x2b080d,_0x32d9ac);for(const _0x23d726 of _0x53de5a){const _0x2fc0ee=this[_0x5142c6(0x159)](_0x23d726);!_0x3c76b6[_0x5142c6(0x16f)](_0x2fc0ee)&&(_0x3c76b6['add'](_0x2fc0ee),_0x3c81f7[_0x5142c6(0x270)](_0x23d726));}}return _0x3924fe;}[a0_0x3f90f1(0x123)](_0x4b72f7,_0x4a479d){const _0x3f924c=a0_0x3f90f1,_0x71f871={..._0x4b72f7};switch(_0x4a479d){case'up':_0x71f871['y']--;break;case _0x3f924c(0x1d3):_0x71f871['y']++;break;case _0x3f924c(0x1fd):_0x71f871['x']--;break;case'right':_0x71f871['x']++;break;}return _0x71f871;}[a0_0x3f90f1(0x159)](_0x5b9a60){return _0x5b9a60['x']+','+_0x5b9a60['y'];}[a0_0x3f90f1(0x1a5)](_0x385902,_0x5ad7b8){return _0x385902['x']===_0x5ad7b8['x']&&_0x385902['y']===_0x5ad7b8['y'];}[a0_0x3f90f1(0x217)](_0x21e442,_0x2f6f71){const _0x1494dd=a0_0x3f90f1,_0x3d3dd9=[],_0x48400b=[{'x':0x0,'y':-0x1},{'x':0x1,'y':0x0},{'x':0x0,'y':0x1},{'x':-0x1,'y':0x0}];for(const _0x32bea1 of _0x48400b){const _0x2628b2={'x':_0x21e442['x']+_0x32bea1['x'],'y':_0x21e442['y']+_0x32bea1['y']};this[_0x1494dd(0x21e)](_0x2628b2,_0x2f6f71)&&_0x3d3dd9[_0x1494dd(0x270)](_0x2628b2);}return _0x3d3dd9;}[a0_0x3f90f1(0x1c5)](_0x55e5ad,_0x444e48){const _0x3641f0=a0_0x3f90f1,_0x27990e=_0x444e48['x']-_0x55e5ad['x'],_0x1241d2=_0x444e48['y']-_0x55e5ad['y'];if(_0x27990e===0x1)return _0x3641f0(0x1b6);if(_0x27990e===-0x1)return _0x3641f0(0x1fd);if(_0x1241d2===0x1)return _0x3641f0(0x1d3);if(_0x1241d2===-0x1)return'up';return this['direction'];}[a0_0x3f90f1(0x28e)](_0x593d69,_0x47cea8){const _0x7b316f=a0_0x3f90f1,_0x38f4ec=[...this[_0x7b316f(0x173)]];for(let _0x5ba9c2=0x1;_0x5ba9c2<_0x593d69[_0x7b316f(0x190)];_0x5ba9c2++){const _0x1ae6e1=_0x593d69[_0x5ba9c2];if(!this[_0x7b316f(0x21e)](_0x1ae6e1,_0x38f4ec[_0x7b316f(0x27c)](0x1)))return![];_0x38f4ec[_0x7b316f(0x215)](_0x1ae6e1),_0x38f4ec[_0x7b316f(0x1d4)]();const _0x797951=this[_0x7b316f(0x1f7)](_0x1ae6e1,_0x38f4ec[_0x7b316f(0x27c)](0x1));if(_0x797951<0x5)return![];}return!![];}['evaluatePostFoodSafety'](_0x15d7b8,_0x27ef1a){const _0x3c6770=a0_0x3f90f1,_0x4fca3a=Math[_0x3c6770(0x228)](_0x15d7b8['x'],_0x15d7b8['y'],this[_0x3c6770(0x297)]-0x1-_0x15d7b8['x'],this['gridSize']-0x1-_0x15d7b8['y']);let _0x4da859=_0x4fca3a*0x14;const _0x5523fe=this[_0x3c6770(0x1f7)](_0x15d7b8,_0x27ef1a);_0x4da859+=_0x5523fe*0xa;const _0x564f26=this['getNeighbors'](_0x15d7b8,_0x27ef1a);return _0x4da859+=_0x564f26[_0x3c6770(0x190)]*0xa,_0x27ef1a[_0x3c6770(0x122)](_0x22e9e1=>this[_0x3c6770(0x1a5)](_0x22e9e1,_0x15d7b8))&&(_0x4da859=-Infinity),_0x4da859;}}window[a0_0x3f90f1(0x20c)]('load',()=>{new SnakeGame();});function a0_0x2c65(){const _0x2efd46=['Score:','width','AI\x20move\x20calculation\x20error:','updateEffectDurations','key','\x20秒后继续','keydown','gameLoop','marginTop','wrap','acceleration','strokeRect','hidden','可以穿越一次墙壁','toLowerCase','length','translateX(-50%)','difficulties','Drawing\x20stage\x20indicator:','shield','#FFD700','双倍得分!','setProperty','translate(0,\x200)','aiButton','rgba(255,\x20255,\x20255,\x200.1)','bold\x2060px\x20Arial','getContext','lastAISpawnTime','stageTransitionCountdown','.touch-button','flat','护盾触发!','createTextNode','neon-pulse-blue','Threshold:','pointsEqual','max','keys','#00cc7a','hasDashSkill','#2196F3','currentDifficulty','more_points','<span\x20style=\x27margin-right:\x204px\x27>','padStart','opacity\x200.3s,\x20transform\x200.5s','Btn',',\x200\x200\x2020px\x20','aiSpawnInterval','\x20XP','rgba(255,\x20255,\x20255,\x200.3)','drawLevelUpMenu','right','clearRect','evaluatePostFoodSafety','startGame','STATE\x20','吃到食物时有10%概率获得护盾','</p><p>获得技能:\x20','zIndex','add','generateSkillOptions','攻击蛇','control','获得护盾!','getRecentMoves','hard','getDirectionFromPoints','div','food','冲刺!','使用方向键选择，按空格键确认','findSafeMove','neon-pulse-green','selectSkill','lastKeyPress','willHitTail','random','click','fillText','Difficulty:','down','pop','moveAISnake','orange','AI\x20Mode:\x20OFF','dashCooldown','向前冲刺','flex-end','isAIMode','blue','justifyContent','magnet','filled','backgroundColor','boxShadow','getAIMove','toString','</span>','levelUp','button','#9C27B0','opacity','🛡️','skillPoints','100','className','1067666yaHGWL','querySelectorAll','12px','scoreElement','load','0\x200\x205px\x20#ff9900,\x200\x200\x2010px\x20#ff9900','setDifficulty','shield_chance','active','<h2>GAMEOVER</h2><p>Press\x20SPACE\x20to\x20restart</p>','countAccessibleSpace','px)','524736YCgFoP','lastKeyTime','ceil','magnetRange','left','white','hypot','transition','gameCanvas','effectDurationMultiplier','startTime','4ZBTOnD','shadowBlur','style','移动速度永久增加10%','translate(','neon-pulse-red','globalAlpha','速度降低!','addEventListener','--neon-color','addExperience','bind','618315dfvoHl','bold','Stage:','#00995c','scoreValue','unshift','#FFC107','getNeighbors','splice','bold\x2016px\x20Impact','point','速度提升','aiModeBtn','8px','isValidMove','#ffff00','moveTo','dash','selectedSkillIndex','speed_boost','direction','padding','easyBtn','cellSize','min','now','medium','nextDirection','skills','evaluateOpenSpaceMove','Level\x20Up!\x20Lv','14336NbRivX','scoreMultiplier','fill','ctx','gap','clientWidth','无法获取画布上下文!','availableSkills','updateEffects','updateAISnakes','2px\x20solid\x20','rgba(156,\x2039,\x20176,\x200.6)','effect-duration-item','handleKeyPress','</p>','护盾已消耗','speed','color','rgba(0,\x200,\x200,\x200.1\x20)','restore','foodColor','peaceful','#4CAF50','transform','font','16px\x20Arial','join','updateAggressiveAIDirection','double_jump','textContent','isDashing','10px\x20Arial','连续两次点击同一方向键往前冲刺','flex','init','stageThresholds','shieldChance','generateFood','getElementById','Speed\x20Boost','isLevelUpMenuOpen','#00ff9d','type','slowDown','icon','gameOver','aiSnakes','border','maxDuration','height','particles','floor','filter','setupCanvas','4px','from','磁力吸引!','applySkillEffect','吃了食物!','longer_effects','purple','#ff9900','rgba(0,\x200,\x200,\x200.7)','levelValue','evaluateMoveSafety','push','px,\x20','toggleAIMode','0\x200\x205px\x20#00ffff,\x200\x200\x2010px\x20#00ffff','二段跳','duration','效果结束','showStageTransition','rgba(0,\x200,\x200,\x200.9)','#ff00ff','red','aggressive','slice','fillRect','textAlign','setupEventListeners','\x20(x','updateExperienceBar','2112pUzrTC','description','2416424mOupqI','Stage\x20upgraded\x20to:','和平蛇','gameOverElement','getEffectDisplayName','moveInterval','lineTo','dashDistance','16519430eznppZ','8px\x2016px','isPathSafe','updateAIDirection','expSegments','setupAI','forEach','护盾概率','fontWeight','updatePeacefulAIDirection','20px','gridSize','checkDirectPath','generateAISnake','#0099ff','0\x200\x205px\x20#ffff00,\x200\x200\x2010px\x20#ffff00','showEffectMessage','marginLeft','yellow','parentElement','lastMoveTime','remove','multiplier','activeEffects','some','getNextPoint','name','0\x200\x205px\x20#00ff9d,\x200\x200\x2010px\x20#00ff9d','innerHTML','green','fontSize','adjustColor','translateX(-50%)\x20translateY(-20px)','easy','lineWidth','toggle','applyFoodEffect','pauseGame','score','body','canvas','arrowup','12px\x20Arial','isPaused','3054455HFnwvI','reverseControls','classList','恭喜进入阶段\x20','evaluateEmergencyMove','#F44336','9eMTpxC','得分加成','aiMoveInterval','level','shift','isStageTransition','alignItems','游戏画布元素未找到!','lastAIMoveTime','error','Magnet','11klxtyF','handleSkillSelectionKeys','log','bold\x2040px\x20Arial','fillStyle','speedBoost','display','</p><p>最终等级:\x20','升级!\x20选择一个技能\x20(Lv','arc','sort','checkAIFoodCollision','doubleScore','resumeGame','segments','center','strokeStyle','findPathToOpenSpace','pointToKey','wouldCreateLoop','AI\x20Mode:\x20','span','beginPath','stroke','flexWrap','absolute','move','createElement','abs','experience','checkAICollisions','neon-pulse-effect','食物得分增加20%','setLineDash','findPathToFood','cssText','Shield','所有效果持续时间增加20%','effect-bar','Starting\x20game\x20with\x20stage:','has','磁力吸引','update','justAteFood','snake','map','currentStage','clientHeight','方向反转!','find','draw','updateParticles','appendChild','shadowColor','createParticles','experienceToNextLevel','Slow\x20Down','#FF5252'];a0_0x2c65=function(){return _0x2efd46;};return a0_0x2c65();}
