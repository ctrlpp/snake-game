function a0_0xeb87(){const _0x2784b1=['direction','canvas','gameLoop','</p><p>最终得分:\x20','body','.difficulty','length','splice','setDifficulty','toLowerCase','level','currentDifficulty','pointsEqual','span','textContent','segments','bind','lineTo','center','resize','gameCanvas','Score:','red','bold\x2060px\x20Arial','doubleScore','bold\x2016px\x20Arial','skill-tag','8px','left','gameOverElement','style','gridSize','#0099ff','peaceful','Magnet','height','12px\x20Arial','0\x200\x205px\x20#00ffff,\x200\x200\x2010px\x20#00ffff','isDashing','OFF','#F44336','4xGHLGN','active','flexWrap','shield_chance','addEventListener','levelUp','setupAI','border','load','now','food','shieldChance','translate(0,\x200)','287WEbqOe','applySkillEffect','selectSkill','slice','gray','moveTo','willHitTail','20px','easyBtn','type','stageTransitionCountdown','#2196F3','handleSkillSelectionKeys','#ff00ff','cssText','key','磁力吸引!','backgroundColor','84924ZOpIkS','967995oqywQF','startGame','clearRect','absolute','translateX(-50%)\x20translateY(-20px)','fontWeight','more_points','sort','rgba(0,\x20255,\x20157,\x200.3)','Difficulty:','filled','evaluateMoveSafety','lastAISpawnTime','updateEffects','moveAISnake','getNeighbors','rgba(255,\x20255,\x20255,\x200.3)','orange','opacity','easy','findSafeMove','transform','flex','食物得分增加20%','双倍得分!','push','aggressive','效果结束','unshift','3652350ipmaVr','100','158632YlUAPh','checkStageUpgrade','down','point','some','#00BCD4','boxShadow','px)','random','护盾已消耗','GameOver','isValidMove','rgba(0,\x200,\x200,\x200.9)','clientWidth','672672OnzFjt','click','update','fillText','zIndex','toggle','availableSkills','longer_effects','护盾触发!','skillPoints','acceleration','isAIMode','stroke','移动速度永久增加10%','medium','aiSpawnInterval','init','hypot','arc','setupEventListeners','background:\x20rgba(0,0,0,0.7);\x20color:\x20white;\x20padding:\x203px\x208px;\x20border-radius:\x2012px;\x20font-size:\x2012px;\x20display:\x20flex;\x20align-items:\x20center;\x20box-shadow:\x200\x200\x205px\x20rgba(0,255,157,0.5);','Stage:','save','abs','scoreElement','getRecentMoves','rgba(0,\x200,\x200,\x200.7)','.difficulty\x20button','wrap','justifyContent','toggleAIMode','effect-duration-item','isStageTransition','duration','translate(','hardBtn','updateExperienceBar','evaluateEmergencyMove','experience','50%','lastAIMoveTime','filter','</p><p>获得技能:\x20','clientHeight','evaluateOpenSpaceMove','font','add','升级!\x20选择一个技能\x20(Lv','div','applyFoodEffect','二段跳','lastKeyPress','速度降低!','mediumBtn','updateParticles','setProperty','</p>','.touch-button','querySelectorAll','getAIMove','globalAlpha','beginPath','from','Starting\x20game\x20with\x20stage:','wouldCreateLoop','effect-bar','arrowup','snake','px,\x20','flat','difficulties','getEffectDisplayName','min','Base\x20speed:','aiSnakes','maxDuration','fillStyle','foodColor','effectDurations','showStageTransition','fillRect','getNextPoint','aiButton','padding','#333','shield','shift','expSegments','purple','move','gap','shadowColor','justAteFood','textAlign','setLineDash','resumeGame','\x20XP','pop','pauseGame','nextDirection','游戏将在\x20','#FFC107','rgba(0,\x200,\x200,\x200.1\x20)','generateSkillOptions','Shield','isPaused','innerHTML','effectDurationMultiplier','addExperience','5104010ThBWXG','lastKeyTime','#ff9900','speed_boost','createParticles','#00ffff','gold','hasDashSkill','自动吸引附近食物','speed','translateX(-50%)\x20translateY(-10px)','selectedSkillIndex','可以穿越一次墙壁','stageThresholds','toString','updateAggressiveAIDirection','control','scoreMultiplier','恭喜进入阶段\x20','14px','\x20(x','bold','checkAIFoodCollision','display','aiModeBtn','setupCanvas','appendChild','4867197ZVmgjl','right','hidden','Level\x20Up!\x20Lv','攻击蛇','multiplier','ceil','color','alignItems','className','join','pointToKey','floor','moveInterval','speedBoost','log','reverseControls','向前冲刺','#FFD700','和平蛇','neon-pulse-red','checkAICollisions','handleKeyPress','generateFood','translateX(-50%)','createTextNode','padStart','classList','findPathToOpenSpace','updateAIDirection','Btn','670tfUehR','yellow','drawLevelUpMenu','0\x200\x205px\x20#00ff9d,\x200\x200\x2010px\x20#00ff9d','getDirectionFromPoints','draw','Threshold:','marginTop','lineWidth','Drawing\x20stage\x20indicator:','冲刺!','方向反转!','flex-end','activeEffects','none','isLevelUpMenuOpen','0\x200\x205px\x20#ff9900,\x200\x200\x2010px\x20#ff9900','map','#00995c','countAccessibleSpace','score','🛡️','fontSize','green','slowDown','arrowdown','adjustColor','has','effect-name','forEach','neon-pulse-green','\x20秒后继续','cellSize','error','keys','#9C27B0','#ffff00','remove','updatePeacefulAIDirection','Speed\x20Boost','吃到食物时有10%概率获得护盾','currentStage','skills','startTime','磁力吸引','values','generateAISnake','0\x200\x205px\x20#ff00ff,\x200\x200\x2010px\x20#ff00ff','#00ff9d','neon-pulse-effect','lastMoveTime','4px','magnetRange','keydown','护盾概率','速度提升!','max','position','</span>','createElement','hard','shadowBlur','evaluatePostFoodSafety','#FF5252','showEffectMessage','#00cc7a','double_jump','updateEffectDurations','width','</p><p>最终等级:\x20','2px\x20solid\x20','<span\x20style=\x27margin-right:\x204px\x27>','parentElement','strokeStyle','rgba(156,\x2039,\x20176,\x200.6)','checkDirectPath','<h2>游戏结束</h2><p>按空格键重新开始</p>','levelValue','exp-segment\x20','neon-pulse-blue','blue','getElementById','<p>当前阶段:\x20','dash','icon','updateAISnakes','Stage\x20upgraded\x20to:','无法获取画布上下文!','magnet','experienceToNextLevel','find','white','16px\x20Arial','gameOver','ctx','#4CAF50','12px','dashCooldown','top','isPathSafe','dashDistance','aiMoveInterval'];a0_0xeb87=function(){return _0x2784b1;};return a0_0xeb87();}const a0_0x2c19d8=a0_0x3255;(function(_0x12895f,_0x317a65){const _0x885098=a0_0x3255,_0x308103=_0x12895f();while(!![]){try{const _0x2a554d=-parseInt(_0x885098(0x1db))/0x1+parseInt(_0x885098(0x208))/0x2+-parseInt(_0x885098(0x10d))/0x3+parseInt(_0x885098(0x1bb))/0x4*(parseInt(_0x885098(0xf2))/0x5)+parseInt(_0x885098(0x1f8))/0x6+parseInt(_0x885098(0x1c8))/0x7*(parseInt(_0x885098(0x1fa))/0x8)+parseInt(_0x885098(0x1da))/0x9*(parseInt(_0x885098(0x12c))/0xa);if(_0x2a554d===_0x317a65)break;else _0x308103['push'](_0x308103['shift']());}catch(_0x18c0c1){_0x308103['push'](_0x308103['shift']());}}}(a0_0xeb87,0xc85be));function a0_0x3255(_0x141464,_0x10fae8){const _0xeb8730=a0_0xeb87();return a0_0x3255=function(_0x32554d,_0x18fc78){_0x32554d=_0x32554d-0xe7;let _0x53376a=_0xeb8730[_0x32554d];return _0x53376a;},a0_0x3255(_0x141464,_0x10fae8);}class SnakeGame{constructor(){const _0x3db5ce=a0_0x3255;this[_0x3db5ce(0x193)]=document['getElementById'](_0x3db5ce(0x1a6));if(!this[_0x3db5ce(0x193)]){console[_0x3db5ce(0x14d)]('游戏画布元素未找到!');return;}this[_0x3db5ce(0x18a)]=this[_0x3db5ce(0x193)]['getContext']('2d');if(!this['ctx']){console['error'](_0x3db5ce(0x183));return;}this['scoreElement']=document['getElementById']('scoreValue')||{'textContent':''},this[_0x3db5ce(0x1af)]=document[_0x3db5ce(0x17d)](_0x3db5ce(0x189))||document[_0x3db5ce(0x167)](_0x3db5ce(0x238)),this[_0x3db5ce(0x25a)]=document[_0x3db5ce(0x17d)](_0x3db5ce(0x10a))||document[_0x3db5ce(0x167)]('button'),this['gridSize']=0x14,this[_0x3db5ce(0x24b)]=[],this[_0x3db5ce(0x1c5)]=null,this[_0x3db5ce(0x192)]=_0x3db5ce(0x10e),this[_0x3db5ce(0xe8)]='right',this[_0x3db5ce(0x140)]=0x0,this['gameLoop']=null,this[_0x3db5ce(0xee)]=![],this['particles']=[],this[_0x3db5ce(0x213)]=![],this[_0x3db5ce(0x230)]=0x0,this[_0x3db5ce(0x191)]=0x64,this[_0x3db5ce(0x264)]=![],this[_0x3db5ce(0x255)]=null,this[_0x3db5ce(0x139)]={},this['level']=0x1,this[_0x3db5ce(0x22e)]=0x0,this[_0x3db5ce(0x185)]=0x64,this[_0x3db5ce(0x156)]=[],this[_0x3db5ce(0x20e)]=[],this[_0x3db5ce(0x211)]=0x0,this[_0x3db5ce(0x13b)]=![],this[_0x3db5ce(0x252)]=[],this[_0x3db5ce(0x217)]=0x2710,this[_0x3db5ce(0x1e7)]=0x0,this[_0x3db5ce(0x24e)]={'easy':{'speed':0xc8,'acceleration':0x0},'medium':{'speed':0x78,'acceleration':0.5},'hard':{'speed':0x46,'acceleration':0x1}},this[_0x3db5ce(0x19d)]=_0x3db5ce(0x1ee),this[_0x3db5ce(0x10b)](),this['setupEventListeners'](),this[_0x3db5ce(0x1c1)](),this[_0x3db5ce(0x218)]();}[a0_0x2c19d8(0x1d4)](_0x4ebc88){const _0x5380d4=a0_0x2c19d8;if(!this[_0x5380d4(0x13b)])return;const _0x49729f=_0x4ebc88['key'][_0x5380d4(0x19b)]();switch(_0x49729f){case _0x5380d4(0x24a):this['selectedSkillIndex']=(this[_0x5380d4(0xfd)]-0x1+this[_0x5380d4(0x20e)][_0x5380d4(0x198)])%this['availableSkills'][_0x5380d4(0x198)],this['draw'](),this['drawLevelUpMenu']();break;case _0x5380d4(0x145):this['selectedSkillIndex']=(this[_0x5380d4(0xfd)]+0x1)%this['availableSkills'][_0x5380d4(0x198)],this[_0x5380d4(0x131)](),this[_0x5380d4(0x12e)]();break;case'\x20':this[_0x5380d4(0x1ca)](this[_0x5380d4(0x20e)][this[_0x5380d4(0xfd)]]['id']),this[_0x5380d4(0x131)]();break;}}['setupCanvas'](){const _0x3ee766=a0_0x2c19d8,_0x297988=this[_0x3ee766(0x193)][_0x3ee766(0x174)],_0x108c87=Math[_0x3ee766(0x250)](_0x297988[_0x3ee766(0x207)],_0x297988[_0x3ee766(0x233)]);this['canvas'][_0x3ee766(0x170)]=_0x108c87,this[_0x3ee766(0x193)][_0x3ee766(0x1b5)]=_0x108c87,this[_0x3ee766(0x14c)]=Math['floor'](_0x108c87/this[_0x3ee766(0x1b1)]);const _0xa5bfd8=this[_0x3ee766(0x14c)]*this[_0x3ee766(0x1b1)];this[_0x3ee766(0x193)][_0x3ee766(0x170)]=_0xa5bfd8,this['canvas']['height']=_0xa5bfd8,this[_0x3ee766(0x193)][_0x3ee766(0x1b0)][_0x3ee766(0x170)]=_0x108c87+'px',this[_0x3ee766(0x193)][_0x3ee766(0x1b0)]['height']=_0x108c87+'px';}[a0_0x2c19d8(0x21b)](){const _0xe392ba=a0_0x2c19d8;document[_0xe392ba(0x1bf)]('keydown',this[_0xe392ba(0x123)]['bind'](this)),document[_0xe392ba(0x1bf)](_0xe392ba(0x161),this[_0xe392ba(0x1d4)][_0xe392ba(0x1a2)](this)),document[_0xe392ba(0x17d)](_0xe392ba(0x1d0))[_0xe392ba(0x1bf)]('click',()=>this[_0xe392ba(0x19a)](_0xe392ba(0x1ee))),document[_0xe392ba(0x17d)](_0xe392ba(0x23d))[_0xe392ba(0x1bf)](_0xe392ba(0x209),()=>this[_0xe392ba(0x19a)](_0xe392ba(0x216))),document[_0xe392ba(0x17d)](_0xe392ba(0x22b))[_0xe392ba(0x1bf)]('click',()=>this[_0xe392ba(0x19a)](_0xe392ba(0x168)));let _0x5ba2c9;window[_0xe392ba(0x1bf)](_0xe392ba(0x1a5),()=>{clearTimeout(_0x5ba2c9),_0x5ba2c9=setTimeout(()=>{const _0x382238=a0_0x3255;this[_0x382238(0x10b)](),this[_0x382238(0x131)]();},0x64);});}['setupAI'](){const _0x27e537=a0_0x2c19d8;this[_0x27e537(0x25a)]&&this[_0x27e537(0x25a)][_0x27e537(0x1bf)](_0x27e537(0x209),()=>{const _0x15c57a=_0x27e537;this[_0x15c57a(0x226)]();});}[a0_0x2c19d8(0x218)](){const _0x588def=a0_0x2c19d8;this['level']=0x1,this['experience']=0x0,this[_0x588def(0x185)]=0x1e,this[_0x588def(0x156)]=[],this['availableSkills']=[],this[_0x588def(0x211)]=0x0,this[_0x588def(0x13b)]=![],this['selectedSkillIndex']=0x0,this['isStageTransition']=![],this[_0x588def(0x1d2)]=0x0,this[_0x588def(0x103)]=0x1,this['effectDurationMultiplier']=0x1,this['shieldChance']=0x0,this['magnetRange']=0x0,this[_0x588def(0x155)]=0x1,this[_0x588def(0xff)]=[0x64,0x12c],this[_0x588def(0x23b)]=null,this['lastKeyTime']=0x0,this[_0x588def(0x18d)]=0x0,this[_0x588def(0x1b8)]=![],this[_0x588def(0x190)]=0x0,this['hasDashSkill']=![],this[_0x588def(0x24b)]=[{'x':0xa,'y':0xa},{'x':0x9,'y':0xa},{'x':0x8,'y':0xa}],this[_0x588def(0x192)]=_0x588def(0x10e),this[_0x588def(0xe8)]=_0x588def(0x10e),this[_0x588def(0x140)]=0x0,this[_0x588def(0x220)]['textContent']=this[_0x588def(0x140)],this[_0x588def(0x22c)](),this[_0x588def(0x16f)](),this[_0x588def(0x1af)][_0x588def(0xef)]=_0x588def(0x178),this[_0x588def(0x1af)]['classList'][_0x588def(0x236)](_0x588def(0x10f)),this[_0x588def(0x124)](),document[_0x588def(0x242)](_0x588def(0x197))[_0x588def(0x149)](_0x4b9c78=>_0x4b9c78[_0x588def(0x1b0)][_0x588def(0x109)]=_0x588def(0x13a)),this[_0x588def(0x1dc)]();}[a0_0x2c19d8(0x19a)](_0x207ca4){const _0x102d1f=a0_0x2c19d8;this['currentDifficulty']=_0x207ca4,document[_0x102d1f(0x242)](_0x102d1f(0x223))['forEach'](_0x2f6d9f=>{const _0x55e55f=_0x102d1f;_0x2f6d9f[_0x55e55f(0x128)]['remove'](_0x55e55f(0x1bc));}),document['getElementById'](_0x207ca4+_0x102d1f(0x12b))['classList'][_0x102d1f(0x236)](_0x102d1f(0x1bc)),this[_0x102d1f(0x194)]&&(clearInterval(this[_0x102d1f(0x194)]),this[_0x102d1f(0x1dc)]());}[a0_0x2c19d8(0x1dc)](){const _0x4a7821=a0_0x2c19d8;console[_0x4a7821(0x11c)](_0x4a7821(0x247),this[_0x4a7821(0x155)]);let _0x445edd;switch(this['currentStage']){case 0x1:_0x445edd=_0x4a7821(0x1ee);break;case 0x2:_0x445edd='medium';break;case 0x3:_0x445edd=_0x4a7821(0x168);break;default:_0x445edd=_0x4a7821(0x1ee);}let _0x4edc62=this['difficulties'][_0x445edd][_0x4a7821(0xfb)];console['log'](_0x4a7821(0x21d),this[_0x4a7821(0x155)],_0x4a7821(0x1e4),_0x445edd,_0x4a7821(0x251),_0x4edc62);if(this['activeEffects'][_0x4a7821(0x11b)])_0x4edc62/=this[_0x4a7821(0x139)][_0x4a7821(0x11b)]['multiplier'];else this[_0x4a7821(0x139)][_0x4a7821(0x144)]&&(_0x4edc62/=this[_0x4a7821(0x139)][_0x4a7821(0x144)]['multiplier']);const _0x4732b7=Math[_0x4a7821(0x164)](0x32,_0x4edc62);this['gameLoop']=setInterval(()=>this[_0x4a7821(0x20a)](),_0x4732b7);}[a0_0x2c19d8(0x123)](_0x5b89d4){const _0x33172f=a0_0x2c19d8;if(this['hasDashSkill']&&!this['isPaused']&&!this[_0x33172f(0x13b)]){const _0x3b62b4=Date['now'](),_0x334fa7=_0x5b89d4[_0x33172f(0x1d7)][_0x33172f(0x19b)]();_0x334fa7===this[_0x33172f(0x23b)]&&_0x3b62b4-this[_0x33172f(0xf3)]<0x12c&&this[_0x33172f(0x18d)]<=0x0&&(this[_0x33172f(0x1b8)]=!![],this[_0x33172f(0x190)]=0x3,this[_0x33172f(0x18d)]=0x1388,this[_0x33172f(0x16c)](_0x33172f(0x136),_0x33172f(0x17c))),this[_0x33172f(0x23b)]=_0x334fa7,this[_0x33172f(0xf3)]=_0x3b62b4;}const _0x463c0e=_0x5b89d4[_0x33172f(0x1d7)][_0x33172f(0x19b)]();if(_0x463c0e==='i'){this[_0x33172f(0x226)]();return;}if(_0x463c0e==='\x20'){this[_0x33172f(0xee)]=!this[_0x33172f(0xee)];this[_0x33172f(0x1af)]['classList']['contains'](_0x33172f(0x10f))?console[_0x33172f(0x11c)](_0x33172f(0x204)):this[_0x33172f(0x218)]();return;}if(!this['isAIMode']){const _0x324987={'arrowup':'up','arrowdown':_0x33172f(0x1fc),'arrowleft':_0x33172f(0x1ae),'arrowright':_0x33172f(0x10e),'w':'up','s':_0x33172f(0x1fc),'a':_0x33172f(0x1ae),'d':_0x33172f(0x10e)};if(_0x324987[_0x463c0e]){let _0xc70e15=_0x324987[_0x463c0e];if(this[_0x33172f(0x139)][_0x33172f(0x11d)]){const _0x2f920a={'up':_0x33172f(0x1fc),'down':'up','left':_0x33172f(0x10e),'right':_0x33172f(0x1ae)};_0xc70e15=_0x2f920a[_0xc70e15];}const _0x44d6d5={'up':'down','down':'up','left':_0x33172f(0x10e),'right':_0x33172f(0x1ae)};if(this[_0x33172f(0x192)]!==_0x44d6d5[_0xc70e15]){this[_0x33172f(0xe8)]=_0xc70e15;const _0x146d6d=document[_0x33172f(0x17d)](_0x33172f(0x1a6));if(_0x146d6d){const _0xbb2b3c=_0x146d6d['style']['transform'];let _0x500655=0x0;const _0xf7cd9f=setInterval(()=>{const _0xd1847b=_0x33172f,_0x5d1f1a=(Math['random']()-0.5)*0x4,_0x4a8596=(Math[_0xd1847b(0x202)]()-0.5)*0x4;_0x146d6d[_0xd1847b(0x1b0)]['transform']=_0xd1847b(0x22a)+_0x5d1f1a+_0xd1847b(0x24c)+_0x4a8596+_0xd1847b(0x201),_0x500655++,_0x500655>=0x8&&(clearInterval(_0xf7cd9f),_0x146d6d[_0xd1847b(0x1b0)][_0xd1847b(0x1f0)]=_0xbb2b3c);},0x14);}}}}}[a0_0x2c19d8(0x226)](){const _0x3df79b=a0_0x2c19d8;this['isAIMode']=!this[_0x3df79b(0x213)],this[_0x3df79b(0x25a)][_0x3df79b(0x1a0)]='AI\x20Mode:\x20'+(this[_0x3df79b(0x213)]?'ON':_0x3df79b(0x1b9)),this[_0x3df79b(0x25a)]['classList'][_0x3df79b(0x20d)]('active'),this['lastAIMoveTime']=0x0;}[a0_0x2c19d8(0x243)](){const _0x6f5b8=a0_0x2c19d8,_0x4522b7=this['snake'][0x0];if(!this['food'])return this[_0x6f5b8(0x192)];if(_0x4522b7['x']<this[_0x6f5b8(0x1c5)]['x'])return _0x6f5b8(0x10e);else{if(_0x4522b7['x']>this[_0x6f5b8(0x1c5)]['x'])return _0x6f5b8(0x1ae);else{if(_0x4522b7['y']<this[_0x6f5b8(0x1c5)]['y'])return _0x6f5b8(0x1fc);else{if(_0x4522b7['y']>this[_0x6f5b8(0x1c5)]['y'])return'up';}}}return this[_0x6f5b8(0x192)];}[a0_0x2c19d8(0x124)](){const _0x24ed82=a0_0x2c19d8,_0x5a477b=[_0x24ed82(0x16b),_0x24ed82(0x18b),'#2196F3','#FFC107',_0x24ed82(0x14f),_0x24ed82(0x1ff)],_0x547cd5=Math[_0x24ed82(0x119)](Math['random']()*_0x5a477b[_0x24ed82(0x198)]);this[_0x24ed82(0x255)]=_0x5a477b[_0x547cd5];while(!![]){this['food']={'x':Math['floor'](Math[_0x24ed82(0x202)]()*this[_0x24ed82(0x1b1)]),'y':Math[_0x24ed82(0x119)](Math['random']()*this[_0x24ed82(0x1b1)])};let _0x3f8242=this[_0x24ed82(0x24b)][_0x24ed82(0x1fe)](_0x7a5e1c=>_0x7a5e1c['x']===this[_0x24ed82(0x1c5)]['x']&&_0x7a5e1c['y']===this[_0x24ed82(0x1c5)]['y']);if(!_0x3f8242)for(const _0x19b0a5 of this[_0x24ed82(0x252)]){if(_0x19b0a5[_0x24ed82(0x1a1)][_0x24ed82(0x1fe)](_0x4e98c5=>_0x4e98c5['x']===this['food']['x']&&_0x4e98c5['y']===this[_0x24ed82(0x1c5)]['y'])){_0x3f8242=!![];break;}}if(!_0x3f8242)break;}}['generateAISnake'](){const _0x13d112=a0_0x2c19d8,_0x480278=this[_0x13d112(0x19c)]>0x2&&Math['random']()<0.3+this[_0x13d112(0x19c)]*0.05,_0x58440e=Math[_0x13d112(0x250)](0x5,0x2+Math[_0x13d112(0x119)](this[_0x13d112(0x19c)]/0x3)),_0x5900f7=0x1+this[_0x13d112(0x19c)]*0.05;let _0x4e4051,_0x8eb18f,_0x48a7ba=![];while(!_0x48a7ba){_0x4e4051=Math[_0x13d112(0x119)](Math[_0x13d112(0x202)]()*this[_0x13d112(0x1b1)]),_0x8eb18f=Math[_0x13d112(0x119)](Math[_0x13d112(0x202)]()*this[_0x13d112(0x1b1)]),_0x48a7ba=!![];if(this[_0x13d112(0x24b)][_0x13d112(0x1fe)](_0x52079b=>_0x52079b['x']===_0x4e4051&&_0x52079b['y']===_0x8eb18f)){_0x48a7ba=![];continue;}for(const _0x102633 of this[_0x13d112(0x252)]){if(_0x102633['segments'][_0x13d112(0x1fe)](_0x2c7ef8=>_0x2c7ef8['x']===_0x4e4051&&_0x2c7ef8['y']===_0x8eb18f)){_0x48a7ba=![];break;}}}const _0xfe0204=[],_0x177828=['up',_0x13d112(0x1fc),_0x13d112(0x1ae),_0x13d112(0x10e)][Math[_0x13d112(0x119)](Math[_0x13d112(0x202)]()*0x4)];for(let _0x252527=0x0;_0x252527<_0x58440e;_0x252527++){switch(_0x177828){case'up':_0xfe0204[_0x13d112(0x1f4)]({'x':_0x4e4051,'y':_0x8eb18f+_0x252527});break;case'down':_0xfe0204[_0x13d112(0x1f4)]({'x':_0x4e4051,'y':_0x8eb18f-_0x252527});break;case _0x13d112(0x1ae):_0xfe0204['push']({'x':_0x4e4051+_0x252527,'y':_0x8eb18f});break;case'right':_0xfe0204[_0x13d112(0x1f4)]({'x':_0x4e4051-_0x252527,'y':_0x8eb18f});break;}}this[_0x13d112(0x252)][_0x13d112(0x1f4)]({'type':_0x480278?_0x13d112(0x1f5):_0x13d112(0x1b3),'segments':_0xfe0204,'direction':_0x177828,'nextDirection':_0x177828,'speedMultiplier':_0x5900f7,'lastMoveTime':0x0,'moveInterval':_0x480278?0x96/_0x5900f7:0xc8/_0x5900f7});}[a0_0x2c19d8(0x181)](){const _0xa97387=a0_0x2c19d8,_0x80d74d=Date[_0xa97387(0x1c4)]();for(let _0x4a2c2e=this[_0xa97387(0x252)][_0xa97387(0x198)]-0x1;_0x4a2c2e>=0x0;_0x4a2c2e--){const _0x272988=this[_0xa97387(0x252)][_0x4a2c2e];if(_0x80d74d-_0x272988[_0xa97387(0x15e)]<_0x272988[_0xa97387(0x11a)])continue;this[_0xa97387(0x12a)](_0x272988),this[_0xa97387(0x1e9)](_0x272988),_0x272988[_0xa97387(0x15e)]=_0x80d74d;if(this['checkAICollisions'](_0x272988)){this[_0xa97387(0x252)][_0xa97387(0x199)](_0x4a2c2e,0x1);continue;}_0x272988[_0xa97387(0x1d1)]==='peaceful'&&this[_0xa97387(0x108)](_0x272988)&&(_0x272988[_0xa97387(0x1a1)][_0xa97387(0x1f4)]({..._0x272988['segments'][_0x272988[_0xa97387(0x1a1)][_0xa97387(0x198)]-0x1]}),this['generateFood'](),this[_0xa97387(0x16c)]((_0x272988[_0xa97387(0x1d1)]===_0xa97387(0x1f5)?_0xa97387(0x111):'和平蛇')+'吃了食物!',_0x272988[_0xa97387(0x1d1)]===_0xa97387(0x1f5)?_0xa97387(0x1ba):_0xa97387(0x18b)));}}['updateAIDirection'](_0x38e4f6){const _0x531d9f=a0_0x2c19d8;_0x38e4f6['type']===_0x531d9f(0x1b3)?this[_0x531d9f(0x152)](_0x38e4f6):this[_0x531d9f(0x101)](_0x38e4f6);}[a0_0x2c19d8(0x152)](_0x380d5a){const _0x1b6814=a0_0x2c19d8;if(!this[_0x1b6814(0x1c5)])return;const _0x54c8a6=_0x380d5a[_0x1b6814(0x1a1)][0x0],_0x433d8f=this[_0x1b6814(0x1c5)]['x']-_0x54c8a6['x'],_0x128f56=this[_0x1b6814(0x1c5)]['y']-_0x54c8a6['y'];Math[_0x1b6814(0x21f)](_0x433d8f)>Math[_0x1b6814(0x21f)](_0x128f56)?_0x380d5a['nextDirection']=_0x433d8f>0x0?_0x1b6814(0x10e):'left':_0x380d5a[_0x1b6814(0xe8)]=_0x128f56>0x0?'down':'up';const _0xe57158={'up':_0x1b6814(0x1fc),'down':'up','left':_0x1b6814(0x10e),'right':_0x1b6814(0x1ae)};_0x380d5a['nextDirection']===_0xe57158[_0x380d5a[_0x1b6814(0x192)]]&&(_0x380d5a[_0x1b6814(0xe8)]=_0x380d5a['direction']);}[a0_0x2c19d8(0x101)](_0x110402){const _0x3159ad=a0_0x2c19d8,_0x593d8a=_0x110402['segments'][0x0],_0x4d4450=this['snake'][0x0],_0x5643c5=_0x4d4450['x']-_0x593d8a['x'],_0x476f81=_0x4d4450['y']-_0x593d8a['y'];Math[_0x3159ad(0x21f)](_0x5643c5)>Math[_0x3159ad(0x21f)](_0x476f81)?_0x110402[_0x3159ad(0xe8)]=_0x5643c5>0x0?_0x3159ad(0x10e):_0x3159ad(0x1ae):_0x110402[_0x3159ad(0xe8)]=_0x476f81>0x0?_0x3159ad(0x1fc):'up';const _0x46c463={'up':'down','down':'up','left':_0x3159ad(0x10e),'right':'left'};_0x110402['nextDirection']===_0x46c463[_0x110402['direction']]&&(_0x110402[_0x3159ad(0xe8)]=_0x110402[_0x3159ad(0x192)]);}[a0_0x2c19d8(0x1e9)](_0x4c445d){const _0x4d084c=a0_0x2c19d8;_0x4c445d[_0x4d084c(0x192)]=_0x4c445d[_0x4d084c(0xe8)];const _0x2649f4={..._0x4c445d[_0x4d084c(0x1a1)][0x0]};switch(_0x4c445d['direction']){case'up':_0x2649f4['y']--;break;case _0x4d084c(0x1fc):_0x2649f4['y']++;break;case'left':_0x2649f4['x']--;break;case'right':_0x2649f4['x']++;break;}_0x4c445d['segments'][_0x4d084c(0x1f7)](_0x2649f4),_0x4c445d['segments'][_0x4d084c(0x269)]();}[a0_0x2c19d8(0x122)](_0x5f1047){const _0x102707=a0_0x2c19d8,_0x3a4aaa=_0x5f1047['segments'][0x0];if(_0x3a4aaa['x']<0x0||_0x3a4aaa['x']>=this[_0x102707(0x1b1)]||_0x3a4aaa['y']<0x0||_0x3a4aaa['y']>=this[_0x102707(0x1b1)])return!![];for(let _0x394895=0x1;_0x394895<_0x5f1047[_0x102707(0x1a1)][_0x102707(0x198)];_0x394895++){if(_0x3a4aaa['x']===_0x5f1047[_0x102707(0x1a1)][_0x394895]['x']&&_0x3a4aaa['y']===_0x5f1047[_0x102707(0x1a1)][_0x394895]['y'])return!![];}for(const _0x16bdfd of this[_0x102707(0x252)]){if(_0x16bdfd===_0x5f1047)continue;for(const _0x57ed27 of _0x16bdfd[_0x102707(0x1a1)]){if(_0x3a4aaa['x']===_0x57ed27['x']&&_0x3a4aaa['y']===_0x57ed27['y'])return!![];}}return![];}[a0_0x2c19d8(0x108)](_0x16899){const _0x2cfd68=a0_0x2c19d8,_0x12a92a=_0x16899[_0x2cfd68(0x1a1)][0x0];return this[_0x2cfd68(0x1c5)]&&_0x12a92a['x']===this[_0x2cfd68(0x1c5)]['x']&&_0x12a92a['y']===this['food']['y'];}[a0_0x2c19d8(0x20a)](){const _0x2e0496=a0_0x2c19d8;if(this[_0x2e0496(0xee)])return;this[_0x2e0496(0x1fb)]();if(this['isAIMode'])try{this[_0x2e0496(0xe8)]=this['getAIMove']();}catch(_0x1435e8){console['error']('AI\x20move\x20calculation\x20error:',_0x1435e8),this[_0x2e0496(0x213)]=![],this[_0x2e0496(0x25a)][_0x2e0496(0x1a0)]='AI\x20Mode:\x20OFF',this[_0x2e0496(0x25a)][_0x2e0496(0x128)][_0x2e0496(0x151)](_0x2e0496(0x1bc));}this[_0x2e0496(0x192)]=this[_0x2e0496(0xe8)];let _0x403842;if(this[_0x2e0496(0x1b8)]&&this[_0x2e0496(0x190)]>0x0){_0x403842={...this[_0x2e0496(0x24b)][0x0]};for(let _0x209d6d=0x0;_0x209d6d<0x1;_0x209d6d++){switch(this[_0x2e0496(0x192)]){case'up':_0x403842['y']--;break;case'down':_0x403842['y']++;break;case _0x2e0496(0x1ae):_0x403842['x']--;break;case _0x2e0496(0x10e):_0x403842['x']++;break;}this[_0x2e0496(0x24b)][_0x2e0496(0x1f7)]({..._0x403842}),this[_0x2e0496(0x190)]--;if(_0x403842['x']<0x0||_0x403842['x']>=this['gridSize']||_0x403842['y']<0x0||_0x403842['y']>=this['gridSize']||this[_0x2e0496(0x24b)][_0x2e0496(0x1fe)]((_0x5cf5c2,_0x511604)=>_0x511604>0x0&&_0x5cf5c2['x']===_0x403842['x']&&_0x5cf5c2['y']===_0x403842['y'])){if(this[_0x2e0496(0x139)][_0x2e0496(0x25d)]){delete this[_0x2e0496(0x139)][_0x2e0496(0x25d)],this[_0x2e0496(0x16c)](_0x2e0496(0x203),_0x2e0496(0x260)),this['snake'][_0x2e0496(0x269)](),this[_0x2e0496(0x1b8)]=![],this[_0x2e0496(0x190)]=0x0;return;}else{this[_0x2e0496(0x189)]();return;}}}this['dashDistance']===0x0&&(this[_0x2e0496(0x1b8)]=![]);return;}_0x403842={...this[_0x2e0496(0x24b)][0x0]};switch(this[_0x2e0496(0x192)]){case'up':_0x403842['y']--;break;case _0x2e0496(0x1fc):_0x403842['y']++;break;case'left':_0x403842['x']--;break;case'right':_0x403842['x']++;break;}if(_0x403842['x']<0x0||_0x403842['x']>=this['gridSize']||_0x403842['y']<0x0||_0x403842['y']>=this[_0x2e0496(0x1b1)]){if(this[_0x2e0496(0x139)][_0x2e0496(0x25d)]){delete this[_0x2e0496(0x139)]['shield'],this['showEffectMessage'](_0x2e0496(0x203),_0x2e0496(0x260)),this['snake'][_0x2e0496(0x269)]();return;}this['gameOver']();return;}if(this[_0x2e0496(0x24b)][_0x2e0496(0x1fe)](_0x567bd9=>_0x567bd9['x']===_0x403842['x']&&_0x567bd9['y']===_0x403842['y'])){if(this[_0x2e0496(0x139)][_0x2e0496(0x25d)]){delete this[_0x2e0496(0x139)]['shield'],this[_0x2e0496(0x16c)](_0x2e0496(0x203),_0x2e0496(0x260)),this[_0x2e0496(0x24b)][_0x2e0496(0x269)]();return;}this['gameOver']();return;}for(let _0x27d102=this[_0x2e0496(0x252)][_0x2e0496(0x198)]-0x1;_0x27d102>=0x0;_0x27d102--){const _0x3d02bd=this[_0x2e0496(0x252)][_0x27d102];if(_0x3d02bd[_0x2e0496(0x1a1)]['some'](_0x55db30=>_0x55db30['x']===_0x403842['x']&&_0x55db30['y']===_0x403842['y'])){const _0x49628f=_0x3d02bd[_0x2e0496(0x1d1)]===_0x2e0496(0x1f5)?0x32:0x1e;this[_0x2e0496(0xf1)](_0x49628f),this[_0x2e0496(0x16c)]('击败'+(_0x3d02bd[_0x2e0496(0x1d1)]===_0x2e0496(0x1f5)?_0x2e0496(0x111):_0x2e0496(0x120))+'\x20+'+_0x49628f+_0x2e0496(0x268),_0x3d02bd[_0x2e0496(0x1d1)]==='aggressive'?_0x2e0496(0x1ba):'#4CAF50'),this[_0x2e0496(0x252)][_0x2e0496(0x199)](_0x27d102,0x1),this[_0x2e0496(0xf6)](_0x403842['x']*this[_0x2e0496(0x14c)]+this[_0x2e0496(0x14c)]/0x2,_0x403842['y']*this[_0x2e0496(0x14c)]+this[_0x2e0496(0x14c)]/0x2);this['isLevelUpMenuOpen']&&this['drawLevelUpMenu']();return;}}this[_0x2e0496(0x24b)][_0x2e0496(0x1f7)](_0x403842);if(_0x403842['x']===this[_0x2e0496(0x1c5)]['x']&&_0x403842['y']===this['food']['y']){const _0x341f19=this[_0x2e0496(0x139)][_0x2e0496(0x1aa)]?this[_0x2e0496(0x139)]['doubleScore'][_0x2e0496(0x112)]:0x1,_0x30ade5=0xa*_0x341f19;this[_0x2e0496(0x140)]+=_0x30ade5,this[_0x2e0496(0x220)]['textContent']=this[_0x2e0496(0x140)],this['addExperience'](_0x30ade5),this[_0x2e0496(0x22c)]();_0x341f19>0x1&&this[_0x2e0496(0x16c)]('+'+_0x30ade5+_0x2e0496(0x106)+_0x341f19+')','blue');this[_0x2e0496(0x124)](),this[_0x2e0496(0x264)]=!![],this[_0x2e0496(0x239)](this[_0x2e0496(0x255)]);this[_0x2e0496(0x1c6)]>0x0&&Math[_0x2e0496(0x202)]()<this['shieldChance']&&(this[_0x2e0496(0x139)][_0x2e0496(0x25d)]={'type':_0x2e0496(0x25d),'active':!![],'duration':0x2710*(this[_0x2e0496(0xf0)]||0x1),'maxDuration':0x2710*(this['effectDurationMultiplier']||0x1),'startTime':Date['now']()},this[_0x2e0496(0x16c)]('护盾触发!','purple',this[_0x2e0496(0x139)]['shield'][_0x2e0496(0x229)]));const _0x35afe8=this['canvas'][_0x2e0496(0x174)];let _0x5a4d64='neon-pulse-effect';const _0x5beef6={'neon-pulse-red':0x190,'neon-pulse-green':0x320,'neon-pulse-blue':0x258,'neon-pulse-effect':0x258};switch(this[_0x2e0496(0x255)]){case _0x2e0496(0x16b):_0x5a4d64=_0x2e0496(0x121);break;case _0x2e0496(0x18b):_0x5a4d64=_0x2e0496(0x14a);break;case _0x2e0496(0x1d3):_0x5a4d64=_0x2e0496(0x17b);break;default:_0x5a4d64=_0x2e0496(0x15d);}_0x35afe8['classList'][_0x2e0496(0x236)](_0x5a4d64),setTimeout(()=>{const _0x332af6=_0x2e0496;_0x35afe8['classList'][_0x332af6(0x151)](_0x5a4d64);},_0x5beef6[_0x5a4d64]);if(this[_0x2e0496(0x155)]<0x3&&this['difficulties'][this['currentDifficulty']][_0x2e0496(0x212)]>0x0){clearInterval(this[_0x2e0496(0x194)]);const _0x295ad9=Math[_0x2e0496(0x164)](0x32,this['difficulties'][this[_0x2e0496(0x19d)]][_0x2e0496(0xfb)]-this['score']*this[_0x2e0496(0x24e)][this[_0x2e0496(0x19d)]][_0x2e0496(0x212)]);this[_0x2e0496(0x194)]=setInterval(()=>this[_0x2e0496(0x20a)](),_0x295ad9);}}else this[_0x2e0496(0x24b)]['pop'](),this[_0x2e0496(0x264)]=![];if(this[_0x2e0496(0x156)][_0x2e0496(0x1fe)](_0x1d2610=>_0x1d2610['id']==='magnet')&&this[_0x2e0496(0x160)]>0x0){const _0x293ed8=this['snake'][0x0],_0x4b3959=Math[_0x2e0496(0x219)](this[_0x2e0496(0x1c5)]['x']-_0x293ed8['x'],this['food']['y']-_0x293ed8['y']);if(_0x4b3959<this[_0x2e0496(0x160)]/this[_0x2e0496(0x14c)]/0x2){this[_0x2e0496(0x24b)][_0x2e0496(0x1f7)](_0x293ed8);const _0x5b58e3=this[_0x2e0496(0x139)][_0x2e0496(0x1aa)]?this[_0x2e0496(0x139)][_0x2e0496(0x1aa)][_0x2e0496(0x112)]:0x1,_0x288959=0xa*_0x5b58e3;this[_0x2e0496(0x140)]+=_0x288959,this[_0x2e0496(0x220)][_0x2e0496(0x1a0)]=this[_0x2e0496(0x140)],this[_0x2e0496(0xf1)](_0x288959),this['updateExperienceBar']();_0x5b58e3>0x1&&this[_0x2e0496(0x16c)]('+'+_0x288959+_0x2e0496(0x106)+_0x5b58e3+')',_0x2e0496(0x17c));this['generateFood'](),this[_0x2e0496(0x264)]=!![],this[_0x2e0496(0x239)](this[_0x2e0496(0x255)]);this[_0x2e0496(0x1c6)]>0x0&&Math[_0x2e0496(0x202)]()<this[_0x2e0496(0x1c6)]&&(this['activeEffects']['shield']={'type':_0x2e0496(0x25d),'active':!![],'duration':0x2710*(this[_0x2e0496(0xf0)]||0x1),'startTime':Date['now']()},this[_0x2e0496(0x16c)](_0x2e0496(0x210),_0x2e0496(0x260),this[_0x2e0496(0x139)][_0x2e0496(0x25d)][_0x2e0496(0x229)]));const _0xb0f748=this[_0x2e0496(0x193)][_0x2e0496(0x174)];let _0x584660=_0x2e0496(0x15d);const _0x2bdb15={'neon-pulse-red':0x190,'neon-pulse-green':0x320,'neon-pulse-blue':0x258,'neon-pulse-effect':0x258};switch(this[_0x2e0496(0x255)]){case'#FF5252':_0x584660=_0x2e0496(0x121);break;case _0x2e0496(0x18b):_0x584660=_0x2e0496(0x14a);break;case _0x2e0496(0x1d3):_0x584660=_0x2e0496(0x17b);break;default:_0x584660=_0x2e0496(0x15d);}_0xb0f748[_0x2e0496(0x128)]['add'](_0x584660),setTimeout(()=>{const _0x484f99=_0x2e0496;_0xb0f748[_0x484f99(0x128)][_0x484f99(0x151)](_0x584660);},_0x2bdb15[_0x584660]);if(this[_0x2e0496(0x24e)][this[_0x2e0496(0x19d)]]['acceleration']>0x0){clearInterval(this[_0x2e0496(0x194)]);const _0x35eea6=Math[_0x2e0496(0x164)](0x32,this[_0x2e0496(0x24e)][this[_0x2e0496(0x19d)]][_0x2e0496(0xfb)]-this[_0x2e0496(0x140)]*this[_0x2e0496(0x24e)][this['currentDifficulty']][_0x2e0496(0x212)]);this['gameLoop']=setInterval(()=>this[_0x2e0496(0x20a)](),_0x35eea6);}}}Date[_0x2e0496(0x1c4)]()-this[_0x2e0496(0x1e7)]>this['aiSpawnInterval']&&(this[_0x2e0496(0x15a)](),this[_0x2e0496(0x1e7)]=Date[_0x2e0496(0x1c4)]()),this[_0x2e0496(0x181)](),this[_0x2e0496(0x1e8)](),this[_0x2e0496(0x16f)](),this[_0x2e0496(0x131)](),this['isLevelUpMenuOpen']&&this[_0x2e0496(0x12e)]();}[a0_0x2c19d8(0x257)](_0x9e3733){const _0x4c627c=a0_0x2c19d8;this[_0x4c627c(0x228)]=!![],this[_0x4c627c(0x1d2)]=0x5,this[_0x4c627c(0xe7)]();const _0xdb1f24=setInterval(()=>{const _0x362f8e=_0x4c627c;this[_0x362f8e(0x1d2)]--,this[_0x362f8e(0x1d2)]<=0x0?(clearInterval(_0xdb1f24),this['isStageTransition']=![],this['resumeGame']()):this['draw']();},0x3e8);}['drawLevelUpMenu'](){const _0x1202c4=a0_0x2c19d8,_0xb8166c=this['canvas'][_0x1202c4(0x170)]*0.7,_0x5d7b1c=this[_0x1202c4(0x193)][_0x1202c4(0x1b5)]*0.7,_0x1b1041=(this[_0x1202c4(0x193)][_0x1202c4(0x170)]-_0xb8166c)/0x2,_0x35f1fb=(this[_0x1202c4(0x193)][_0x1202c4(0x1b5)]-_0x5d7b1c)/0x2;this[_0x1202c4(0x18a)]['fillStyle']=_0x1202c4(0x206),this['ctx']['fillRect'](_0x1b1041,_0x35f1fb,_0xb8166c,_0x5d7b1c),this['ctx']['strokeStyle']=_0x1202c4(0x15c),this[_0x1202c4(0x18a)][_0x1202c4(0x134)]=0x3,this[_0x1202c4(0x18a)]['strokeRect'](_0x1b1041,_0x35f1fb,_0xb8166c,_0x5d7b1c),this['ctx'][_0x1202c4(0x254)]=_0x1202c4(0x187),this['ctx']['font']='12px\x20Arial',this['ctx'][_0x1202c4(0x265)]=_0x1202c4(0x1a4),this[_0x1202c4(0x18a)][_0x1202c4(0x20b)](_0x1202c4(0x237)+this['level']+')',this['canvas'][_0x1202c4(0x170)]/0x2,_0x35f1fb+0x28);const _0x5ed46e=(_0x5d7b1c-0x64)/0x3;this['availableSkills'][_0x1202c4(0x149)]((_0x33a08c,_0x5a0eb1)=>{const _0x39af03=_0x1202c4,_0x2f14fd=_0x35f1fb+0x50+_0x5a0eb1*_0x5ed46e,_0x5b4315=_0x5a0eb1===this[_0x39af03(0xfd)];this[_0x39af03(0x18a)][_0x39af03(0x254)]=_0x5b4315?_0x39af03(0x1e3):'rgba(255,\x20255,\x20255,\x200.1)',this[_0x39af03(0x18a)]['fillRect'](_0x1b1041+0x14,_0x2f14fd,_0xb8166c-0x28,_0x5ed46e-0x14),this[_0x39af03(0x18a)][_0x39af03(0x254)]='white',this['ctx'][_0x39af03(0x235)]=_0x39af03(0x1b6),this[_0x39af03(0x18a)][_0x39af03(0x265)]=_0x39af03(0x1ae),this[_0x39af03(0x18a)][_0x39af03(0x20b)](_0x33a08c['icon']+'\x20'+_0x33a08c['name'],_0x1b1041+0x28,_0x2f14fd+0xf),this[_0x39af03(0x18a)][_0x39af03(0x235)]=_0x39af03(0x1b6),this['ctx']['fillText'](_0x33a08c['description'],_0x1b1041+0x28,_0x2f14fd+0x1e);}),this[_0x1202c4(0x18a)][_0x1202c4(0x235)]='10px\x20Arial',this['ctx'][_0x1202c4(0x265)]=_0x1202c4(0x1a4),this[_0x1202c4(0x18a)][_0x1202c4(0x20b)]('使用方向键选择，按空格键确认',this['canvas'][_0x1202c4(0x170)]/0x2,_0x35f1fb+_0x5d7b1c-0x14);}[a0_0x2c19d8(0x239)](_0x34058d){const _0x3aa848=a0_0x2c19d8,_0x9aa112=document[_0x3aa848(0x242)](_0x3aa848(0x241));if(_0x9aa112['length']>0x0){let _0x1a4cff;switch(_0x34058d){case _0x3aa848(0x16b):_0x1a4cff=_0x3aa848(0x16b);break;case _0x3aa848(0x18b):_0x1a4cff='#4CAF50';break;case'#2196F3':_0x1a4cff=_0x3aa848(0x1d3);break;case _0x3aa848(0xea):_0x1a4cff=_0x3aa848(0xea);break;case'#9C27B0':_0x1a4cff=_0x3aa848(0x14f);break;default:_0x1a4cff='#0073e6';}_0x9aa112[_0x3aa848(0x149)](_0x1bad8e=>{const _0x2e5239=_0x3aa848;_0x1bad8e['style'][_0x2e5239(0x23f)]('--neon-color',_0x1a4cff);});}const _0x34c4dd={'speed':[],'control':[],'score':[],'shield':[]};Object[_0x3aa848(0x14e)](this[_0x3aa848(0x139)])[_0x3aa848(0x149)](_0x13eb09=>{const _0x4791e1=_0x3aa848,_0x33582f=this[_0x4791e1(0x139)][_0x13eb09];if(_0x34c4dd[_0x33582f[_0x4791e1(0x1d1)]])_0x34c4dd[_0x33582f[_0x4791e1(0x1d1)]]['push'](_0x13eb09);}),Object[_0x3aa848(0x159)](_0x34c4dd)[_0x3aa848(0x24d)]()[_0x3aa848(0x149)](_0x131b77=>delete this['activeEffects'][_0x131b77]);switch(_0x34058d){case _0x3aa848(0x16b):this[_0x3aa848(0x139)]['reverseControls']={'maxDuration':0x1f40,'type':_0x3aa848(0x102),'active':!![],'duration':0x1388*(this['effectDurationMultiplier']||0x1),'startTime':Date[_0x3aa848(0x1c4)]()},this['showEffectMessage'](_0x3aa848(0x137),_0x3aa848(0x1a8),this[_0x3aa848(0x139)][_0x3aa848(0x11d)][_0x3aa848(0x229)]);break;case _0x3aa848(0x18b):this[_0x3aa848(0x139)][_0x3aa848(0x11b)]={'maxDuration':0x1b58,'type':_0x3aa848(0xfb),'active':!![],'duration':0xbb8*(this[_0x3aa848(0xf0)]||0x1),'startTime':Date[_0x3aa848(0x1c4)](),'multiplier':1.5},this[_0x3aa848(0x16c)](_0x3aa848(0x163),_0x3aa848(0x143),this[_0x3aa848(0x139)][_0x3aa848(0x11b)][_0x3aa848(0x229)]);break;case _0x3aa848(0x1d3):this[_0x3aa848(0x139)]['doubleScore']={'maxDuration':0x3a98,'type':_0x3aa848(0x140),'active':!![],'duration':0x1f40*(this[_0x3aa848(0xf0)]||0x1),'startTime':Date[_0x3aa848(0x1c4)](),'multiplier':0x2},this[_0x3aa848(0x16c)](_0x3aa848(0x1f3),_0x3aa848(0x17c),this[_0x3aa848(0x139)][_0x3aa848(0x1aa)][_0x3aa848(0x229)]);break;case _0x3aa848(0xea):this[_0x3aa848(0x139)][_0x3aa848(0x144)]={'maxDuration':0x2710,'type':_0x3aa848(0xfb),'active':!![],'duration':0xfa0*(this['effectDurationMultiplier']||0x1),'startTime':Date[_0x3aa848(0x1c4)](),'multiplier':0.7},this[_0x3aa848(0x16c)](_0x3aa848(0x23c),'yellow',this[_0x3aa848(0x139)][_0x3aa848(0x144)]['duration']);break;case'#9C27B0':this[_0x3aa848(0x139)][_0x3aa848(0x25d)]={'type':_0x3aa848(0x25d),'active':!![],'duration':0x2710*(this[_0x3aa848(0xf0)]||0x1),'startTime':Date[_0x3aa848(0x1c4)]()},this['showEffectMessage']('获得护盾!','purple',this[_0x3aa848(0x139)]['shield'][_0x3aa848(0x229)]);break;}}[a0_0x2c19d8(0x1e8)](){const _0x41ed1f=a0_0x2c19d8,_0x281c1e=Date[_0x41ed1f(0x1c4)]();Object['keys'](this[_0x41ed1f(0x139)])['forEach'](_0x58540f=>{const _0x46b61e=_0x41ed1f,_0x12b464=this[_0x46b61e(0x139)][_0x58540f];_0x281c1e-_0x12b464['startTime']>_0x12b464[_0x46b61e(0x229)]&&(delete this['activeEffects'][_0x58540f],this[_0x46b61e(0x16c)](_0x46b61e(0x1f6),_0x46b61e(0x1cc)));});}['showEffectMessage'](_0x586a72,_0x5ef551,_0x58e84b=0x0){const _0x2b31ae=a0_0x2c19d8,_0x35a2e0=document['createElement'](_0x2b31ae(0x238));_0x35a2e0['style'][_0x2b31ae(0x165)]=_0x2b31ae(0x1de),_0x35a2e0[_0x2b31ae(0x1b0)][_0x2b31ae(0x18e)]='20px',_0x35a2e0[_0x2b31ae(0x1b0)][_0x2b31ae(0x1ae)]=_0x2b31ae(0x22f),_0x35a2e0[_0x2b31ae(0x1b0)][_0x2b31ae(0x1f0)]=_0x2b31ae(0x125),_0x35a2e0['style'][_0x2b31ae(0x114)]=_0x5ef551,_0x35a2e0[_0x2b31ae(0x1b0)][_0x2b31ae(0x1e0)]=_0x2b31ae(0x107),_0x35a2e0[_0x2b31ae(0x1b0)][_0x2b31ae(0x142)]=_0x2b31ae(0x18c),_0x35a2e0[_0x2b31ae(0x1b0)]['padding']='8px\x2016px',_0x35a2e0[_0x2b31ae(0x1b0)][_0x2b31ae(0x1c2)]=_0x2b31ae(0x172)+_0x5ef551,_0x35a2e0[_0x2b31ae(0x1b0)]['borderRadius']=_0x2b31ae(0x15f),_0x35a2e0[_0x2b31ae(0x1b0)][_0x2b31ae(0x1d9)]=_0x2b31ae(0x222),_0x35a2e0[_0x2b31ae(0x1b0)][_0x2b31ae(0x200)]='0\x200\x2010px\x20'+_0x5ef551+',\x200\x200\x2020px\x20'+_0x5ef551+'40',_0x35a2e0[_0x2b31ae(0x1b0)][_0x2b31ae(0x1ed)]='0',_0x35a2e0[_0x2b31ae(0x1b0)]['transition']='opacity\x200.3s,\x20transform\x200.5s',_0x35a2e0['id']='effect-message',_0x35a2e0[_0x2b31ae(0x1b0)][_0x2b31ae(0x20c)]=_0x2b31ae(0x1f9);if(_0x58e84b>0x0){const _0x59a475=document[_0x2b31ae(0x167)](_0x2b31ae(0x19f));_0x59a475['style']['marginLeft']=_0x2b31ae(0x1ad),_0x59a475[_0x2b31ae(0x1b0)][_0x2b31ae(0x142)]=_0x2b31ae(0x105),_0x59a475[_0x2b31ae(0x1b0)][_0x2b31ae(0x1ed)]='0.8',_0x59a475['textContent']='('+Math[_0x2b31ae(0x113)](_0x58e84b/0x3e8)+'s)',_0x35a2e0[_0x2b31ae(0x10c)](document[_0x2b31ae(0x126)](_0x586a72)),_0x35a2e0[_0x2b31ae(0x10c)](_0x59a475);}else _0x35a2e0[_0x2b31ae(0x1a0)]=_0x586a72;const _0x27b6c7=document['getElementById']('effect-message');if(_0x27b6c7)_0x27b6c7[_0x2b31ae(0x151)]();const _0x4ec619=this[_0x2b31ae(0x193)][_0x2b31ae(0x174)]||document[_0x2b31ae(0x196)];_0x4ec619['appendChild'](_0x35a2e0),setTimeout(()=>{const _0xc90581=_0x2b31ae;_0x35a2e0[_0xc90581(0x1b0)][_0xc90581(0x1ed)]='1',_0x35a2e0[_0xc90581(0x1b0)][_0xc90581(0x1f0)]=_0xc90581(0xfc);},0xa),window['addEventListener']('load',()=>{new SnakeGame();});const _0x56a738=_0x58e84b>0x0?Math[_0x2b31ae(0x250)](_0x58e84b,0x1388):0x7d0;setTimeout(()=>{const _0x135b7c=_0x2b31ae;_0x35a2e0[_0x135b7c(0x1b0)][_0x135b7c(0x1ed)]='0',_0x35a2e0[_0x135b7c(0x1b0)][_0x135b7c(0x1f0)]=_0x135b7c(0x1df),setTimeout(()=>_0x35a2e0[_0x135b7c(0x151)](),0x12c);},_0x56a738);}[a0_0x2c19d8(0xf6)](_0x4e2c0a,_0x38201e){}[a0_0x2c19d8(0x23e)](){}['updateExperienceBar'](){const _0x16e3f0=a0_0x2c19d8,_0x307c5a=document['getElementById'](_0x16e3f0(0x25f));if(!_0x307c5a)return;_0x307c5a[_0x16e3f0(0xef)]='';const _0x122f40=document[_0x16e3f0(0x17d)](_0x16e3f0(0x179));_0x122f40&&(_0x122f40[_0x16e3f0(0x1a0)]=this[_0x16e3f0(0x19c)]);const _0x5edcf9=0xa,_0x4f5348=Math[_0x16e3f0(0x250)](Math[_0x16e3f0(0x119)](this[_0x16e3f0(0x22e)]/this[_0x16e3f0(0x185)]*_0x5edcf9),_0x5edcf9);for(let _0x317219=0x0;_0x317219<_0x5edcf9;_0x317219++){const _0x14fd37=document['createElement']('div');_0x14fd37[_0x16e3f0(0x116)]=_0x16e3f0(0x17a)+(_0x317219<_0x4f5348?_0x16e3f0(0x1e5):''),_0x307c5a[_0x16e3f0(0x10c)](_0x14fd37);}}['checkStageUpgrade'](){const _0x11fd3a=a0_0x2c19d8;console[_0x11fd3a(0x11c)]('Checking\x20stage\x20upgrade\x20-\x20Current\x20stage:',this[_0x11fd3a(0x155)],_0x11fd3a(0x1a7),this[_0x11fd3a(0x140)],_0x11fd3a(0x132),this[_0x11fd3a(0xff)][this['currentStage']-0x1]);if(this['currentStage']<0x3){const _0x28da99=this[_0x11fd3a(0x155)]+0x1,_0x102471=this['stageThresholds'][this[_0x11fd3a(0x155)]-0x1];this[_0x11fd3a(0x140)]>=_0x102471&&(this[_0x11fd3a(0x155)]=_0x28da99,console[_0x11fd3a(0x11c)](_0x11fd3a(0x182),_0x28da99),this[_0x11fd3a(0x257)](_0x28da99));}}['updateEffectDurations'](){const _0x4e8d55=a0_0x2c19d8,_0x455704=document[_0x4e8d55(0x17d)](_0x4e8d55(0x256));if(!_0x455704)return;_0x455704['innerHTML']='',_0x455704['style']['display']=_0x4e8d55(0x1f1),_0x455704[_0x4e8d55(0x1b0)][_0x4e8d55(0x1bd)]=_0x4e8d55(0x224),_0x455704[_0x4e8d55(0x1b0)][_0x4e8d55(0x225)]=_0x4e8d55(0x138),_0x455704[_0x4e8d55(0x1b0)][_0x4e8d55(0x115)]='flex-end',_0x455704['style'][_0x4e8d55(0x262)]=_0x4e8d55(0x1ad),_0x455704[_0x4e8d55(0x1b0)][_0x4e8d55(0x25b)]=_0x4e8d55(0x1ad),_0x455704[_0x4e8d55(0x1b0)]['bottom']='0',_0x455704[_0x4e8d55(0x1b0)][_0x4e8d55(0x10e)]='0',_0x455704[_0x4e8d55(0x1b0)][_0x4e8d55(0x165)]=_0x4e8d55(0x1de),this['skills'][_0x4e8d55(0x149)](_0x427923=>{const _0x106d4d=_0x4e8d55,_0x4719fb=document[_0x106d4d(0x167)](_0x106d4d(0x238));_0x4719fb[_0x106d4d(0x116)]=_0x106d4d(0x1ac),_0x4719fb[_0x106d4d(0xef)]=_0x106d4d(0x173)+_0x427923[_0x106d4d(0x180)]+_0x106d4d(0x166),_0x4719fb[_0x106d4d(0x1b0)][_0x106d4d(0x1d6)]=_0x106d4d(0x21c),_0x455704[_0x106d4d(0x10c)](_0x4719fb);}),Object[_0x4e8d55(0x14e)](this[_0x4e8d55(0x139)])[_0x4e8d55(0x149)](_0x48b2e5=>{const _0x5faea5=_0x4e8d55,_0x378654=this[_0x5faea5(0x139)][_0x48b2e5];if(!_0x378654[_0x5faea5(0x229)]||!_0x378654[_0x5faea5(0x253)])return;const _0x235d0d=document[_0x5faea5(0x167)](_0x5faea5(0x238));_0x235d0d['className']=_0x5faea5(0x227);const _0x4f80f2=document['createElement'](_0x5faea5(0x238));_0x4f80f2['className']=_0x5faea5(0x148),_0x4f80f2[_0x5faea5(0x1a0)]=this[_0x5faea5(0x24f)](_0x48b2e5);const _0x5368f6=document[_0x5faea5(0x167)](_0x5faea5(0x238));_0x5368f6[_0x5faea5(0x116)]='effect-bar-container';const _0x429ba1=document[_0x5faea5(0x167)](_0x5faea5(0x238));_0x429ba1['className']=_0x5faea5(0x249);const _0x2b66bf=_0x378654[_0x5faea5(0x229)]-(Date[_0x5faea5(0x1c4)]()-_0x378654[_0x5faea5(0x157)]);_0x429ba1[_0x5faea5(0x1b0)][_0x5faea5(0x170)]=_0x2b66bf/_0x378654['maxDuration']*0x64+'%';switch(_0x48b2e5){case _0x5faea5(0x11b):_0x429ba1[_0x5faea5(0x1b0)]['backgroundColor']=_0x5faea5(0x1d5),_0x429ba1[_0x5faea5(0x1b0)]['boxShadow']=_0x5faea5(0x15b);break;case _0x5faea5(0x144):_0x429ba1[_0x5faea5(0x1b0)][_0x5faea5(0x1d9)]=_0x5faea5(0xf7),_0x429ba1[_0x5faea5(0x1b0)][_0x5faea5(0x200)]=_0x5faea5(0x1b7);break;case _0x5faea5(0x25d):_0x429ba1[_0x5faea5(0x1b0)][_0x5faea5(0x1d9)]=_0x5faea5(0x150),_0x429ba1[_0x5faea5(0x1b0)][_0x5faea5(0x200)]='0\x200\x205px\x20#ffff00,\x200\x200\x2010px\x20#ffff00';break;case _0x5faea5(0x184):_0x429ba1[_0x5faea5(0x1b0)][_0x5faea5(0x1d9)]=_0x5faea5(0xf4),_0x429ba1[_0x5faea5(0x1b0)][_0x5faea5(0x200)]=_0x5faea5(0x13c);break;default:_0x429ba1[_0x5faea5(0x1b0)][_0x5faea5(0x1d9)]=_0x5faea5(0x15c),_0x429ba1[_0x5faea5(0x1b0)][_0x5faea5(0x200)]=_0x5faea5(0x12f);}_0x5368f6[_0x5faea5(0x10c)](_0x429ba1),_0x235d0d[_0x5faea5(0x10c)](_0x4f80f2),_0x235d0d[_0x5faea5(0x10c)](_0x5368f6),_0x455704['appendChild'](_0x235d0d);});}[a0_0x2c19d8(0x24f)](_0x4422db){const _0x131a5c=a0_0x2c19d8,_0x4700cb={'speedBoost':_0x131a5c(0x153),'slowDown':'Slow\x20Down','shield':_0x131a5c(0xed),'magnet':_0x131a5c(0x1b4)};return _0x4700cb[_0x4422db]||_0x4422db;}[a0_0x2c19d8(0x131)](){const _0x465dba=a0_0x2c19d8;this[_0x465dba(0x18a)][_0x465dba(0x1dd)](0x0,0x0,this[_0x465dba(0x193)][_0x465dba(0x170)],this[_0x465dba(0x193)][_0x465dba(0x1b5)]),this[_0x465dba(0x18a)][_0x465dba(0x175)]=_0x465dba(0x25c),this[_0x465dba(0x18a)]['lineWidth']=0.5;for(let _0x5ee163=0x0;_0x5ee163<=this[_0x465dba(0x1b1)];_0x5ee163++){this[_0x465dba(0x18a)][_0x465dba(0x245)](),this['ctx'][_0x465dba(0x1cd)](_0x5ee163*this[_0x465dba(0x14c)],0x0),this[_0x465dba(0x18a)]['lineTo'](_0x5ee163*this[_0x465dba(0x14c)],this[_0x465dba(0x193)][_0x465dba(0x1b5)]),this[_0x465dba(0x18a)][_0x465dba(0x214)](),this[_0x465dba(0x18a)][_0x465dba(0x245)](),this[_0x465dba(0x18a)][_0x465dba(0x1cd)](0x0,_0x5ee163*this[_0x465dba(0x14c)]),this[_0x465dba(0x18a)][_0x465dba(0x1a3)](this[_0x465dba(0x193)][_0x465dba(0x170)],_0x5ee163*this[_0x465dba(0x14c)]),this['ctx'][_0x465dba(0x214)]();}if(this[_0x465dba(0x139)]['shield']){const _0x5946d9=this[_0x465dba(0x24b)][0x0];this[_0x465dba(0x18a)]['beginPath'](),this['ctx'][_0x465dba(0x21a)](_0x5946d9['x']*this[_0x465dba(0x14c)]+this['cellSize']/0x2,_0x5946d9['y']*this[_0x465dba(0x14c)]+this[_0x465dba(0x14c)]/0x2,this[_0x465dba(0x14c)]*0.7,0x0,Math['PI']*0x2),this[_0x465dba(0x18a)][_0x465dba(0x175)]=_0x465dba(0x176),this[_0x465dba(0x18a)][_0x465dba(0x134)]=0x3,this[_0x465dba(0x18a)][_0x465dba(0x266)]([0x5,0x3]),this[_0x465dba(0x18a)][_0x465dba(0x214)](),this[_0x465dba(0x18a)][_0x465dba(0x266)]([]);}if(this[_0x465dba(0x228)]){this[_0x465dba(0x18a)]['fillStyle']=_0x465dba(0xeb),this['ctx'][_0x465dba(0x258)](0x0,0x0,this[_0x465dba(0x193)][_0x465dba(0x170)],this['canvas'][_0x465dba(0x1b5)]),this[_0x465dba(0x18a)][_0x465dba(0x254)]=_0x465dba(0x11f),this[_0x465dba(0x18a)][_0x465dba(0x235)]='bold\x2040px\x20Arial',this[_0x465dba(0x18a)][_0x465dba(0x265)]=_0x465dba(0x1a4),this[_0x465dba(0x18a)][_0x465dba(0x20b)](_0x465dba(0x104)+this[_0x465dba(0x155)]+'!',this[_0x465dba(0x193)]['width']/0x2,this[_0x465dba(0x193)][_0x465dba(0x1b5)]/0x2-0x1e),this['ctx'][_0x465dba(0x254)]=_0x465dba(0x187),this[_0x465dba(0x18a)][_0x465dba(0x235)]=_0x465dba(0x1a9),this[_0x465dba(0x18a)][_0x465dba(0x20b)](this[_0x465dba(0x1d2)],this[_0x465dba(0x193)]['width']/0x2,this[_0x465dba(0x193)]['height']/0x2+0x28),this[_0x465dba(0x18a)][_0x465dba(0x235)]=_0x465dba(0x188),this['ctx'][_0x465dba(0x20b)](_0x465dba(0xe9)+this['stageTransitionCountdown']+_0x465dba(0x14b),this['canvas'][_0x465dba(0x170)]/0x2,this[_0x465dba(0x193)]['height']/0x2+0x50);return;}console[_0x465dba(0x11c)](_0x465dba(0x135),this[_0x465dba(0x155)]),this['ctx'][_0x465dba(0x254)]=_0x465dba(0x11f),this[_0x465dba(0x18a)][_0x465dba(0x235)]=_0x465dba(0x1ab),this[_0x465dba(0x18a)][_0x465dba(0x265)]=_0x465dba(0x1a4),this[_0x465dba(0x18a)]['fillText']('阶段'+this[_0x465dba(0x155)],this[_0x465dba(0x193)]['width']/0x2,0x19);const _0x2fdf28=0x64,_0x18cf3f=0x8,_0x3a04d7=this['experience']/this['experienceToNextLevel'];this[_0x465dba(0x18a)]['fillStyle']=_0x465dba(0x1eb),this[_0x465dba(0x18a)][_0x465dba(0x258)](0x5,this[_0x465dba(0x193)][_0x465dba(0x1b5)]-0xf,_0x2fdf28,_0x18cf3f),this[_0x465dba(0x18a)][_0x465dba(0x254)]=_0x465dba(0x15c),this[_0x465dba(0x18a)][_0x465dba(0x258)](0x5,this['canvas'][_0x465dba(0x1b5)]-0xf,_0x2fdf28*_0x3a04d7,_0x18cf3f),this[_0x465dba(0x252)][_0x465dba(0x149)](_0x4ca891=>{const _0x5a4872=_0x465dba,_0x444300=_0x4ca891[_0x5a4872(0x1d1)]===_0x5a4872(0x1f5)?_0x5a4872(0x1ba):_0x5a4872(0x18b);_0x4ca891['segments'][_0x5a4872(0x149)]((_0x108ad0,_0x55a397)=>{const _0x51c654=_0x5a4872;this[_0x51c654(0x18a)]['fillStyle']=_0x55a397===0x0?_0x444300:this[_0x51c654(0x146)](_0x444300,-0x1e),this[_0x51c654(0x18a)][_0x51c654(0x263)]=_0x444300,this[_0x51c654(0x18a)][_0x51c654(0x169)]=0xa,this[_0x51c654(0x18a)][_0x51c654(0x258)](_0x108ad0['x']*this[_0x51c654(0x14c)],_0x108ad0['y']*this[_0x51c654(0x14c)],this[_0x51c654(0x14c)],this['cellSize']),this[_0x51c654(0x18a)][_0x51c654(0x254)]=this[_0x51c654(0x146)](_0x444300,-0x32),this[_0x51c654(0x18a)][_0x51c654(0x169)]=0x0,this[_0x51c654(0x18a)][_0x51c654(0x258)](_0x108ad0['x']*this[_0x51c654(0x14c)]+this['cellSize']*0.15,_0x108ad0['y']*this[_0x51c654(0x14c)]+this[_0x51c654(0x14c)]*0.15,this[_0x51c654(0x14c)]*0.7,this[_0x51c654(0x14c)]*0.7);});}),this[_0x465dba(0x18a)][_0x465dba(0x169)]=0x0,this[_0x465dba(0x24b)][_0x465dba(0x149)]((_0x297063,_0x5a1a00)=>{const _0x165742=_0x465dba,_0x444c20=_0x5a1a00===0x0?_0x165742(0x15c):_0x165742(0x16d);this[_0x165742(0x18a)][_0x165742(0x254)]=_0x444c20,this[_0x165742(0x18a)][_0x165742(0x263)]=_0x444c20,this[_0x165742(0x18a)][_0x165742(0x169)]=0xa,this[_0x165742(0x18a)][_0x165742(0x258)](_0x297063['x']*this[_0x165742(0x14c)],_0x297063['y']*this[_0x165742(0x14c)],this[_0x165742(0x14c)],this['cellSize']),this[_0x165742(0x18a)][_0x165742(0x254)]=_0x5a1a00===0x0?'#00cc7a':_0x165742(0x13e),this[_0x165742(0x18a)][_0x165742(0x169)]=0x0,this[_0x165742(0x18a)][_0x165742(0x258)](_0x297063['x']*this[_0x165742(0x14c)]+this['cellSize']*0.15,_0x297063['y']*this[_0x165742(0x14c)]+this[_0x165742(0x14c)]*0.15,this[_0x165742(0x14c)]*0.7,this['cellSize']*0.7);}),this[_0x465dba(0x16f)]();if(this['isDashing']){this[_0x465dba(0x18a)][_0x465dba(0x21e)](),this[_0x465dba(0x18a)][_0x465dba(0x244)]=0.6,this['ctx'][_0x465dba(0x254)]='#0099ff',this[_0x465dba(0x18a)][_0x465dba(0x263)]=_0x465dba(0x1b2),this[_0x465dba(0x18a)]['shadowBlur']=0x14;for(let _0x577eac=0x0;_0x577eac<Math['min'](0x3,this[_0x465dba(0x24b)][_0x465dba(0x198)]-0x1);_0x577eac++){const _0x110b82=this[_0x465dba(0x24b)][_0x577eac],_0x4af0ca=this['cellSize']*(0x1-_0x577eac*0.2),_0x47824c=(this[_0x465dba(0x14c)]-_0x4af0ca)/0x2;this[_0x465dba(0x18a)][_0x465dba(0x245)](),this[_0x465dba(0x18a)][_0x465dba(0x21a)](_0x110b82['x']*this[_0x465dba(0x14c)]+this[_0x465dba(0x14c)]/0x2,_0x110b82['y']*this['cellSize']+this['cellSize']/0x2,_0x4af0ca/0x2,0x0,Math['PI']*0x2),this[_0x465dba(0x18a)]['fill']();}this[_0x465dba(0x18a)]['restore']();}this['ctx'][_0x465dba(0x169)]=0x0;if(this['food']){const _0x52e047=this['foodColor']||'#FF5252';this[_0x465dba(0x18a)][_0x465dba(0x254)]=_0x52e047,this[_0x465dba(0x18a)]['shadowColor']=_0x52e047,this[_0x465dba(0x18a)][_0x465dba(0x169)]=0xf,this[_0x465dba(0x18a)][_0x465dba(0x258)](this[_0x465dba(0x1c5)]['x']*this[_0x465dba(0x14c)],this[_0x465dba(0x1c5)]['y']*this['cellSize'],this[_0x465dba(0x14c)],this['cellSize']),this[_0x465dba(0x18a)][_0x465dba(0x254)]=this[_0x465dba(0x146)](_0x52e047,0x32),this[_0x465dba(0x18a)][_0x465dba(0x169)]=0x0,this[_0x465dba(0x18a)][_0x465dba(0x258)](this[_0x465dba(0x1c5)]['x']*this['cellSize']+this[_0x465dba(0x14c)]*0.25,this['food']['y']*this[_0x465dba(0x14c)]+this[_0x465dba(0x14c)]*0.25,this[_0x465dba(0x14c)]*0.5,this['cellSize']*0.5);}this[_0x465dba(0x18a)][_0x465dba(0x169)]=0x0;}[a0_0x2c19d8(0x146)](_0x206fb5,_0x198b7d){const _0x37e71e=a0_0x2c19d8;let _0x2b564a=parseInt(_0x206fb5[_0x37e71e(0x1cb)](0x1,0x3),0x10),_0x171425=parseInt(_0x206fb5['slice'](0x3,0x5),0x10),_0x4f4164=parseInt(_0x206fb5['slice'](0x5,0x7),0x10);return _0x2b564a=Math[_0x37e71e(0x250)](0xff,Math[_0x37e71e(0x164)](0x0,_0x2b564a+_0x198b7d)),_0x171425=Math[_0x37e71e(0x250)](0xff,Math[_0x37e71e(0x164)](0x0,_0x171425+_0x198b7d)),_0x4f4164=Math['min'](0xff,Math[_0x37e71e(0x164)](0x0,_0x4f4164+_0x198b7d)),'#'+_0x2b564a['toString'](0x10)['padStart'](0x2,'0')+_0x171425[_0x37e71e(0x100)](0x10)[_0x37e71e(0x127)](0x2,'0')+_0x4f4164[_0x37e71e(0x100)](0x10)['padStart'](0x2,'0');}['addExperience'](_0x5d34a7){const _0x3fa305=a0_0x2c19d8;this[_0x3fa305(0x22e)]+=_0x5d34a7,this[_0x3fa305(0x16c)]('+'+_0x5d34a7+_0x3fa305(0x268),_0x3fa305(0x12d)),this['updateExperienceBar']();while(this[_0x3fa305(0x22e)]>=this[_0x3fa305(0x185)]){this[_0x3fa305(0x1c0)]();}}[a0_0x2c19d8(0x1c0)](){const _0x40105c=a0_0x2c19d8;this['level']++,this[_0x40105c(0x22e)]-=this[_0x40105c(0x185)],this[_0x40105c(0x185)]=Math[_0x40105c(0x119)](this[_0x40105c(0x185)]*1.5),this[_0x40105c(0x16c)](_0x40105c(0x110)+this[_0x40105c(0x19c)],_0x40105c(0xf8)),this['generateSkillOptions'](),this[_0x40105c(0x20e)][_0x40105c(0x198)]>0x0?(this[_0x40105c(0x211)]++,this['isLevelUpMenuOpen']=!![]):this[_0x40105c(0x13b)]=![],this[_0x40105c(0xe7)]();}[a0_0x2c19d8(0xec)](){const _0x1ee759=a0_0x2c19d8,_0x4f1f03=[{'id':_0x1ee759(0xf5),'name':'速度提升','description':_0x1ee759(0x215),'icon':'⚡'},{'id':_0x1ee759(0x20f),'name':'效果延长','description':'所有效果持续时间增加20%','icon':'⏱️'},{'id':_0x1ee759(0x1e1),'name':'得分加成','description':_0x1ee759(0x1f2),'icon':'💰'},{'id':_0x1ee759(0x1be),'name':_0x1ee759(0x162),'description':_0x1ee759(0x154),'icon':_0x1ee759(0x141)},{'id':_0x1ee759(0x16e),'name':_0x1ee759(0x23a),'description':_0x1ee759(0xfe),'icon':'🚪'},{'id':_0x1ee759(0x184),'name':_0x1ee759(0x158),'description':_0x1ee759(0xfa),'icon':'🧲'},{'id':_0x1ee759(0x17f),'name':_0x1ee759(0x11e),'description':'连续两次点击同一方向键可以往前冲刺3个单元格','icon':'💨'}],_0x208b61=_0x4f1f03['filter'](_0x2af325=>!this[_0x1ee759(0x156)][_0x1ee759(0x1fe)](_0x5584c1=>_0x5584c1['id']===_0x2af325['id']));this[_0x1ee759(0x20e)]=[];while(this[_0x1ee759(0x20e)][_0x1ee759(0x198)]<0x3&&_0x208b61[_0x1ee759(0x198)]>0x0){const _0x4d9fd3=Math['floor'](Math[_0x1ee759(0x202)]()*_0x208b61['length']);this[_0x1ee759(0x20e)][_0x1ee759(0x1f4)](_0x208b61[_0x1ee759(0x199)](_0x4d9fd3,0x1)[0x0]);}}['selectSkill'](_0x49843e){const _0xfc3ec7=a0_0x2c19d8,_0x128a34=this['availableSkills'][_0xfc3ec7(0x186)](_0x5dac64=>_0x5dac64['id']===_0x49843e);_0x128a34&&(this[_0xfc3ec7(0x156)][_0xfc3ec7(0x1f4)](_0x128a34),this['applySkillEffect'](_0x128a34),this[_0xfc3ec7(0x211)]--,this[_0xfc3ec7(0x13b)]=![],this[_0xfc3ec7(0x267)]());}[a0_0x2c19d8(0x1c9)](_0x23a059){const _0x3570b3=a0_0x2c19d8;if(_0x23a059['id']==='dash'){this[_0x3570b3(0xf9)]=!![];return;}switch(_0x23a059['id']){case _0x3570b3(0xf5):this[_0x3570b3(0x24e)][this['currentDifficulty']][_0x3570b3(0xfb)]*=0.9;break;case _0x3570b3(0x20f):this[_0x3570b3(0xf0)]=(this[_0x3570b3(0xf0)]||0x1)*1.2;break;case _0x3570b3(0x1e1):this[_0x3570b3(0x103)]=(this[_0x3570b3(0x103)]||0x1)*1.2;break;case _0x3570b3(0x1be):this[_0x3570b3(0x1c6)]=(this[_0x3570b3(0x1c6)]||0x0)+0.1;break;case'magnet':this[_0x3570b3(0x160)]=0x64,this[_0x3570b3(0x139)][_0x3570b3(0x184)]={'maxDuration':0x3a98,'type':_0x3570b3(0x184),'active':!![],'duration':0x2710*(this[_0x3570b3(0xf0)]||0x1),'startTime':Date['now']()},this[_0x3570b3(0x16c)](_0x3570b3(0x1d8),_0x3570b3(0x1ec),this[_0x3570b3(0x139)]['magnet']['duration']);break;}}['pauseGame'](){const _0xa723f9=a0_0x2c19d8;this[_0xa723f9(0xee)]=!![],clearInterval(this['gameLoop']);}[a0_0x2c19d8(0x267)](){const _0x4ba740=a0_0x2c19d8;this[_0x4ba740(0xee)]=![],this['startGame']();}['gameOver'](){const _0xd3d38c=a0_0x2c19d8;this[_0xd3d38c(0xe7)](),this[_0xd3d38c(0x139)]={},this[_0xd3d38c(0x16f)](),this[_0xd3d38c(0x13b)]=![],this[_0xd3d38c(0x1af)][_0xd3d38c(0x128)][_0xd3d38c(0x151)](_0xd3d38c(0x10f));const _0x3ae221=document[_0xd3d38c(0x167)](_0xd3d38c(0x238));_0x3ae221[_0xd3d38c(0xef)]=_0xd3d38c(0x17e)+this[_0xd3d38c(0x155)]+_0xd3d38c(0x195)+this[_0xd3d38c(0x140)]+_0xd3d38c(0x171)+this['level']+_0xd3d38c(0x232)+(this[_0xd3d38c(0x156)][_0xd3d38c(0x13d)](_0x35cbf5=>_0x35cbf5['name'])[_0xd3d38c(0x117)](',\x20')||'无')+_0xd3d38c(0x240),_0x3ae221['style'][_0xd3d38c(0x114)]=_0xd3d38c(0x187),_0x3ae221[_0xd3d38c(0x1b0)][_0xd3d38c(0x265)]=_0xd3d38c(0x1a4),_0x3ae221[_0xd3d38c(0x1b0)][_0xd3d38c(0x133)]=_0xd3d38c(0x1cf),this['gameOverElement'][_0xd3d38c(0x10c)](_0x3ae221);const _0x328047=_0x3ae221;let _0xe799d0=0x0;const _0x15754b=setInterval(()=>{const _0x802952=_0xd3d38c,_0x496c77=(Math[_0x802952(0x202)]()-0.5)*0x8,_0x3c3243=(Math[_0x802952(0x202)]()-0.5)*0x8;_0x328047[_0x802952(0x1b0)][_0x802952(0x1f0)]=_0x802952(0x22a)+_0x496c77+'px,\x20'+_0x3c3243+_0x802952(0x201),_0xe799d0++,_0xe799d0>=0xf&&(clearInterval(_0x15754b),_0x328047['style']['transform']=_0x802952(0x1c7));},0x1e);}[a0_0x2c19d8(0x243)](){const _0xa2d770=a0_0x2c19d8,_0xc3ef49=Date[_0xa2d770(0x1c4)]();if(_0xc3ef49-this['lastAIMoveTime']<this['aiMoveInterval'])return this['direction'];this[_0xa2d770(0x230)]=_0xc3ef49;const _0x3318e9=this[_0xa2d770(0x24b)][0x0],_0x310a7b=this[_0xa2d770(0x24b)][_0xa2d770(0x1cb)](0x1);if(this['justAteFood']){const _0x517915=this[_0xa2d770(0x1ea)](_0x3318e9,_0x310a7b)[_0xa2d770(0x13d)](_0x4051e5=>({'point':_0x4051e5,'score':this['evaluatePostFoodSafety'](_0x4051e5,_0x310a7b)}))[_0xa2d770(0x1e2)]((_0x3822b1,_0x37e785)=>_0x37e785['score']-_0x3822b1[_0xa2d770(0x140)]);if(_0x517915[_0xa2d770(0x198)]>0x0)return this[_0xa2d770(0x130)](_0x3318e9,_0x517915[0x0][_0xa2d770(0x1fd)]);}const _0x250484=this[_0xa2d770(0x13f)](_0x3318e9,_0x310a7b);if(_0x250484<0xa)return this[_0xa2d770(0x1ef)](_0x3318e9,_0x310a7b);const _0x5619e9=this['findPathToFood'](_0x3318e9,this[_0xa2d770(0x1c5)],_0x310a7b);if(_0x5619e9&&_0x5619e9[_0xa2d770(0x198)]>0x0){const _0x44bd0f=_0x5619e9[0x0];if(this[_0xa2d770(0x205)](_0x44bd0f,_0x310a7b)&&!this[_0xa2d770(0x1ce)](_0x44bd0f))return this[_0xa2d770(0x130)](_0x3318e9,_0x44bd0f);}return this[_0xa2d770(0x1ef)](_0x3318e9,_0x310a7b);}['findPathToFood'](_0x4ff2f6,_0x2ed20f,_0x3986b3){const _0x20b408=a0_0x2c19d8,_0x3a7da7=new Set(),_0x2ef552=[[_0x4ff2f6]];_0x3a7da7[_0x20b408(0x236)](this['pointToKey'](_0x4ff2f6));const _0x4fefaf=Math['min'](0x1e,this[_0x20b408(0x1b1)]*this[_0x20b408(0x1b1)]),_0xc3fbcb=this[_0x20b408(0x221)](0x3),_0x20f9b9=new Set(),_0xac63f=Math[_0x20b408(0x21f)](_0x4ff2f6['x']-_0x2ed20f['x'])+Math[_0x20b408(0x21f)](_0x4ff2f6['y']-_0x2ed20f['y']);if(_0xac63f<=0x3){const _0x4a4bc3=this[_0x20b408(0x177)](_0x4ff2f6,_0x2ed20f,_0x3986b3);if(_0x4a4bc3)return _0x4a4bc3;}const _0x4ded24=Math['min'](_0x2ed20f['x'],_0x2ed20f['y'],this[_0x20b408(0x1b1)]-0x1-_0x2ed20f['x'],this[_0x20b408(0x1b1)]-0x1-_0x2ed20f['y']),_0x51cd96=_0x4ded24<0x3?_0x4fefaf*1.5:_0x4fefaf;while(_0x2ef552[_0x20b408(0x198)]>0x0&&_0x2ef552[_0x20b408(0x198)]<_0x51cd96){const _0x23dec8=_0x2ef552[_0x20b408(0x25e)](),_0x1bf3e0=_0x23dec8[_0x23dec8[_0x20b408(0x198)]-0x1];if(this['pointsEqual'](_0x1bf3e0,_0x2ed20f)){if(this[_0x20b408(0x18f)](_0x23dec8,_0x3986b3))return _0x23dec8[_0x20b408(0x1cb)](0x1);continue;}const _0x3da7a2=this[_0x20b408(0x1ea)](_0x1bf3e0,_0x3986b3)[_0x20b408(0x13d)](_0x3811ad=>({'point':_0x3811ad,'score':this['evaluateMoveSafety'](_0x3811ad,_0x2ed20f,_0x3986b3,_0xc3fbcb,_0x20f9b9)}))[_0x20b408(0x1e2)]((_0x2ba75a,_0x4f560b)=>_0x4f560b[_0x20b408(0x140)]-_0x2ba75a[_0x20b408(0x140)])[_0x20b408(0x13d)](_0x416f7f=>_0x416f7f[_0x20b408(0x1fd)]);for(const _0x4b299a of _0x3da7a2){const _0x24102a=this[_0x20b408(0x118)](_0x4b299a);!_0x3a7da7[_0x20b408(0x147)](_0x24102a)&&(_0x3a7da7['add'](_0x24102a),_0x20f9b9[_0x20b408(0x236)](_0x24102a),_0x2ef552[_0x20b408(0x1f4)]([..._0x23dec8,_0x4b299a]));}}return this[_0x20b408(0x129)](_0x4ff2f6,_0x3986b3,_0x20f9b9);}[a0_0x2c19d8(0x177)](_0x2598db,_0x25b2a5,_0x3da8b1){const _0x5dd920=a0_0x2c19d8;if(_0x2598db['x']===_0x25b2a5['x']||_0x2598db['y']===_0x25b2a5['y']){const _0x5b0866=this[_0x5dd920(0x130)](_0x2598db,_0x25b2a5),_0x1641c7=this[_0x5dd920(0x259)](_0x2598db,_0x5b0866);if(this['isValidMove'](_0x1641c7,_0x3da8b1)&&!this[_0x5dd920(0x1ce)](_0x1641c7))return[_0x1641c7];}return null;}[a0_0x2c19d8(0x129)](_0x500abc,_0x576872,_0x78b81e){const _0x5ce0fa=a0_0x2c19d8,_0x46e50d=new Set(),_0x5f0f62=[[_0x500abc]];_0x46e50d['add'](this[_0x5ce0fa(0x118)](_0x500abc));let _0x201c0f=null,_0x485e0e=0x0;const _0x5bda46=0xf;while(_0x5f0f62['length']>0x0&&_0x5f0f62[_0x5ce0fa(0x198)]<_0x5bda46){const _0x16dad4=_0x5f0f62[_0x5ce0fa(0x25e)](),_0x32d1f8=_0x16dad4[_0x16dad4[_0x5ce0fa(0x198)]-0x1],_0x383ed2=this[_0x5ce0fa(0x13f)](_0x32d1f8,_0x576872);_0x383ed2>_0x485e0e&&(_0x485e0e=_0x383ed2,_0x201c0f=_0x16dad4);if(_0x383ed2>0x14)return _0x16dad4[_0x5ce0fa(0x1cb)](0x1);const _0x5b21cf=this[_0x5ce0fa(0x1ea)](_0x32d1f8,_0x576872)[_0x5ce0fa(0x231)](_0x5f1b4b=>!_0x78b81e[_0x5ce0fa(0x147)](this[_0x5ce0fa(0x118)](_0x5f1b4b)))[_0x5ce0fa(0x13d)](_0x1fb550=>({'point':_0x1fb550,'score':this[_0x5ce0fa(0x234)](_0x1fb550,_0x576872)}))[_0x5ce0fa(0x1e2)]((_0x1c3d8b,_0xa5623e)=>_0xa5623e[_0x5ce0fa(0x140)]-_0x1c3d8b[_0x5ce0fa(0x140)])[_0x5ce0fa(0x13d)](_0x38b199=>_0x38b199[_0x5ce0fa(0x1fd)]);for(const _0x5a7d3d of _0x5b21cf){const _0x13ec65=this[_0x5ce0fa(0x118)](_0x5a7d3d);!_0x46e50d[_0x5ce0fa(0x147)](_0x13ec65)&&(_0x46e50d[_0x5ce0fa(0x236)](_0x13ec65),_0x5f0f62[_0x5ce0fa(0x1f4)]([..._0x16dad4,_0x5a7d3d]));}}return _0x201c0f?_0x201c0f[_0x5ce0fa(0x1cb)](0x1):null;}[a0_0x2c19d8(0x1e6)](_0x329711,_0x46fb42,_0xfcae86,_0x481912=[],_0x17c246=new Set()){const _0x2c0fc0=a0_0x2c19d8;let _0x591762=0x0;if(_0x329711['x']<0x0||_0x329711['x']>=this[_0x2c0fc0(0x1b1)]||_0x329711['y']<0x0||_0x329711['y']>=this['gridSize'])return-Infinity;if(this[_0x2c0fc0(0x1ce)](_0x329711))return-Infinity;const _0x38574e=Math[_0x2c0fc0(0x250)](_0x329711['x'],_0x329711['y'],this[_0x2c0fc0(0x1b1)]-0x1-_0x329711['x'],this[_0x2c0fc0(0x1b1)]-0x1-_0x329711['y']);_0x38574e<0x2?_0x591762-=(0x2-_0x38574e)*0x1e:_0x591762+=_0x38574e*0x3;const _0x56bb09=this[_0x2c0fc0(0x13f)](_0x329711,_0xfcae86);_0x591762+=_0x56bb09*0xa;const _0x1f8777=Math[_0x2c0fc0(0x21f)](_0x329711['x']-_0x46fb42['x'])+Math[_0x2c0fc0(0x21f)](_0x329711['y']-_0x46fb42['y']);_0x591762-=_0x1f8777*0x3;const _0x209990=this[_0x2c0fc0(0x1b1)]/0x2,_0x342d4b=this[_0x2c0fc0(0x1b1)]/0x2,_0x2ba8f1=Math[_0x2c0fc0(0x21f)](_0x329711['x']-_0x209990)+Math[_0x2c0fc0(0x21f)](_0x329711['y']-_0x342d4b);_0x591762-=_0x2ba8f1;const _0x1bdeca=this[_0x2c0fc0(0x1ea)](_0x329711,_0xfcae86);_0x591762+=_0x1bdeca[_0x2c0fc0(0x198)]*0xa;this[_0x2c0fc0(0x248)](_0x329711,_0x481912)&&(_0x591762-=0x1f4);_0x56bb09<0xf&&_0x1f8777>0x2&&(_0x591762-=0x12c);_0x17c246[_0x2c0fc0(0x147)](this[_0x2c0fc0(0x118)](_0x329711))&&(_0x591762-=0xc8);!_0x17c246[_0x2c0fc0(0x147)](this[_0x2c0fc0(0x118)](_0x329711))&&(_0x591762+=0x64);const _0x37a4db=Math[_0x2c0fc0(0x21f)](this[_0x2c0fc0(0x24b)][0x0]['x']-_0x46fb42['x'])+Math[_0x2c0fc0(0x21f)](this['snake'][0x0]['y']-_0x46fb42['y']);_0x1f8777<_0x37a4db&&(_0x591762+=0xc8);const _0x3a0c3a=Math[_0x2c0fc0(0x250)](_0x46fb42['x'],_0x46fb42['y'],this[_0x2c0fc0(0x1b1)]-0x1-_0x46fb42['x'],this['gridSize']-0x1-_0x46fb42['y']);return _0x3a0c3a<0x3&&(_0x591762+=(0x3-_0x3a0c3a)*0x32),_0x591762;}['evaluateOpenSpaceMove'](_0x3ade2d,_0x3928fc){const _0x1af43e=a0_0x2c19d8;let _0x1abb4a=0x0;if(_0x3ade2d['x']<0x0||_0x3ade2d['x']>=this[_0x1af43e(0x1b1)]||_0x3ade2d['y']<0x0||_0x3ade2d['y']>=this[_0x1af43e(0x1b1)])return-Infinity;const _0x217a4d=this[_0x1af43e(0x13f)](_0x3ade2d,_0x3928fc);_0x1abb4a+=_0x217a4d*0xa;const _0x3e8550=this[_0x1af43e(0x1b1)]/0x2,_0x2197c3=this[_0x1af43e(0x1b1)]/0x2,_0x31a0da=Math[_0x1af43e(0x21f)](_0x3ade2d['x']-_0x3e8550)+Math[_0x1af43e(0x21f)](_0x3ade2d['y']-_0x2197c3);_0x1abb4a-=_0x31a0da*0x2;const _0x3807bc=this[_0x1af43e(0x1ea)](_0x3ade2d,_0x3928fc);_0x1abb4a+=_0x3807bc[_0x1af43e(0x198)]*0x8;const _0xd730ef=Math[_0x1af43e(0x250)](_0x3ade2d['x'],_0x3ade2d['y'],this[_0x1af43e(0x1b1)]-0x1-_0x3ade2d['x'],this[_0x1af43e(0x1b1)]-0x1-_0x3ade2d['y']);return _0xd730ef<0x2&&(_0x1abb4a-=(0x2-_0xd730ef)*0x14),_0x1abb4a;}[a0_0x2c19d8(0x1ce)](_0x2855b1){const _0x552c25=a0_0x2c19d8;if(this[_0x552c25(0x24b)]['slice'](0x1)[_0x552c25(0x1fe)](_0x3ec0c1=>this['pointsEqual'](_0x3ec0c1,_0x2855b1)))return!![];const _0x38c959=[...this[_0x552c25(0x24b)]];_0x38c959[_0x552c25(0x1f7)](_0x2855b1),_0x38c959[_0x552c25(0x269)]();const _0x2cd455=_0x38c959[0x0],_0x160ad9=_0x38c959[_0x552c25(0x1cb)](0x1),_0xf4d5e8=this['getNeighbors'](_0x2cd455,_0x160ad9);if(_0xf4d5e8[_0x552c25(0x198)]===0x0)return!![];const _0x142230=this[_0x552c25(0x13f)](_0x2cd455,_0x160ad9);if(_0x142230<0x5)return!![];return![];}[a0_0x2c19d8(0x221)](_0xc5792a){const _0x4cbcb4=a0_0x2c19d8,_0x22a411=[];for(let _0x4f947b=0x1;_0x4f947b<=Math[_0x4cbcb4(0x250)](_0xc5792a,this[_0x4cbcb4(0x24b)]['length']-0x1);_0x4f947b++){_0x4f947b<this['snake']['length']&&_0x22a411[_0x4cbcb4(0x1f4)]({'from':this[_0x4cbcb4(0x24b)][_0x4f947b],'to':this[_0x4cbcb4(0x24b)][_0x4f947b-0x1]});}return _0x22a411;}[a0_0x2c19d8(0x248)](_0x432247,_0x2a9171){const _0x2bbfc0=a0_0x2c19d8;if(_0x2a9171[_0x2bbfc0(0x198)]<0x2)return![];const _0x485ff7=_0x2a9171[0x0],_0x8c1230=_0x2a9171[0x1];if(this[_0x2bbfc0(0x19e)](_0x432247,_0x8c1230[_0x2bbfc0(0x246)])&&this[_0x2bbfc0(0x19e)](_0x485ff7[_0x2bbfc0(0x246)],this['snake'][0x0]))return!![];if(_0x2a9171[_0x2bbfc0(0x198)]>=0x3){const _0x589cc4=_0x2a9171[0x2];if(this[_0x2bbfc0(0x19e)](_0x432247,_0x589cc4[_0x2bbfc0(0x246)])&&this['pointsEqual'](_0x485ff7[_0x2bbfc0(0x246)],this[_0x2bbfc0(0x24b)][0x0]))return!![];}return![];}[a0_0x2c19d8(0x1ef)](_0x24b4ad,_0x5a7656){const _0x449410=a0_0x2c19d8,_0x2d9f98=this[_0x449410(0x1ea)](_0x24b4ad,_0x5a7656);if(_0x2d9f98[_0x449410(0x198)]===0x0)return this['direction'];const _0x539c2c=this[_0x449410(0x221)](0x5),_0x323823=_0x2d9f98[_0x449410(0x231)](_0x23ada1=>!this[_0x449410(0x1ce)](_0x23ada1))[_0x449410(0x13d)](_0x15c540=>({'move':_0x15c540,'score':this[_0x449410(0x1e6)](_0x15c540,this[_0x449410(0x1c5)],_0x5a7656,_0x539c2c)}));if(_0x323823['length']===0x0){const _0x4dbd1a=_0x2d9f98[_0x449410(0x231)](_0x25b62a=>this[_0x449410(0x205)](_0x25b62a,_0x5a7656))[_0x449410(0x13d)](_0x38e444=>({'move':_0x38e444,'score':this['evaluateEmergencyMove'](_0x38e444,_0x5a7656,_0x539c2c)}))[_0x449410(0x1e2)]((_0x7c9185,_0x42a87e)=>_0x42a87e[_0x449410(0x140)]-_0x7c9185[_0x449410(0x140)]);if(_0x4dbd1a[_0x449410(0x198)]>0x0)return this['getDirectionFromPoints'](_0x24b4ad,_0x4dbd1a[0x0]['move']);return this['direction'];}_0x323823[_0x449410(0x1e2)]((_0x409262,_0x533dd6)=>_0x533dd6[_0x449410(0x140)]-_0x409262['score']);const _0x41c479=_0x323823[0x0][_0x449410(0x261)];return this['getDirectionFromPoints'](_0x24b4ad,_0x41c479);}[a0_0x2c19d8(0x22d)](_0x827214,_0x1d0744,_0x2e144f=[]){const _0x2c5890=a0_0x2c19d8;let _0x5a21ba=0x0;const _0x33e074=Math[_0x2c5890(0x250)](_0x827214['x'],_0x827214['y'],this['gridSize']-0x1-_0x827214['x'],this[_0x2c5890(0x1b1)]-0x1-_0x827214['y']);_0x5a21ba+=_0x33e074*0xa;const _0x1cf9a6=this[_0x2c5890(0x13f)](_0x827214,_0x1d0744);_0x5a21ba+=_0x1cf9a6*0x5;const _0x13c93c=this[_0x2c5890(0x1ea)](_0x827214,_0x1d0744);return _0x5a21ba+=_0x13c93c[_0x2c5890(0x198)]*0x8,this[_0x2c5890(0x248)](_0x827214,_0x2e144f)&&(_0x5a21ba-=0x12c),_0x5a21ba;}['isValidMove'](_0x4b2a0d,_0x4c7a33){const _0x3b92be=a0_0x2c19d8;if(_0x4b2a0d['x']<0x0||_0x4b2a0d['x']>=this[_0x3b92be(0x1b1)]||_0x4b2a0d['y']<0x0||_0x4b2a0d['y']>=this[_0x3b92be(0x1b1)])return![];if(_0x4c7a33[_0x3b92be(0x1fe)](_0x5cb1c9=>this[_0x3b92be(0x19e)](_0x5cb1c9,_0x4b2a0d)))return![];const _0x98398b=Math['min'](_0x4b2a0d['x'],_0x4b2a0d['y'],this[_0x3b92be(0x1b1)]-0x1-_0x4b2a0d['x'],this[_0x3b92be(0x1b1)]-0x1-_0x4b2a0d['y']);if(_0x98398b<0x2&&this[_0x3b92be(0x24b)][_0x3b92be(0x198)]>0x5)return![];return!![];}[a0_0x2c19d8(0x13f)](_0x57e052,_0x16d1a6){const _0x32e6b1=a0_0x2c19d8,_0x1d567c=new Set(),_0x547c7b=[_0x57e052];_0x1d567c[_0x32e6b1(0x236)](this[_0x32e6b1(0x118)](_0x57e052));let _0x17a24e=0x0;while(_0x547c7b[_0x32e6b1(0x198)]>0x0){const _0x48e640=_0x547c7b[_0x32e6b1(0x25e)]();_0x17a24e++;const _0x902032=this[_0x32e6b1(0x1ea)](_0x48e640,_0x16d1a6);for(const _0x399c6c of _0x902032){const _0x188fba=this[_0x32e6b1(0x118)](_0x399c6c);!_0x1d567c['has'](_0x188fba)&&(_0x1d567c[_0x32e6b1(0x236)](_0x188fba),_0x547c7b[_0x32e6b1(0x1f4)](_0x399c6c));}}return _0x17a24e;}[a0_0x2c19d8(0x259)](_0x168c57,_0x2d35f3){const _0x2414aa=a0_0x2c19d8,_0x46e850={..._0x168c57};switch(_0x2d35f3){case'up':_0x46e850['y']--;break;case _0x2414aa(0x1fc):_0x46e850['y']++;break;case _0x2414aa(0x1ae):_0x46e850['x']--;break;case'right':_0x46e850['x']++;break;}return _0x46e850;}[a0_0x2c19d8(0x118)](_0x1124a0){return _0x1124a0['x']+','+_0x1124a0['y'];}[a0_0x2c19d8(0x19e)](_0xee1586,_0x20968f){return _0xee1586['x']===_0x20968f['x']&&_0xee1586['y']===_0x20968f['y'];}[a0_0x2c19d8(0x1ea)](_0x23e5d4,_0x27a6b7){const _0x3c7770=a0_0x2c19d8,_0x358eba=[],_0x16c779=[{'x':0x0,'y':-0x1},{'x':0x1,'y':0x0},{'x':0x0,'y':0x1},{'x':-0x1,'y':0x0}];for(const _0x20ddbf of _0x16c779){const _0x22c91d={'x':_0x23e5d4['x']+_0x20ddbf['x'],'y':_0x23e5d4['y']+_0x20ddbf['y']};this[_0x3c7770(0x205)](_0x22c91d,_0x27a6b7)&&_0x358eba[_0x3c7770(0x1f4)](_0x22c91d);}return _0x358eba;}[a0_0x2c19d8(0x130)](_0x4cd2d5,_0x56d270){const _0x6c30eb=a0_0x2c19d8,_0x12e74a=_0x56d270['x']-_0x4cd2d5['x'],_0x5a7e46=_0x56d270['y']-_0x4cd2d5['y'];if(_0x12e74a===0x1)return _0x6c30eb(0x10e);if(_0x12e74a===-0x1)return _0x6c30eb(0x1ae);if(_0x5a7e46===0x1)return _0x6c30eb(0x1fc);if(_0x5a7e46===-0x1)return'up';return this[_0x6c30eb(0x192)];}[a0_0x2c19d8(0x18f)](_0x335717,_0x4d317d){const _0x405bda=a0_0x2c19d8,_0x3438eb=[...this[_0x405bda(0x24b)]];for(let _0x2e8d8d=0x1;_0x2e8d8d<_0x335717[_0x405bda(0x198)];_0x2e8d8d++){const _0x53210c=_0x335717[_0x2e8d8d];if(!this[_0x405bda(0x205)](_0x53210c,_0x3438eb['slice'](0x1)))return![];_0x3438eb['unshift'](_0x53210c),_0x3438eb[_0x405bda(0x269)]();const _0x44086a=this[_0x405bda(0x13f)](_0x53210c,_0x3438eb['slice'](0x1));if(_0x44086a<0x5)return![];}return!![];}[a0_0x2c19d8(0x16a)](_0x320644,_0x217ae2){const _0x2b59c7=a0_0x2c19d8,_0xedc2b6=Math['min'](_0x320644['x'],_0x320644['y'],this[_0x2b59c7(0x1b1)]-0x1-_0x320644['x'],this['gridSize']-0x1-_0x320644['y']);let _0x9f04ee=_0xedc2b6*0x14;const _0x288492=this[_0x2b59c7(0x13f)](_0x320644,_0x217ae2);_0x9f04ee+=_0x288492*0xa;const _0x5492c5=this[_0x2b59c7(0x1ea)](_0x320644,_0x217ae2);return _0x9f04ee+=_0x5492c5[_0x2b59c7(0x198)]*0xa,_0x217ae2[_0x2b59c7(0x1fe)](_0x501b96=>this[_0x2b59c7(0x19e)](_0x501b96,_0x320644))&&(_0x9f04ee=-Infinity),_0x9f04ee;}}window[a0_0x2c19d8(0x1bf)](a0_0x2c19d8(0x1c3),()=>{new SnakeGame();});
